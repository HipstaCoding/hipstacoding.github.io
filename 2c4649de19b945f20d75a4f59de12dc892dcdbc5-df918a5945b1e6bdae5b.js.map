{"version":3,"sources":["webpack:///./node_modules/@fullcalendar/core/locales/ru.js","webpack:///./node_modules/@fullcalendar/common/vdom.js","webpack:///./node_modules/@fullcalendar/daygrid/main.js","webpack:///./node_modules/@fullcalendar/timegrid/main.js","webpack:///./node_modules/@fullcalendar/google-calendar/main.js","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./node_modules/grommet/es6/components/Layer/StyledLayer.js","webpack:///./node_modules/grommet/es6/components/Layer/LayerContainer.js","webpack:///./node_modules/grommet/es6/components/Layer/Layer.js","webpack:///./node_modules/date-fns/esm/addDays/index.js","webpack:///./node_modules/date-fns/esm/addHours/index.js","webpack:///./node_modules/date-fns/esm/addMinutes/index.js","webpack:///./src/pages/dashboard/schedule.jsx","webpack:///./node_modules/date-fns/esm/addWeeks/index.js","webpack:///./node_modules/@fullcalendar/interaction/main.js","webpack:///./node_modules/@fullcalendar/react/dist/vdom.js","webpack:///./node_modules/@fullcalendar/react/dist/main.js"],"names":["Object","defineProperty","exports","value","default","code","week","dow","doy","buttonText","prev","next","today","month","day","list","weekText","allDayText","moreLinkText","n","noEventsText","FullCalendarVDom","Error","Component","createElement","createRef","render","Fragment","createContext","flushToDom","unmountComponentAtNode","TableView","_super","_this","apply","this","arguments","headerElRef","prototype","renderSimpleLayout","headerRowContent","bodyContent","props","context","sections","stickyHeaderDates","options","push","type","key","isSticky","chunk","elRef","tableClassName","rowContent","liquid","content","viewSpec","rootElRef","classNames","ref","className","concat","join","isHeightAuto","forPrint","cols","renderHScrollLayout","colCnt","dayMinWidth","ScrollGrid","pluginHooks","scrollGridImpl","stickyFooterScrollbar","chunks","colGroups","span","minWidth","splitSegsByRow","segs","rowCnt","byRow","i","_i","segs_1","length","seg","row","splitSegsByFirstCol","byCol","segs_2","firstCol","splitInteractionByRow","ui","affectedInstances","isEvent","_a","TableCellTop","navLinkAttrs","navLinks","date","tabIndex","dateProfile","todayRange","showDayNumber","extraHookProps","defaultContent","renderTopInner","innerElRef","innerContent","forceDayTop","dayNumberText","DEFAULT_WEEK_NUM_FORMAT","TableCell","handleRootEl","el","rootEl","handleMoreLinkClick","ev","onMoreClick","allSegs","segsByEachCol","hiddenSegs","filter","segIsHidden","eventRange","instance","instanceId","moreCnt","dayEl","viewApi","hookProps","num","text","buildMoreLinkText","view","dayElRef","dayClassNames","rootDataAttrs","isDisabled","extraClassNames","extraDataAttrs","showWeekNumber","defaultFormat","weekElRef","weekClassNames","fgContentElRef","style","paddingBottom","fgPaddingBottom","fgContent","Boolean","marginTop","moreMarginTop","moreLinkClassNames","moreLinkContent","renderMoreLinkInner","didMount","moreLinkDidMount","willUnmount","moreLinkWillUnmount","onClick","bgContent","addPropsEquality","DEFAULT_TABLE_EVENT_TIME_FORMAT","hour","minute","omitZeroMinute","meridiem","hasListItemDisplay","display","def","allDay","lastCol","isStart","isEnd","TableListItemEvent","timeFormat","eventTimeFormat","timeText","defaultDisplayEventEnd","renderInnerContent","isDragging","isResizing","isDateSelecting","isSelected","isPast","isFuture","isToday","url","href","innerProps","borderColor","backgroundColor","event","title","TableBlockEvent","defaultTimeFormat","disableResizing","computeFgSegPlacement","cellModels","dayMaxEvents","dayMaxEventRows","eventHeights","maxContentHeight","eventOrderSpecs","colPlacements","moreCnts","segTops","segMarginTops","moreTops","paddingBottoms","placeSeg","hiddenCnts","limitEvents","placement","bottom","limitByMaxHeight","levelIndex","limitByMaxEvents","limitByMaxRows","col","currentNonAbsBottom","currentAbsHeight","placements_1","top","segHeight","tryPlaceSegAt","canPlaceSegAt","placements","insertionIndex","splice","instanceIdAndFirstCol","split","segsByFirstCol","map","extractFirstColSegs","segsForCols","oneColPlacements","oneColPlacements_2","extractAllColSegs","dayDate","colIndex","dayStart","dayEnd","dayRange","start","end","newSegs","origRange","range","slicedRange","durationEditable","valueOf","resliceDaySegs","oneColPlacements_1","_moreLinkConsumesLevel","isPlacementInBounds","segIsVisible","visibleColPlacements","level","placements_2","recordVisible","recordHidden","destPlacements","newPosition","currentLevel","moreLinkConsumesLevel","hiddenCnt","doomedLevel","pop","TableRow","cellElRefs","frameElRefs","fgElRefs","segHarnessRefs","state","framePositions","segHeights","cells","businessHoursByCol","businessHourSegs","bgEventSegsByCol","bgEventSegs","highlightSegsByCol","getHighlightSegs","mirrorSegsByCol","getMirrorSegs","_b","fgEventSegs","eventOrder","selectedInstanceHash","eventDrag","eventResize","renderIntro","cell","normalFgNodes","renderFgSegs","mirrorFgNodes","showDayNumbers","showWeekNumbers","arg","fromCol","renderFillSegs","componentDidMount","updateSizing","componentDidUpdate","prevProps","prevState","currentProps","dateSelectionSegs","eventSelection","nodes","isMirror","isInvisible","isAbsolute","top_1","left","right","isRtl","lefts","rights","visibility","fillType","leftRightCss","isExternalSizingChange","clientWidth","frameEls","currentMap","originEl","current","setState","limitByContentHeight","computeSegHeights","computeMaxContentHeight","eventHarnessEl","getBoundingClientRect","height","firstKey","cellEl","fcContainerEl","getCellEls","elMap","addStateEquality","Popover","repositioner","updateSize","bind","handleDocumentMousedown","onClose","contains","target","handleDocumentScroll","request","handleCloseClick","theme","getClass","extraAttrs","getIconClass","children","document","addEventListener","componentWillUnmount","removeEventListener","alignmentEl","topAlignmentEl","dims","alignment","Math","min","window","innerHeight","max","width","innerWidth","MorePopover","dateEnv","hiddenInstances","selectedInstanceId","format","dayPopoverFormat","dataAttrs","onCloseClick","positionToHit","positionLeft","positionTop","originRect","elRect","newOriginLeft","newOriginTop","localLeft","localTop","dateSpan","relativeRect","layer","Table","splitBusinessHourSegs","splitBgEventSegs","splitFgEventSegs","splitDateSelectionSegs","splitEventDrag","splitEventResize","buildBuildMoreLinkText","morePopoverRef","rowRefs","morePopoverState","clickOption","moreLinkClick","segForPublic","toDate","jsEvent","calendarApi","zoomTo","currentFgEventSegs","fromRow","handleMorePopoverClose","expandRows","businessHourSegsByRow","bgEventSegsByRow","fgEventSegsByRow","dateSelectionSegsByRow","eventDragByRow","eventResizeByRow","limitViaBalanced","tableMinWidth","unit","nowDate","clientHeight","colGroupNode","toISOString","renderRowIntro","isSegAllDay","headerAlignElRef","prepareHits","rowPositions","collect","rowObj","colPositions","leftPosition","topPosition","morePopover","morePopoverHit","leftToIndex","topToIndex","getCellRange","getCellEl","tops","bottoms","moreLinkTextInput","DayTableSlicer","forceDayIfListItem","sliceRange","dateRange","dayTableModel","DayTable","slicer","tableRef","registerInteractiveComponent","unregisterInteractiveComponent","sliceProps","nextDayThreshold","queryHit","rawHit","component","rect","DayTableView","buildDayTableModel","headerRef","dateProfileGenerator","headerContent","dayHeaders","dates","headerDates","datesRepDistinctDays","contentArg","businessHours","dateSelection","eventStore","eventUiBases","tableColGroupNode","weekNumbers","daySeries","renderRange","test","currentRangeUnit","TableDateProfileGenerator","buildRenderRange","currentRange","isRangeAllDay","endOfWeek","call","startOfWeek","monthMode","fixedWeekCount","ceil","OPTION_REFINERS","main","initialView","optionRefiners","views","dayGrid","dateProfileGeneratorClass","dayGridDay","duration","days","dayGridWeek","weeks","dayGridMonth","months","AllDaySplitter","getKeyInfo","timed","getKeysForDateSpan","getKeysForEventDef","eventDef","DEFAULT_SLAT_LABEL_FORMAT","TimeColsAxisCell","isLabeled","Consumer","isoTimeStr","labelFormat","slotLabelFormat","Array","isArray","time","slotLabelClassNames","slotLabelContent","slotLabelDidMount","slotLabelWillUnmount","customClassNames","TimeBodyAxis","slatMetas","slatMeta","TimeColsView","allDaySplitter","scrollerElRef","slatCoords","handleScrollTopRequest","scrollTop","scrollerEl","renderHeadAxis","rowKey","frameHeight","dayCnt","renderTableRowAxis","rowHeight","allDayClassNames","allDayContent","renderAllDayInner","allDayDidMount","allDayWillUnmount","handleSlatCoords","timeContent","outerContent","syncRowHeights","rowSyncHeights","colSpan","isNowIndicator","nowIndicator","nowIndicatorTop","safeComputeTop","isAxis","getAllDayMaxEventProps","undefined","TimeColsSlatsCoords","positions","slotDuration","startOfDayDate","timeMs","slotMinTime","slotMaxTime","computeTimeTop","computeDateTop","when","slatIndex","slatRemainder","len","els","slatCoverage","milliseconds","floor","getHeight","TimeColsSlatsBody","slatElRefs","axis","slotLaneClassNames","slotLaneContent","slotLaneDidMount","slotLaneWillUnmount","TimeColsSlats","minHeight","onCoords","offsetHeight","splitSegsByCol","segsByCol","splitInteractionByCol","computeSegCoords","eventMinHeight","computeSegVerticals","forwardCoord","backwardCoord","forwardPressure","level0","levels","j","computeSlotSegCollisions","buildSlotSegLevels","k","forwardSegs","computeForwardSlotSegs","level0_1","computeSlotSegPressures","level0_2","computeSegForwardBack","computeSegHorizontals","otherSegs","results","seg1","seg2","forwardSeg","seriesBackwardPressure","seriesBackwardCoord","objs","buildTimeGridSegCompareObj","specs","field","order","sort","obj0","obj1","c","_seg","sortForwardSegs","obj","DEFAULT_TIME_FORMAT","TimeColEvent","isCondensed","TimeColMisc","timeGridEventCondensedHeight","TimeCol","isSelectMirror","selectMirror","mirrorSegs","interactionAffectedInstances","renderNowIndicator","nowIndicatorSegs","segIsInvisible","renderPrintFgSegs","renderPositionedFgSegs","positionCss","computeSegTopBottomCss","computeFgSegPositionCss","shouldOverlap","slotEventOverlap","zIndex","TimeColsContent","splitNowIndicatorSegs","nowIndicatorSegsByRow","updateCoords","onColCoords","TimeCols","processSlotOptions","handleScrollRequest","onScrollTopRequest","handleColCoords","colCoords","onSlatCoords","scrollResponder","createScrollResponder","update","detach","snapDuration","snapsPerSlot","slatTop","slatHeight","partial","snapIndex","add","snapDurationOverride","DayTimeColsSlicer","dayRanges","segRange","DayTimeCols","buildDayRanges","timeColsRef","sliceNowDate","ranges","STOCK_SUB_DURATIONS","hours","minutes","seconds","buildSlatMetas","explicitLabelInterval","Date","slatTime","slatIterator","labelInterval","slotsPerLabel","computeLabelInterval","metas","DayTimeColsView","buildTimeColsModel","splitProps","slotLabelInterval","hasAttachedAxis","hasDetachedAxis","allDaySlot","timeGridContent","timeGrid","usesMinMaxTime","timeGridDay","timeGridWeek","googleCalendarApiKey","String","EVENT_SOURCE_REFINERS","googleCalendarId","googleCalendarApiBase","extraParams","eventSourceDef","parseMeta","refined","match","exec","decodeURIComponent","parseGoogleCalendarId","fetch","onSuccess","onFailure","meta","eventSource","apiKey","apiBase","encodeURIComponent","buildUrl","extraParamsObj","requestParams_1","params","startStr","endStr","canComputeOffset","formatIso","timeMin","timeMax","singleEvents","maxResults","timeZone","buildRequestParams","body","xhr","items","gcalTimezone","error","message","errors","rawEvents","item","htmlLink","replace","whole","qs","hash","injectQsComponent","id","summary","dateTime","location","description","gcalItemToRawEventDef","eventSourceDefs","eventSourceRefiners","_extendStatics","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","__extends","__","constructor","create","_assign","assign","t","s","__spreadArrays","il","r","a","jl","hiddenPositionStyle","StyledLayer","div","withConfig","displayName","componentId","position","styles","targetBounds","_props$targetBounds","responsive","responsiveBreakpoint","breakpoint","global","breakpoints","extend","defaultProps","StyledOverlay","plain","overlay","background","margin","indexOf","marginValue","marginApplied","edgeSize","getBounds","bounds","KEYFRAMES","center","vertical","horizontal","full","keys","animation","animate","animationDuration","POSITIONS","desktopContainerStyle","modal","data","border","radius","size","round","customCSS","intelligentRounding","responsiveContainerStyle","elevationStyle","elevation","dark","container","StyledContainer","xxsmall","_extends","source","HiddenAnchor","defaultPortalContext","fullBounds","LayerContainer","_ref","_ref$full","_ref$margin","_ref$modal","onClickOutside","onEsc","_ref$position","_ref$responsive","layerTarget","rest","excluded","sourceKeys","_objectWithoutPropertiesLoose","_useState","setTargetBounds","anchorRef","containerRef","layerRef","portalContext","PortalContext","portalId","nextPortalContext","node","scrollIntoView","element","activeElement","parentElement","focus","onClickDocument","clickedPortalId","attr","getAttribute","parseInt","parentNode","updateBounds","dir","onMouseDown","Keyboard","stopPropagation","Provider","FocusedContainer","hidden","restrictScroll","trapFocus","Layer","targetChildPosition","originalFocusedElement","setOriginalFocusedElement","_useState2","layerContainer","setLayerContainer","containerTarget","ContainerTargetContext","setTimeout","layerClone","cloneNode","appendChild","clonedContainer","querySelector","animationDirection","clone","getElementById","removeChild","remove","LayerWrapper","addDays","dirtyDate","dirtyAmount","requiredArgs","amount","toInteger","isNaN","NaN","setDate","getDate","addHours","addMilliseconds","addMinutes","CalendarStyles","createGlobalStyle","transparentize","colors","red","green","now","styled","backgroundPrimary","mediaQueries","sm","getFullYear","getMonth","tomorrow","afterWeek","addWeeks","generateEvents","useRef","user","useFirebase","functions","useFunctions","useState","setApiKey","setAvaliableTime","useEffect","console","log","process","httpsCallable","getUserEvents","then","response","events","renderEventContent","eventInfo","withFirebaseProvider","calendarRef","availiableTime","Box","flex","direction","locale","ruLocale","plugins","dayGridPlugin","interactionPlugin","timeGridPlugin","googleCalendarPlugin","headerToolbar","contentHeight","firstDay","dateClick","e","getApi","changeView","dateStr","selectable","navigate","eventClick","preventDefault","eventSources","eventContent","validRange","touchMouseIgnoreWait","ignoreMouseDepth","listenerCnt","isWindowTouchMoveCancelled","PointerDragging","containerEl","subjectEl","selector","handleSelector","shouldIgnoreMove","shouldWatchScroll","isTouchDragging","wasTouchScroll","handleMouseDown","shouldIgnoreMouse","button","ctrlKey","isPrimaryMouseButton","tryStart","pev","createEventFromMouse","emitter","trigger","initScrollWatch","handleMouseMove","handleMouseUp","recordCoords","cleanup","handleTouchStart","createEventFromTouch","targetEl","handleTouchMove","handleTouchEnd","handleTouchScroll","handleScroll","pageX","pageXOffset","prevScrollX","prevPageX","pageY","pageYOffset","prevScrollY","prevPageY","origEvent","isTouch","deltaX","origPageX","deltaY","origPageY","passive","onWindowTouchMove","destroy","querySubjectEl","downEl","destroyScrollWatch","cancelTouchScroll","isFirst","touches","ElementMirror","isVisible","sourceEl","mirrorEl","sourceElRect","revertDuration","origScreenX","origScreenY","updateElPosition","handleMove","setIsVisible","bool","stop","needsRevertAnimation","callback","done","doRevertAnimation","finalSourceElRect","transition","getMirrorEl","classList","boxSizing","ScrollGeomCache","scrollController","doesListening","getScrollTop","scrollLeft","getScrollLeft","handleScrollChange","origScrollTop","origScrollLeft","scrollWidth","getScrollWidth","scrollHeight","getScrollHeight","getClientWidth","getClientHeight","clientRect","computeClientRect","getEventTarget","setScrollTop","getMaxScrollTop","setScrollLeft","getMaxScrollLeft","ElementScrollGeomCache","WindowScrollGeomCache","getTime","performance","AutoScroller","isEnabled","scrollQuery","edgeThreshold","maxVelocity","pointerScreenX","pointerScreenY","isAnimating","scrollCaches","everMovedUp","everMovedDown","everMovedLeft","everMovedRight","edge","computeBestEdge","handleSide","msSinceRequest","requestAnimation","buildCaches","yDelta","xDelta","requestAnimationFrame","scrollCache","invDistance","distance","velocity","sign","name","bestSide","leftDist","rightDist","topDist","bottomDist","canScrollUp","canScrollDown","canScrollLeft","canScrollRight","queryScrollEls","query","slice","querySelectorAll","FeaturefulElementDragging","delay","minDistance","touchScrollAllowed","mirrorNeedsRevert","isInteracting","isDelayEnded","isDistanceSurpassed","delayTimeoutId","onPointerDown","pointer","mirror","startDelay","handleDistanceSurpassed","onPointerMove","autoScroller","onPointerUp","tryStopDrag","clearTimeout","on","handleDelayEnd","tryStartDrag","stopDrag","setIgnoreMove","setMirrorIsVisible","setMirrorNeedsRevert","setAutoScrollEnabled","OffsetTracker","origRect","scrollEl","computeLeft","computeTop","isWithinClipping","tagName","point","HitDragging","dragging","droppableStore","useSubjectCenter","requireInitial","initialHit","movingHit","finalHit","handlePointerDown","processFirstCoord","handleDragStart","handleDragMove","handlePointerUp","releaseHits","handleDragEnd","subjectRect","origPoint","adjustedPoint","queryHitForOffset","slicedSubjectRect","coordAdjust","forceHandle","hit","isHitsEqual","offsetTrackers","interactionSettings","offsetLeft","offsetTop","bestHit","offsetTracker","originLeft","originTop","getCurrentData","activeRange","hit0","hit1","buildDatePointApiWithContext","datePointTransforms","transform","omitTime","DateClicking","settings","isValidDateDownEl","hitDragging","DateSelecting","dragSelection","canSelect","selectLongPressDelay","longPressDelay","getComponentTouchDelay","unselect","handleHitUpdate","isFinal","isInvalid","dateSelectionTransformers","dateSpan0","dateSpan1","ms","dateSelectionTransformers_1","res","transformer","joinHitsIntoSelection","isDateSelectionValid","dispatch","selection","selectMinDistance","dragScroll","EventDragging","subjectSeg","relevantEvents","receivingContext","validMutation","mutatedRelevantEvents","origTarget","initialContext","eventInstanceId","eventDragMinDistance","eventLongPressDelay","getComponentTouchDelay$1","fixedMirrorParent","dragRevertDuration","isValid","isValidSegDownEl","mutation","interaction","affectedEvents","mutatedEvents","receivingComponent","receivingOptions","editable","droppable","massagers","date0","date1","standardProps","hasEnd","allDayMaintainDuration","delta","largeUnit","datesDelta","massagers_1","massager","computeEventMutation","eventDragMutationMassagers","isInteractionValid","displayDrag","initialContext_1","receivingContext_1","eventInstance","eventApi","relevantEvents_1","mutatedRelevantEvents_1","clearDrag","updatedEventApi","defs","defId","instances","eventChangeArg","oldEvent","relatedEvents","revert","transformed","eventDropTransformers","eventRemoveArg","draggedEl","addedEventDef","addedEventInstance","addedEventApi","eventAddArg","SELECTOR","useEventCenter","nextContext","prevContext","initialCalendar","EventResizing","draggingSegEl","draggingSeg","segEl","querySegEl","isFromStart","instanceRange","transforms","transforms_1","startDelta","endDelta","computeMutation","eventResizeJoinTransforms","UnselectAuto","isRecentPointerDateSelect","matchesCancel","matchesEvent","onSelect","selectInfo","onDocumentPointerDown","unselectCancel","onDocumentPointerUp","documentPointer","calendarState","unselectAuto","off","LISTENER_REFINERS","eventDragStart","eventDragStop","eventDrop","eventResizeStart","eventResizeStop","drop","eventReceive","eventLeave","ExternalElementDragging","suppliedDragMeta","droppableEvent","dragMeta","buildDragMeta","canDropElOnCalendar","defProps","leftoverProps","externalDefTransforms","extra","sourceId","forceEventDuration","startTime","computeEventForDateSpan","finalView","addingEvents_1","str","prefix","dataAttrPrefix","prefixedName","getEmbeddedElData","JSON","parse","dropAccept","ExternalDraggable","itemSelector","appendTo","eventData","InferredElementDragging","mirrorSelector","currentMirrorEl","handlePointerMove","ThirdPartyDraggable","containerOrSettings","Element","componentInteractions","calendarInteractions","elementDraggingImpl","listenerRefiners","globalThis","react","FullCalendar","_calendarApi","optionOverrides","calendarOptions"],"mappings":"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","file":"2c4649de19b945f20d75a4f59de12dc892dcdbc5-df918a5945b1e6bdae5b.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar ru = {\n  code: 'ru',\n  week: {\n    dow: 1,\n    // Monday is the first day of the week.\n    doy: 4 // The week that contains Jan 4th is the first week of the year.\n\n  },\n  buttonText: {\n    prev: 'Пред',\n    next: 'След',\n    today: 'Сегодня',\n    month: 'Месяц',\n    week: 'Неделя',\n    day: 'День',\n    list: 'Повестка дня'\n  },\n  weekText: 'Нед',\n  allDayText: 'Весь день',\n  moreLinkText: function moreLinkText(n) {\n    return '+ ещё ' + n;\n  },\n  noEventsText: 'Нет событий для отображения'\n};\nexports.default = ru;","/// <reference types=\"@fullcalendar/core-preact\" />\nif (typeof FullCalendarVDom === 'undefined') {\n  throw new Error('Please import the top-level fullcalendar lib before attempting to import a plugin.');\n}\n\nvar Component = FullCalendarVDom.Component;\nvar createElement = FullCalendarVDom.createElement;\nvar render = FullCalendarVDom.render;\nvar createRef = FullCalendarVDom.createRef;\nvar Fragment = FullCalendarVDom.Fragment;\nvar createContext = FullCalendarVDom.createContext;\nvar flushToDom = FullCalendarVDom.flushToDom;\nvar unmountComponentAtNode = FullCalendarVDom.unmountComponentAtNode;\nexport { Component, Fragment, createContext, createElement, createRef, flushToDom, render, unmountComponentAtNode };","/*!\nFullCalendar v5.5.0\nDocs & License: https://fullcalendar.io/\n(c) 2020 Adam Shaw\n*/\nimport './main.css';\nimport { createRef, getStickyHeaderDates, createElement, ViewRoot, SimpleScrollGrid, getStickyFooterScrollbar, DateComponent, renderScrollShim, buildNavLinkData, DayCellContent, Fragment, BaseComponent, createFormatter, setRef, DayCellRoot, WeekNumberRoot, RenderHook, buildSegTimeText, EventRoot, StandardEvent, sortEventSegs, addDays, intersectRanges, RefMap, isPropsEqual, getSegMeta, buildEventRangeKey, BgEvent, renderFill, PositionCache, mapHash, DelayedRunner, applyStyle, memoize, NowTimer, EventApi, Slicer, DayHeader, DaySeriesModel, DayTableModel, addWeeks, diffWeeks, DateProfileGenerator, identity, createPlugin } from '@fullcalendar/common';\nimport { __extends, __assign, __spreadArrays } from 'tslib';\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a Table subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\n\nvar TableView =\n/** @class */\nfunction (_super) {\n  __extends(TableView, _super);\n\n  function TableView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.headerElRef = createRef();\n    return _this;\n  }\n\n  TableView.prototype.renderSimpleLayout = function (headerRowContent, bodyContent) {\n    var _a = this,\n        props = _a.props,\n        context = _a.context;\n\n    var sections = [];\n    var stickyHeaderDates = getStickyHeaderDates(context.options);\n\n    if (headerRowContent) {\n      sections.push({\n        type: 'header',\n        key: 'header',\n        isSticky: stickyHeaderDates,\n        chunk: {\n          elRef: this.headerElRef,\n          tableClassName: 'fc-col-header',\n          rowContent: headerRowContent\n        }\n      });\n    }\n\n    sections.push({\n      type: 'body',\n      key: 'body',\n      liquid: true,\n      chunk: {\n        content: bodyContent\n      }\n    });\n    return createElement(ViewRoot, {\n      viewSpec: context.viewSpec\n    }, function (rootElRef, classNames) {\n      return createElement(\"div\", {\n        ref: rootElRef,\n        className: ['fc-daygrid'].concat(classNames).join(' ')\n      }, createElement(SimpleScrollGrid, {\n        liquid: !props.isHeightAuto && !props.forPrint,\n        cols: []\n        /* TODO: make optional? */\n        ,\n        sections: sections\n      }));\n    });\n  };\n\n  TableView.prototype.renderHScrollLayout = function (headerRowContent, bodyContent, colCnt, dayMinWidth) {\n    var ScrollGrid = this.context.pluginHooks.scrollGridImpl;\n\n    if (!ScrollGrid) {\n      throw new Error('No ScrollGrid implementation');\n    }\n\n    var _a = this,\n        props = _a.props,\n        context = _a.context;\n\n    var stickyHeaderDates = !props.forPrint && getStickyHeaderDates(context.options);\n    var stickyFooterScrollbar = !props.forPrint && getStickyFooterScrollbar(context.options);\n    var sections = [];\n\n    if (headerRowContent) {\n      sections.push({\n        type: 'header',\n        key: 'header',\n        isSticky: stickyHeaderDates,\n        chunks: [{\n          key: 'main',\n          elRef: this.headerElRef,\n          tableClassName: 'fc-col-header',\n          rowContent: headerRowContent\n        }]\n      });\n    }\n\n    sections.push({\n      type: 'body',\n      key: 'body',\n      liquid: true,\n      chunks: [{\n        key: 'main',\n        content: bodyContent\n      }]\n    });\n\n    if (stickyFooterScrollbar) {\n      sections.push({\n        type: 'footer',\n        key: 'footer',\n        isSticky: true,\n        chunks: [{\n          key: 'main',\n          content: renderScrollShim\n        }]\n      });\n    }\n\n    return createElement(ViewRoot, {\n      viewSpec: context.viewSpec\n    }, function (rootElRef, classNames) {\n      return createElement(\"div\", {\n        ref: rootElRef,\n        className: ['fc-daygrid'].concat(classNames).join(' ')\n      }, createElement(ScrollGrid, {\n        liquid: !props.isHeightAuto && !props.forPrint,\n        colGroups: [{\n          cols: [{\n            span: colCnt,\n            minWidth: dayMinWidth\n          }]\n        }],\n        sections: sections\n      }));\n    });\n  };\n\n  return TableView;\n}(DateComponent);\n\nfunction splitSegsByRow(segs, rowCnt) {\n  var byRow = [];\n\n  for (var i = 0; i < rowCnt; i += 1) {\n    byRow[i] = [];\n  }\n\n  for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n    var seg = segs_1[_i];\n    byRow[seg.row].push(seg);\n  }\n\n  return byRow;\n}\n\nfunction splitSegsByFirstCol(segs, colCnt) {\n  var byCol = [];\n\n  for (var i = 0; i < colCnt; i += 1) {\n    byCol[i] = [];\n  }\n\n  for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n    var seg = segs_2[_i];\n    byCol[seg.firstCol].push(seg);\n  }\n\n  return byCol;\n}\n\nfunction splitInteractionByRow(ui, rowCnt) {\n  var byRow = [];\n\n  if (!ui) {\n    for (var i = 0; i < rowCnt; i += 1) {\n      byRow[i] = null;\n    }\n  } else {\n    for (var i = 0; i < rowCnt; i += 1) {\n      byRow[i] = {\n        affectedInstances: ui.affectedInstances,\n        isEvent: ui.isEvent,\n        segs: []\n      };\n    }\n\n    for (var _i = 0, _a = ui.segs; _i < _a.length; _i++) {\n      var seg = _a[_i];\n      byRow[seg.row].segs.push(seg);\n    }\n  }\n\n  return byRow;\n}\n\nvar TableCellTop =\n/** @class */\nfunction (_super) {\n  __extends(TableCellTop, _super);\n\n  function TableCellTop() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TableCellTop.prototype.render = function () {\n    var props = this.props;\n    var navLinkAttrs = this.context.options.navLinks ? {\n      'data-navlink': buildNavLinkData(props.date),\n      tabIndex: 0\n    } : {};\n    return createElement(DayCellContent, {\n      date: props.date,\n      dateProfile: props.dateProfile,\n      todayRange: props.todayRange,\n      showDayNumber: props.showDayNumber,\n      extraHookProps: props.extraHookProps,\n      defaultContent: renderTopInner\n    }, function (innerElRef, innerContent) {\n      return (innerContent || props.forceDayTop) && createElement(\"div\", {\n        className: \"fc-daygrid-day-top\",\n        ref: innerElRef\n      }, createElement(\"a\", __assign({\n        className: \"fc-daygrid-day-number\"\n      }, navLinkAttrs), innerContent || createElement(Fragment, null, \"\\xA0\")));\n    });\n  };\n\n  return TableCellTop;\n}(BaseComponent);\n\nfunction renderTopInner(props) {\n  return props.dayNumberText;\n}\n\nvar DEFAULT_WEEK_NUM_FORMAT = createFormatter({\n  week: 'narrow'\n});\n\nvar TableCell =\n/** @class */\nfunction (_super) {\n  __extends(TableCell, _super);\n\n  function TableCell() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.handleRootEl = function (el) {\n      _this.rootEl = el;\n      setRef(_this.props.elRef, el);\n    };\n\n    _this.handleMoreLinkClick = function (ev) {\n      var props = _this.props;\n\n      if (props.onMoreClick) {\n        var allSegs = props.segsByEachCol;\n        var hiddenSegs = allSegs.filter(function (seg) {\n          return props.segIsHidden[seg.eventRange.instance.instanceId];\n        });\n        props.onMoreClick({\n          date: props.date,\n          allSegs: allSegs,\n          hiddenSegs: hiddenSegs,\n          moreCnt: props.moreCnt,\n          dayEl: _this.rootEl,\n          ev: ev\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  TableCell.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.context,\n        options = _a.options,\n        viewApi = _a.viewApi;\n    var props = this.props;\n    var date = props.date,\n        dateProfile = props.dateProfile;\n    var hookProps = {\n      num: props.moreCnt,\n      text: props.buildMoreLinkText(props.moreCnt),\n      view: viewApi\n    };\n    var navLinkAttrs = options.navLinks ? {\n      'data-navlink': buildNavLinkData(date, 'week'),\n      tabIndex: 0\n    } : {};\n    return createElement(DayCellRoot, {\n      date: date,\n      dateProfile: dateProfile,\n      todayRange: props.todayRange,\n      showDayNumber: props.showDayNumber,\n      extraHookProps: props.extraHookProps,\n      elRef: this.handleRootEl\n    }, function (dayElRef, dayClassNames, rootDataAttrs, isDisabled) {\n      return createElement(\"td\", __assign({\n        ref: dayElRef,\n        className: ['fc-daygrid-day'].concat(dayClassNames, props.extraClassNames || []).join(' ')\n      }, rootDataAttrs, props.extraDataAttrs), createElement(\"div\", {\n        className: \"fc-daygrid-day-frame fc-scrollgrid-sync-inner\",\n        ref: props.innerElRef\n        /* different from hook system! RENAME */\n\n      }, props.showWeekNumber && createElement(WeekNumberRoot, {\n        date: date,\n        defaultFormat: DEFAULT_WEEK_NUM_FORMAT\n      }, function (weekElRef, weekClassNames, innerElRef, innerContent) {\n        return createElement(\"a\", __assign({\n          ref: weekElRef,\n          className: ['fc-daygrid-week-number'].concat(weekClassNames).join(' ')\n        }, navLinkAttrs), innerContent);\n      }), !isDisabled && createElement(TableCellTop, {\n        date: date,\n        dateProfile: dateProfile,\n        showDayNumber: props.showDayNumber,\n        forceDayTop: props.forceDayTop,\n        todayRange: props.todayRange,\n        extraHookProps: props.extraHookProps\n      }), createElement(\"div\", {\n        className: \"fc-daygrid-day-events\",\n        ref: props.fgContentElRef,\n        style: {\n          paddingBottom: props.fgPaddingBottom\n        }\n      }, props.fgContent, Boolean(props.moreCnt) && createElement(\"div\", {\n        className: \"fc-daygrid-day-bottom\",\n        style: {\n          marginTop: props.moreMarginTop\n        }\n      }, createElement(RenderHook, {\n        hookProps: hookProps,\n        classNames: options.moreLinkClassNames,\n        content: options.moreLinkContent,\n        defaultContent: renderMoreLinkInner,\n        didMount: options.moreLinkDidMount,\n        willUnmount: options.moreLinkWillUnmount\n      }, function (rootElRef, classNames, innerElRef, innerContent) {\n        return createElement(\"a\", {\n          ref: rootElRef,\n          className: ['fc-daygrid-more-link'].concat(classNames).join(' '),\n          onClick: _this.handleMoreLinkClick\n        }, innerContent);\n      }))), createElement(\"div\", {\n        className: \"fc-daygrid-day-bg\"\n      }, props.bgContent)));\n    });\n  };\n\n  return TableCell;\n}(DateComponent);\n\nTableCell.addPropsEquality({\n  onMoreClick: true\n});\n\nfunction renderMoreLinkInner(props) {\n  return props.text;\n}\n\nvar DEFAULT_TABLE_EVENT_TIME_FORMAT = createFormatter({\n  hour: 'numeric',\n  minute: '2-digit',\n  omitZeroMinute: true,\n  meridiem: 'narrow'\n});\n\nfunction hasListItemDisplay(seg) {\n  var display = seg.eventRange.ui.display;\n  return display === 'list-item' || display === 'auto' && !seg.eventRange.def.allDay && seg.firstCol === seg.lastCol && // can't be multi-day\n  seg.isStart && // \"\n  seg.isEnd // \"\n  ;\n}\n\nvar TableListItemEvent =\n/** @class */\nfunction (_super) {\n  __extends(TableListItemEvent, _super);\n\n  function TableListItemEvent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TableListItemEvent.prototype.render = function () {\n    var _a = this,\n        props = _a.props,\n        context = _a.context;\n\n    var timeFormat = context.options.eventTimeFormat || DEFAULT_TABLE_EVENT_TIME_FORMAT;\n    var timeText = buildSegTimeText(props.seg, timeFormat, context, true, props.defaultDisplayEventEnd);\n    return createElement(EventRoot, {\n      seg: props.seg,\n      timeText: timeText,\n      defaultContent: renderInnerContent,\n      isDragging: props.isDragging,\n      isResizing: false,\n      isDateSelecting: false,\n      isSelected: props.isSelected,\n      isPast: props.isPast,\n      isFuture: props.isFuture,\n      isToday: props.isToday\n    }, function (rootElRef, classNames, innerElRef, innerContent) {\n      return (// we don't use styles!\n        createElement(\"a\", __assign({\n          className: ['fc-daygrid-event', 'fc-daygrid-dot-event'].concat(classNames).join(' '),\n          ref: rootElRef\n        }, getSegAnchorAttrs(props.seg)), innerContent)\n      );\n    });\n  };\n\n  return TableListItemEvent;\n}(BaseComponent);\n\nfunction renderInnerContent(innerProps) {\n  return createElement(Fragment, null, createElement(\"div\", {\n    className: \"fc-daygrid-event-dot\",\n    style: {\n      borderColor: innerProps.borderColor || innerProps.backgroundColor\n    }\n  }), innerProps.timeText && createElement(\"div\", {\n    className: \"fc-event-time\"\n  }, innerProps.timeText), createElement(\"div\", {\n    className: \"fc-event-title\"\n  }, innerProps.event.title || createElement(Fragment, null, \"\\xA0\")));\n}\n\nfunction getSegAnchorAttrs(seg) {\n  var url = seg.eventRange.def.url;\n  return url ? {\n    href: url\n  } : {};\n}\n\nvar TableBlockEvent =\n/** @class */\nfunction (_super) {\n  __extends(TableBlockEvent, _super);\n\n  function TableBlockEvent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TableBlockEvent.prototype.render = function () {\n    var props = this.props;\n    return createElement(StandardEvent, __assign({}, props, {\n      extraClassNames: ['fc-daygrid-event', 'fc-daygrid-block-event', 'fc-h-event'],\n      defaultTimeFormat: DEFAULT_TABLE_EVENT_TIME_FORMAT,\n      defaultDisplayEventEnd: props.defaultDisplayEventEnd,\n      disableResizing: !props.seg.eventRange.def.allDay\n    }));\n  };\n\n  return TableBlockEvent;\n}(BaseComponent);\n\nfunction computeFgSegPlacement( // for one row. TODO: print mode?\ncellModels, segs, dayMaxEvents, dayMaxEventRows, eventHeights, maxContentHeight, colCnt, eventOrderSpecs) {\n  var colPlacements = []; // if event spans multiple cols, its present in each col\n\n  var moreCnts = []; // by-col\n\n  var segIsHidden = {};\n  var segTops = {}; // always populated for each seg\n\n  var segMarginTops = {}; // simetimes populated for each seg\n\n  var moreTops = {};\n  var paddingBottoms = {}; // for each cell's inner-wrapper div\n\n  for (var i = 0; i < colCnt; i += 1) {\n    colPlacements.push([]);\n    moreCnts.push(0);\n  }\n\n  segs = sortEventSegs(segs, eventOrderSpecs);\n\n  for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n    var seg = segs_1[_i];\n    var instanceId = seg.eventRange.instance.instanceId;\n    var eventHeight = eventHeights[instanceId + ':' + seg.firstCol];\n    placeSeg(seg, eventHeight || 0); // will keep colPlacements sorted by top\n  }\n\n  if (dayMaxEvents === true || dayMaxEventRows === true) {\n    limitByMaxHeight(moreCnts, segIsHidden, colPlacements, maxContentHeight); // populates moreCnts/segIsHidden\n  } else if (typeof dayMaxEvents === 'number') {\n    limitByMaxEvents(moreCnts, segIsHidden, colPlacements, dayMaxEvents); // populates moreCnts/segIsHidden\n  } else if (typeof dayMaxEventRows === 'number') {\n    limitByMaxRows(moreCnts, segIsHidden, colPlacements, dayMaxEventRows); // populates moreCnts/segIsHidden\n  } // computes segTops/segMarginTops/moreTops/paddingBottoms\n\n\n  for (var col = 0; col < colCnt; col += 1) {\n    var placements = colPlacements[col];\n    var currentNonAbsBottom = 0;\n    var currentAbsHeight = 0;\n\n    for (var _a = 0, placements_1 = placements; _a < placements_1.length; _a++) {\n      var placement = placements_1[_a];\n      var seg = placement.seg;\n\n      if (!segIsHidden[seg.eventRange.instance.instanceId]) {\n        segTops[seg.eventRange.instance.instanceId] = placement.top; // from top of container\n\n        if (seg.firstCol === seg.lastCol && seg.isStart && seg.isEnd) {\n          // TODO: simpler way? NOT DRY\n          segMarginTops[seg.eventRange.instance.instanceId] = placement.top - currentNonAbsBottom; // from previous seg bottom\n\n          currentAbsHeight = 0;\n          currentNonAbsBottom = placement.bottom;\n        } else {\n          // multi-col event, abs positioned\n          currentAbsHeight = placement.bottom - currentNonAbsBottom;\n        }\n      }\n    }\n\n    if (currentAbsHeight) {\n      if (moreCnts[col]) {\n        moreTops[col] = currentAbsHeight;\n      } else {\n        paddingBottoms[col] = currentAbsHeight;\n      }\n    }\n  }\n\n  function placeSeg(seg, segHeight) {\n    if (!tryPlaceSegAt(seg, segHeight, 0)) {\n      for (var col = seg.firstCol; col <= seg.lastCol; col += 1) {\n        for (var _i = 0, _a = colPlacements[col]; _i < _a.length; _i++) {\n          // will repeat multi-day segs!!!!!!! bad!!!!!!\n          var placement = _a[_i];\n\n          if (tryPlaceSegAt(seg, segHeight, placement.bottom)) {\n            return;\n          }\n        }\n      }\n    }\n  }\n\n  function tryPlaceSegAt(seg, segHeight, top) {\n    if (canPlaceSegAt(seg, segHeight, top)) {\n      for (var col = seg.firstCol; col <= seg.lastCol; col += 1) {\n        var placements = colPlacements[col];\n        var insertionIndex = 0;\n\n        while (insertionIndex < placements.length && top >= placements[insertionIndex].top) {\n          insertionIndex += 1;\n        }\n\n        placements.splice(insertionIndex, 0, {\n          seg: seg,\n          top: top,\n          bottom: top + segHeight\n        });\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  function canPlaceSegAt(seg, segHeight, top) {\n    for (var col = seg.firstCol; col <= seg.lastCol; col += 1) {\n      for (var _i = 0, _a = colPlacements[col]; _i < _a.length; _i++) {\n        var placement = _a[_i];\n\n        if (top < placement.bottom && top + segHeight > placement.top) {\n          // collide?\n          return false;\n        }\n      }\n    }\n\n    return true;\n  } // what does this do!?\n\n\n  for (var instanceIdAndFirstCol in eventHeights) {\n    if (!eventHeights[instanceIdAndFirstCol]) {\n      segIsHidden[instanceIdAndFirstCol.split(':')[0]] = true;\n    }\n  }\n\n  var segsByFirstCol = colPlacements.map(extractFirstColSegs); // operates on the sorted cols\n\n  var segsByEachCol = colPlacements.map(function (placements, col) {\n    var segsForCols = extractAllColSegs(placements);\n    segsForCols = resliceDaySegs(segsForCols, cellModels[col].date, col);\n    return segsForCols;\n  });\n  return {\n    segsByFirstCol: segsByFirstCol,\n    segsByEachCol: segsByEachCol,\n    segIsHidden: segIsHidden,\n    segTops: segTops,\n    segMarginTops: segMarginTops,\n    moreCnts: moreCnts,\n    moreTops: moreTops,\n    paddingBottoms: paddingBottoms\n  };\n}\n\nfunction extractFirstColSegs(oneColPlacements, col) {\n  var segs = [];\n\n  for (var _i = 0, oneColPlacements_1 = oneColPlacements; _i < oneColPlacements_1.length; _i++) {\n    var placement = oneColPlacements_1[_i];\n\n    if (placement.seg.firstCol === col) {\n      segs.push(placement.seg);\n    }\n  }\n\n  return segs;\n}\n\nfunction extractAllColSegs(oneColPlacements) {\n  var segs = [];\n\n  for (var _i = 0, oneColPlacements_2 = oneColPlacements; _i < oneColPlacements_2.length; _i++) {\n    var placement = oneColPlacements_2[_i];\n    segs.push(placement.seg);\n  }\n\n  return segs;\n}\n\nfunction limitByMaxHeight(hiddenCnts, segIsHidden, colPlacements, maxContentHeight) {\n  limitEvents(hiddenCnts, segIsHidden, colPlacements, true, function (placement) {\n    return placement.bottom <= maxContentHeight;\n  });\n}\n\nfunction limitByMaxEvents(hiddenCnts, segIsHidden, colPlacements, dayMaxEvents) {\n  limitEvents(hiddenCnts, segIsHidden, colPlacements, false, function (placement, levelIndex) {\n    return levelIndex < dayMaxEvents;\n  });\n}\n\nfunction limitByMaxRows(hiddenCnts, segIsHidden, colPlacements, dayMaxEventRows) {\n  limitEvents(hiddenCnts, segIsHidden, colPlacements, true, function (placement, levelIndex) {\n    return levelIndex < dayMaxEventRows;\n  });\n}\n/*\npopulates the given hiddenCnts/segIsHidden, which are supplied empty.\nTODO: return them instead\n*/\n\n\nfunction limitEvents(hiddenCnts, segIsHidden, colPlacements, _moreLinkConsumesLevel, isPlacementInBounds) {\n  var colCnt = hiddenCnts.length;\n  var segIsVisible = {}; // TODO: instead, use segIsHidden with true/false?\n\n  var visibleColPlacements = []; // will mirror colPlacements\n\n  for (var col = 0; col < colCnt; col += 1) {\n    visibleColPlacements.push([]);\n  }\n\n  for (var col = 0; col < colCnt; col += 1) {\n    var placements = colPlacements[col];\n    var level = 0;\n\n    for (var _i = 0, placements_2 = placements; _i < placements_2.length; _i++) {\n      var placement = placements_2[_i];\n\n      if (isPlacementInBounds(placement, level)) {\n        recordVisible(placement);\n      } else {\n        recordHidden(placement, level, _moreLinkConsumesLevel);\n      } // only considered a level if the seg had height\n\n\n      if (placement.top !== placement.bottom) {\n        level += 1;\n      }\n    }\n  }\n\n  function recordVisible(placement) {\n    var seg = placement.seg;\n    var instanceId = seg.eventRange.instance.instanceId;\n\n    if (!segIsVisible[instanceId]) {\n      segIsVisible[instanceId] = true;\n\n      for (var col = seg.firstCol; col <= seg.lastCol; col += 1) {\n        var destPlacements = visibleColPlacements[col];\n        var newPosition = 0; // insert while keeping top sorted in each column\n\n        while (newPosition < destPlacements.length && placement.top >= destPlacements[newPosition].top) {\n          newPosition += 1;\n        }\n\n        destPlacements.splice(newPosition, 0, placement);\n      }\n    }\n  }\n\n  function recordHidden(placement, currentLevel, moreLinkConsumesLevel) {\n    var seg = placement.seg;\n    var instanceId = seg.eventRange.instance.instanceId;\n\n    if (!segIsHidden[instanceId]) {\n      segIsHidden[instanceId] = true;\n\n      for (var col = seg.firstCol; col <= seg.lastCol; col += 1) {\n        hiddenCnts[col] += 1;\n        var hiddenCnt = hiddenCnts[col];\n\n        if (moreLinkConsumesLevel && hiddenCnt === 1 && currentLevel > 0) {\n          var doomedLevel = currentLevel - 1;\n\n          while (visibleColPlacements[col].length > doomedLevel) {\n            recordHidden(visibleColPlacements[col].pop(), // removes\n            visibleColPlacements[col].length, // will execute after the pop. will be the index of the removed placement\n            false);\n          }\n        }\n      }\n    }\n  }\n} // Given the events within an array of segment objects, reslice them to be in a single day\n\n\nfunction resliceDaySegs(segs, dayDate, colIndex) {\n  var dayStart = dayDate;\n  var dayEnd = addDays(dayStart, 1);\n  var dayRange = {\n    start: dayStart,\n    end: dayEnd\n  };\n  var newSegs = [];\n\n  for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n    var seg = segs_2[_i];\n    var eventRange = seg.eventRange;\n    var origRange = eventRange.range;\n    var slicedRange = intersectRanges(origRange, dayRange);\n\n    if (slicedRange) {\n      newSegs.push(__assign(__assign({}, seg), {\n        firstCol: colIndex,\n        lastCol: colIndex,\n        eventRange: {\n          def: eventRange.def,\n          ui: __assign(__assign({}, eventRange.ui), {\n            durationEditable: false\n          }),\n          instance: eventRange.instance,\n          range: slicedRange\n        },\n        isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(),\n        isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf()\n      }));\n    }\n  }\n\n  return newSegs;\n}\n\nvar TableRow =\n/** @class */\nfunction (_super) {\n  __extends(TableRow, _super);\n\n  function TableRow() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.cellElRefs = new RefMap(); // the <td>\n\n    _this.frameElRefs = new RefMap(); // the fc-daygrid-day-frame\n\n    _this.fgElRefs = new RefMap(); // the fc-daygrid-day-events\n\n    _this.segHarnessRefs = new RefMap(); // indexed by \"instanceId:firstCol\"\n\n    _this.rootElRef = createRef();\n    _this.state = {\n      framePositions: null,\n      maxContentHeight: null,\n      segHeights: {}\n    };\n    return _this;\n  }\n\n  TableRow.prototype.render = function () {\n    var _this = this;\n\n    var _a = this,\n        props = _a.props,\n        state = _a.state,\n        context = _a.context;\n\n    var colCnt = props.cells.length;\n    var businessHoursByCol = splitSegsByFirstCol(props.businessHourSegs, colCnt);\n    var bgEventSegsByCol = splitSegsByFirstCol(props.bgEventSegs, colCnt);\n    var highlightSegsByCol = splitSegsByFirstCol(this.getHighlightSegs(), colCnt);\n    var mirrorSegsByCol = splitSegsByFirstCol(this.getMirrorSegs(), colCnt);\n\n    var _b = computeFgSegPlacement(props.cells, props.fgEventSegs, props.dayMaxEvents, props.dayMaxEventRows, state.segHeights, state.maxContentHeight, colCnt, context.options.eventOrder),\n        paddingBottoms = _b.paddingBottoms,\n        segsByFirstCol = _b.segsByFirstCol,\n        segsByEachCol = _b.segsByEachCol,\n        segIsHidden = _b.segIsHidden,\n        segTops = _b.segTops,\n        segMarginTops = _b.segMarginTops,\n        moreCnts = _b.moreCnts,\n        moreTops = _b.moreTops;\n\n    var selectedInstanceHash = // TODO: messy way to compute this\n    props.eventDrag && props.eventDrag.affectedInstances || props.eventResize && props.eventResize.affectedInstances || {};\n    return createElement(\"tr\", {\n      ref: this.rootElRef\n    }, props.renderIntro && props.renderIntro(), props.cells.map(function (cell, col) {\n      var normalFgNodes = _this.renderFgSegs(segsByFirstCol[col], segIsHidden, segTops, segMarginTops, selectedInstanceHash, props.todayRange);\n\n      var mirrorFgNodes = _this.renderFgSegs(mirrorSegsByCol[col], {}, segTops, // use same tops as real rendering\n      {}, {}, props.todayRange, Boolean(props.eventDrag), Boolean(props.eventResize), false);\n\n      return createElement(TableCell, {\n        key: cell.key,\n        elRef: _this.cellElRefs.createRef(cell.key),\n        innerElRef: _this.frameElRefs.createRef(cell.key)\n        /* FF <td> problem, but okay to use for left/right. TODO: rename prop */\n        ,\n        dateProfile: props.dateProfile,\n        date: cell.date,\n        showDayNumber: props.showDayNumbers,\n        showWeekNumber: props.showWeekNumbers && col === 0,\n        forceDayTop: props.showWeekNumbers\n        /* even displaying weeknum for row, not necessarily day */\n        ,\n        todayRange: props.todayRange,\n        extraHookProps: cell.extraHookProps,\n        extraDataAttrs: cell.extraDataAttrs,\n        extraClassNames: cell.extraClassNames,\n        moreCnt: moreCnts[col],\n        buildMoreLinkText: props.buildMoreLinkText,\n        onMoreClick: function onMoreClick(arg) {\n          props.onMoreClick(__assign(__assign({}, arg), {\n            fromCol: col\n          }));\n        },\n        segIsHidden: segIsHidden,\n        moreMarginTop: moreTops[col]\n        /* rename */\n        ,\n        segsByEachCol: segsByEachCol[col],\n        fgPaddingBottom: paddingBottoms[col],\n        fgContentElRef: _this.fgElRefs.createRef(cell.key),\n        fgContent: // Fragment scopes the keys\n        createElement(Fragment, null, createElement(Fragment, null, normalFgNodes), createElement(Fragment, null, mirrorFgNodes)),\n        bgContent: // Fragment scopes the keys\n        createElement(Fragment, null, _this.renderFillSegs(highlightSegsByCol[col], 'highlight'), _this.renderFillSegs(businessHoursByCol[col], 'non-business'), _this.renderFillSegs(bgEventSegsByCol[col], 'bg-event'))\n      });\n    }));\n  };\n\n  TableRow.prototype.componentDidMount = function () {\n    this.updateSizing(true);\n  };\n\n  TableRow.prototype.componentDidUpdate = function (prevProps, prevState) {\n    var currentProps = this.props;\n    this.updateSizing(!isPropsEqual(prevProps, currentProps));\n  };\n\n  TableRow.prototype.getHighlightSegs = function () {\n    var props = this.props;\n\n    if (props.eventDrag && props.eventDrag.segs.length) {\n      // messy check\n      return props.eventDrag.segs;\n    }\n\n    if (props.eventResize && props.eventResize.segs.length) {\n      // messy check\n      return props.eventResize.segs;\n    }\n\n    return props.dateSelectionSegs;\n  };\n\n  TableRow.prototype.getMirrorSegs = function () {\n    var props = this.props;\n\n    if (props.eventResize && props.eventResize.segs.length) {\n      // messy check\n      return props.eventResize.segs;\n    }\n\n    return [];\n  };\n\n  TableRow.prototype.renderFgSegs = function (segs, segIsHidden, // does NOT mean display:hidden\n  segTops, segMarginTops, selectedInstanceHash, todayRange, isDragging, isResizing, isDateSelecting) {\n    var context = this.context;\n    var eventSelection = this.props.eventSelection;\n    var framePositions = this.state.framePositions;\n    var defaultDisplayEventEnd = this.props.cells.length === 1; // colCnt === 1\n\n    var nodes = [];\n\n    if (framePositions) {\n      for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        var instanceId = seg.eventRange.instance.instanceId;\n        var isMirror = isDragging || isResizing || isDateSelecting;\n        var isSelected = selectedInstanceHash[instanceId];\n        var isInvisible = segIsHidden[instanceId] || isSelected; // TODO: simpler way? NOT DRY\n\n        var isAbsolute = segIsHidden[instanceId] || isMirror || seg.firstCol !== seg.lastCol || !seg.isStart || !seg.isEnd;\n        var marginTop = void 0;\n        var top_1 = void 0;\n        var left = void 0;\n        var right = void 0;\n\n        if (isAbsolute) {\n          top_1 = segTops[instanceId];\n\n          if (context.isRtl) {\n            right = 0;\n            left = framePositions.lefts[seg.lastCol] - framePositions.lefts[seg.firstCol];\n          } else {\n            left = 0;\n            right = framePositions.rights[seg.firstCol] - framePositions.rights[seg.lastCol];\n          }\n        } else {\n          marginTop = segMarginTops[instanceId];\n        }\n        /*\n        known bug: events that are force to be list-item but span multiple days still take up space in later columns\n        */\n\n\n        nodes.push(createElement(\"div\", {\n          className: 'fc-daygrid-event-harness' + (isAbsolute ? ' fc-daygrid-event-harness-abs' : ''),\n          key: instanceId,\n          // in print mode when in mult cols, could collide\n          ref: isMirror ? null : this.segHarnessRefs.createRef(instanceId + ':' + seg.firstCol),\n          style: {\n            visibility: isInvisible ? 'hidden' : '',\n            marginTop: marginTop || '',\n            top: top_1 || '',\n            left: left || '',\n            right: right || ''\n          }\n        }, hasListItemDisplay(seg) ? createElement(TableListItemEvent, __assign({\n          seg: seg,\n          isDragging: isDragging,\n          isSelected: instanceId === eventSelection,\n          defaultDisplayEventEnd: defaultDisplayEventEnd\n        }, getSegMeta(seg, todayRange))) : createElement(TableBlockEvent, __assign({\n          seg: seg,\n          isDragging: isDragging,\n          isResizing: isResizing,\n          isDateSelecting: isDateSelecting,\n          isSelected: instanceId === eventSelection,\n          defaultDisplayEventEnd: defaultDisplayEventEnd\n        }, getSegMeta(seg, todayRange)))));\n      }\n    }\n\n    return nodes;\n  };\n\n  TableRow.prototype.renderFillSegs = function (segs, fillType) {\n    var isRtl = this.context.isRtl;\n    var todayRange = this.props.todayRange;\n    var framePositions = this.state.framePositions;\n    var nodes = [];\n\n    if (framePositions) {\n      for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n        var seg = segs_2[_i];\n        var leftRightCss = isRtl ? {\n          right: 0,\n          left: framePositions.lefts[seg.lastCol] - framePositions.lefts[seg.firstCol]\n        } : {\n          left: 0,\n          right: framePositions.rights[seg.firstCol] - framePositions.rights[seg.lastCol]\n        };\n        nodes.push(createElement(\"div\", {\n          key: buildEventRangeKey(seg.eventRange),\n          className: \"fc-daygrid-bg-harness\",\n          style: leftRightCss\n        }, fillType === 'bg-event' ? createElement(BgEvent, __assign({\n          seg: seg\n        }, getSegMeta(seg, todayRange))) : renderFill(fillType)));\n      }\n    }\n\n    return createElement.apply(void 0, __spreadArrays([Fragment, {}], nodes));\n  };\n\n  TableRow.prototype.updateSizing = function (isExternalSizingChange) {\n    var _a = this,\n        props = _a.props,\n        frameElRefs = _a.frameElRefs;\n\n    if (props.clientWidth !== null) {\n      // positioning ready?\n      if (isExternalSizingChange) {\n        var frameEls = props.cells.map(function (cell) {\n          return frameElRefs.currentMap[cell.key];\n        });\n\n        if (frameEls.length) {\n          var originEl = this.rootElRef.current;\n          this.setState({\n            framePositions: new PositionCache(originEl, frameEls, true, // isHorizontal\n            false)\n          });\n        }\n      }\n\n      var limitByContentHeight = props.dayMaxEvents === true || props.dayMaxEventRows === true;\n      this.setState({\n        segHeights: this.computeSegHeights(),\n        maxContentHeight: limitByContentHeight ? this.computeMaxContentHeight() : null\n      });\n    }\n  };\n\n  TableRow.prototype.computeSegHeights = function () {\n    return mapHash(this.segHarnessRefs.currentMap, function (eventHarnessEl) {\n      return eventHarnessEl.getBoundingClientRect().height;\n    });\n  };\n\n  TableRow.prototype.computeMaxContentHeight = function () {\n    var firstKey = this.props.cells[0].key;\n    var cellEl = this.cellElRefs.currentMap[firstKey];\n    var fcContainerEl = this.fgElRefs.currentMap[firstKey];\n    return cellEl.getBoundingClientRect().bottom - fcContainerEl.getBoundingClientRect().top;\n  };\n\n  TableRow.prototype.getCellEls = function () {\n    var elMap = this.cellElRefs.currentMap;\n    return this.props.cells.map(function (cell) {\n      return elMap[cell.key];\n    });\n  };\n\n  return TableRow;\n}(DateComponent);\n\nTableRow.addPropsEquality({\n  onMoreClick: true\n});\nTableRow.addStateEquality({\n  segHeights: isPropsEqual\n});\nvar PADDING_FROM_VIEWPORT = 10;\nvar SCROLL_DEBOUNCE = 10;\n\nvar Popover =\n/** @class */\nfunction (_super) {\n  __extends(Popover, _super);\n\n  function Popover() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.repositioner = new DelayedRunner(_this.updateSize.bind(_this));\n\n    _this.handleRootEl = function (el) {\n      _this.rootEl = el;\n\n      if (_this.props.elRef) {\n        setRef(_this.props.elRef, el);\n      }\n    }; // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n\n\n    _this.handleDocumentMousedown = function (ev) {\n      var onClose = _this.props.onClose; // only hide the popover if the click happened outside the popover\n\n      if (onClose && !_this.rootEl.contains(ev.target)) {\n        onClose();\n      }\n    };\n\n    _this.handleDocumentScroll = function () {\n      _this.repositioner.request(SCROLL_DEBOUNCE);\n    };\n\n    _this.handleCloseClick = function () {\n      var onClose = _this.props.onClose;\n\n      if (onClose) {\n        onClose();\n      }\n    };\n\n    return _this;\n  }\n\n  Popover.prototype.render = function () {\n    var theme = this.context.theme;\n    var props = this.props;\n    var classNames = ['fc-popover', theme.getClass('popover')].concat(props.extraClassNames || []);\n    return createElement(\"div\", __assign({\n      className: classNames.join(' ')\n    }, props.extraAttrs, {\n      ref: this.handleRootEl\n    }), createElement(\"div\", {\n      className: 'fc-popover-header ' + theme.getClass('popoverHeader')\n    }, createElement(\"span\", {\n      className: \"fc-popover-title\"\n    }, props.title), createElement(\"span\", {\n      className: 'fc-popover-close ' + theme.getIconClass('close'),\n      onClick: this.handleCloseClick\n    })), createElement(\"div\", {\n      className: 'fc-popover-body ' + theme.getClass('popoverContent')\n    }, props.children));\n  };\n\n  Popover.prototype.componentDidMount = function () {\n    document.addEventListener('mousedown', this.handleDocumentMousedown);\n    document.addEventListener('scroll', this.handleDocumentScroll);\n    this.updateSize();\n  };\n\n  Popover.prototype.componentWillUnmount = function () {\n    document.removeEventListener('mousedown', this.handleDocumentMousedown);\n    document.removeEventListener('scroll', this.handleDocumentScroll);\n  }; // TODO: adjust on window resize\n\n  /*\n  NOTE: the popover is position:fixed, so coordinates are relative to the viewport\n  NOTE: the PARENT calls this as well, on window resize. we would have wanted to use the repositioner,\n        but need to ensure that all other components have updated size first (for alignmentEl)\n  */\n\n\n  Popover.prototype.updateSize = function () {\n    var _a = this.props,\n        alignmentEl = _a.alignmentEl,\n        topAlignmentEl = _a.topAlignmentEl;\n    var rootEl = this.rootEl;\n\n    if (!rootEl) {\n      return; // not sure why this was null, but we shouldn't let external components call updateSize() anyway\n    }\n\n    var dims = rootEl.getBoundingClientRect(); // only used for width,height\n\n    var alignment = alignmentEl.getBoundingClientRect();\n    var top = topAlignmentEl ? topAlignmentEl.getBoundingClientRect().top : alignment.top;\n    top = Math.min(top, window.innerHeight - dims.height - PADDING_FROM_VIEWPORT);\n    top = Math.max(top, PADDING_FROM_VIEWPORT);\n    var left;\n\n    if (this.context.isRtl) {\n      left = alignment.right - dims.width;\n    } else {\n      left = alignment.left;\n    }\n\n    left = Math.min(left, window.innerWidth - dims.width - PADDING_FROM_VIEWPORT);\n    left = Math.max(left, PADDING_FROM_VIEWPORT);\n    applyStyle(rootEl, {\n      top: top,\n      left: left\n    });\n  };\n\n  return Popover;\n}(BaseComponent);\n\nvar MorePopover =\n/** @class */\nfunction (_super) {\n  __extends(MorePopover, _super);\n\n  function MorePopover() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.rootElRef = createRef();\n    return _this;\n  }\n\n  MorePopover.prototype.render = function () {\n    var _a = this.context,\n        options = _a.options,\n        dateEnv = _a.dateEnv;\n    var props = this.props;\n    var date = props.date,\n        hiddenInstances = props.hiddenInstances,\n        todayRange = props.todayRange,\n        dateProfile = props.dateProfile,\n        selectedInstanceId = props.selectedInstanceId;\n    var title = dateEnv.format(date, options.dayPopoverFormat);\n    return createElement(DayCellRoot, {\n      date: date,\n      dateProfile: dateProfile,\n      todayRange: todayRange,\n      elRef: this.rootElRef\n    }, function (rootElRef, dayClassNames, dataAttrs) {\n      return createElement(Popover, {\n        elRef: rootElRef,\n        title: title,\n        extraClassNames: ['fc-more-popover'].concat(dayClassNames),\n        extraAttrs: dataAttrs,\n        onClose: props.onCloseClick,\n        alignmentEl: props.alignmentEl,\n        topAlignmentEl: props.topAlignmentEl\n      }, createElement(DayCellContent, {\n        date: date,\n        dateProfile: dateProfile,\n        todayRange: todayRange\n      }, function (innerElRef, innerContent) {\n        return innerContent && createElement(\"div\", {\n          className: \"fc-more-popover-misc\",\n          ref: innerElRef\n        }, innerContent);\n      }), props.segs.map(function (seg) {\n        var instanceId = seg.eventRange.instance.instanceId;\n        return createElement(\"div\", {\n          className: \"fc-daygrid-event-harness\",\n          key: instanceId,\n          style: {\n            visibility: hiddenInstances[instanceId] ? 'hidden' : ''\n          }\n        }, hasListItemDisplay(seg) ? createElement(TableListItemEvent, __assign({\n          seg: seg,\n          isDragging: false,\n          isSelected: instanceId === selectedInstanceId,\n          defaultDisplayEventEnd: false\n        }, getSegMeta(seg, todayRange))) : createElement(TableBlockEvent, __assign({\n          seg: seg,\n          isDragging: false,\n          isResizing: false,\n          isDateSelecting: false,\n          isSelected: instanceId === selectedInstanceId,\n          defaultDisplayEventEnd: false\n        }, getSegMeta(seg, todayRange))));\n      }));\n    });\n  };\n\n  MorePopover.prototype.positionToHit = function (positionLeft, positionTop, originEl) {\n    var rootEl = this.rootElRef.current;\n\n    if (!originEl || !rootEl) {\n      // why?\n      return null;\n    }\n\n    var originRect = originEl.getBoundingClientRect();\n    var elRect = rootEl.getBoundingClientRect();\n    var newOriginLeft = elRect.left - originRect.left;\n    var newOriginTop = elRect.top - originRect.top;\n    var localLeft = positionLeft - newOriginLeft;\n    var localTop = positionTop - newOriginTop;\n    var date = this.props.date;\n\n    if ( // ugly way to detect intersection\n    localLeft >= 0 && localLeft < elRect.width && localTop >= 0 && localTop < elRect.height) {\n      return {\n        dateSpan: {\n          allDay: true,\n          range: {\n            start: date,\n            end: addDays(date, 1)\n          }\n        },\n        dayEl: rootEl,\n        relativeRect: {\n          left: newOriginLeft,\n          top: newOriginTop,\n          right: elRect.width,\n          bottom: elRect.height\n        },\n        layer: 1\n      };\n    }\n\n    return null;\n  };\n\n  return MorePopover;\n}(DateComponent);\n\nvar Table =\n/** @class */\nfunction (_super) {\n  __extends(Table, _super);\n\n  function Table() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.splitBusinessHourSegs = memoize(splitSegsByRow);\n    _this.splitBgEventSegs = memoize(splitSegsByRow);\n    _this.splitFgEventSegs = memoize(splitSegsByRow);\n    _this.splitDateSelectionSegs = memoize(splitSegsByRow);\n    _this.splitEventDrag = memoize(splitInteractionByRow);\n    _this.splitEventResize = memoize(splitInteractionByRow);\n    _this.buildBuildMoreLinkText = memoize(buildBuildMoreLinkText);\n    _this.morePopoverRef = createRef();\n    _this.rowRefs = new RefMap();\n    _this.state = {\n      morePopoverState: null\n    };\n\n    _this.handleRootEl = function (rootEl) {\n      _this.rootEl = rootEl;\n      setRef(_this.props.elRef, rootEl);\n    }; // TODO: bad names \"more link click\" versus \"more click\"\n\n\n    _this.handleMoreLinkClick = function (arg) {\n      var context = _this.context;\n      var dateEnv = context.dateEnv;\n      var clickOption = context.options.moreLinkClick;\n\n      function segForPublic(seg) {\n        var _a = seg.eventRange,\n            def = _a.def,\n            instance = _a.instance,\n            range = _a.range;\n        return {\n          event: new EventApi(context, def, instance),\n          start: dateEnv.toDate(range.start),\n          end: dateEnv.toDate(range.end),\n          isStart: seg.isStart,\n          isEnd: seg.isEnd\n        };\n      }\n\n      if (typeof clickOption === 'function') {\n        clickOption = clickOption({\n          date: dateEnv.toDate(arg.date),\n          allDay: true,\n          allSegs: arg.allSegs.map(segForPublic),\n          hiddenSegs: arg.hiddenSegs.map(segForPublic),\n          jsEvent: arg.ev,\n          view: context.viewApi\n        }); // hack to handle void\n      }\n\n      if (!clickOption || clickOption === 'popover') {\n        _this.setState({\n          morePopoverState: __assign(__assign({}, arg), {\n            currentFgEventSegs: _this.props.fgEventSegs,\n            fromRow: arg.fromRow,\n            fromCol: arg.fromCol\n          })\n        });\n      } else if (typeof clickOption === 'string') {\n        // a view name\n        context.calendarApi.zoomTo(arg.date, clickOption);\n      }\n    };\n\n    _this.handleMorePopoverClose = function () {\n      _this.setState({\n        morePopoverState: null\n      });\n    };\n\n    return _this;\n  }\n\n  Table.prototype.render = function () {\n    var _this = this;\n\n    var props = this.props;\n    var dateProfile = props.dateProfile,\n        dayMaxEventRows = props.dayMaxEventRows,\n        dayMaxEvents = props.dayMaxEvents,\n        expandRows = props.expandRows;\n    var morePopoverState = this.state.morePopoverState;\n    var rowCnt = props.cells.length;\n    var businessHourSegsByRow = this.splitBusinessHourSegs(props.businessHourSegs, rowCnt);\n    var bgEventSegsByRow = this.splitBgEventSegs(props.bgEventSegs, rowCnt);\n    var fgEventSegsByRow = this.splitFgEventSegs(props.fgEventSegs, rowCnt);\n    var dateSelectionSegsByRow = this.splitDateSelectionSegs(props.dateSelectionSegs, rowCnt);\n    var eventDragByRow = this.splitEventDrag(props.eventDrag, rowCnt);\n    var eventResizeByRow = this.splitEventResize(props.eventResize, rowCnt);\n    var buildMoreLinkText = this.buildBuildMoreLinkText(this.context.options.moreLinkText);\n    var limitViaBalanced = dayMaxEvents === true || dayMaxEventRows === true; // if rows can't expand to fill fixed height, can't do balanced-height event limit\n    // TODO: best place to normalize these options?\n\n    if (limitViaBalanced && !expandRows) {\n      limitViaBalanced = false;\n      dayMaxEventRows = null;\n      dayMaxEvents = null;\n    }\n\n    var classNames = ['fc-daygrid-body', limitViaBalanced ? 'fc-daygrid-body-balanced' : 'fc-daygrid-body-unbalanced', expandRows ? '' : 'fc-daygrid-body-natural'];\n    return createElement(\"div\", {\n      className: classNames.join(' '),\n      ref: this.handleRootEl,\n      style: {\n        // these props are important to give this wrapper correct dimensions for interactions\n        // TODO: if we set it here, can we avoid giving to inner tables?\n        width: props.clientWidth,\n        minWidth: props.tableMinWidth\n      }\n    }, createElement(NowTimer, {\n      unit: \"day\"\n    }, function (nowDate, todayRange) {\n      return createElement(Fragment, null, createElement(\"table\", {\n        className: \"fc-scrollgrid-sync-table\",\n        style: {\n          width: props.clientWidth,\n          minWidth: props.tableMinWidth,\n          height: expandRows ? props.clientHeight : ''\n        }\n      }, props.colGroupNode, createElement(\"tbody\", null, props.cells.map(function (cells, row) {\n        return createElement(TableRow, {\n          ref: _this.rowRefs.createRef(row),\n          key: cells.length ? cells[0].date.toISOString()\n          /* best? or put key on cell? or use diff formatter? */\n          : row // in case there are no cells (like when resource view is loading)\n          ,\n          showDayNumbers: rowCnt > 1,\n          showWeekNumbers: props.showWeekNumbers,\n          todayRange: todayRange,\n          dateProfile: dateProfile,\n          cells: cells,\n          renderIntro: props.renderRowIntro,\n          businessHourSegs: businessHourSegsByRow[row],\n          eventSelection: props.eventSelection,\n          bgEventSegs: bgEventSegsByRow[row].filter(isSegAllDay)\n          /* hack */\n          ,\n          fgEventSegs: fgEventSegsByRow[row],\n          dateSelectionSegs: dateSelectionSegsByRow[row],\n          eventDrag: eventDragByRow[row],\n          eventResize: eventResizeByRow[row],\n          dayMaxEvents: dayMaxEvents,\n          dayMaxEventRows: dayMaxEventRows,\n          clientWidth: props.clientWidth,\n          clientHeight: props.clientHeight,\n          buildMoreLinkText: buildMoreLinkText,\n          onMoreClick: function onMoreClick(arg) {\n            _this.handleMoreLinkClick(__assign(__assign({}, arg), {\n              fromRow: row\n            }));\n          }\n        });\n      }))), !props.forPrint && morePopoverState && morePopoverState.currentFgEventSegs === props.fgEventSegs && createElement(MorePopover, {\n        ref: _this.morePopoverRef,\n        date: morePopoverState.date,\n        dateProfile: dateProfile,\n        segs: morePopoverState.allSegs,\n        alignmentEl: morePopoverState.dayEl,\n        topAlignmentEl: rowCnt === 1 ? props.headerAlignElRef.current : null,\n        onCloseClick: _this.handleMorePopoverClose,\n        selectedInstanceId: props.eventSelection,\n        hiddenInstances: // yuck\n        (props.eventDrag ? props.eventDrag.affectedInstances : null) || (props.eventResize ? props.eventResize.affectedInstances : null) || {},\n        todayRange: todayRange\n      }));\n    }));\n  }; // Hit System\n  // ----------------------------------------------------------------------------------------------------\n\n\n  Table.prototype.prepareHits = function () {\n    this.rowPositions = new PositionCache(this.rootEl, this.rowRefs.collect().map(function (rowObj) {\n      return rowObj.getCellEls()[0];\n    }), // first cell el in each row. TODO: not optimal\n    false, true);\n    this.colPositions = new PositionCache(this.rootEl, this.rowRefs.currentMap[0].getCellEls(), // cell els in first row\n    true, // horizontal\n    false);\n  };\n\n  Table.prototype.positionToHit = function (leftPosition, topPosition) {\n    var morePopover = this.morePopoverRef.current;\n    var morePopoverHit = morePopover ? morePopover.positionToHit(leftPosition, topPosition, this.rootEl) : null;\n    var morePopoverState = this.state.morePopoverState;\n\n    if (morePopoverHit) {\n      return __assign({\n        row: morePopoverState.fromRow,\n        col: morePopoverState.fromCol\n      }, morePopoverHit);\n    }\n\n    var _a = this,\n        colPositions = _a.colPositions,\n        rowPositions = _a.rowPositions;\n\n    var col = colPositions.leftToIndex(leftPosition);\n    var row = rowPositions.topToIndex(topPosition);\n\n    if (row != null && col != null) {\n      return {\n        row: row,\n        col: col,\n        dateSpan: {\n          range: this.getCellRange(row, col),\n          allDay: true\n        },\n        dayEl: this.getCellEl(row, col),\n        relativeRect: {\n          left: colPositions.lefts[col],\n          right: colPositions.rights[col],\n          top: rowPositions.tops[row],\n          bottom: rowPositions.bottoms[row]\n        }\n      };\n    }\n\n    return null;\n  };\n\n  Table.prototype.getCellEl = function (row, col) {\n    return this.rowRefs.currentMap[row].getCellEls()[col]; // TODO: not optimal\n  };\n\n  Table.prototype.getCellRange = function (row, col) {\n    var start = this.props.cells[row][col].date;\n    var end = addDays(start, 1);\n    return {\n      start: start,\n      end: end\n    };\n  };\n\n  return Table;\n}(DateComponent);\n\nfunction buildBuildMoreLinkText(moreLinkTextInput) {\n  if (typeof moreLinkTextInput === 'function') {\n    return moreLinkTextInput;\n  }\n\n  return function (num) {\n    return \"+\" + num + \" \" + moreLinkTextInput;\n  };\n}\n\nfunction isSegAllDay(seg) {\n  return seg.eventRange.def.allDay;\n}\n\nvar DayTableSlicer =\n/** @class */\nfunction (_super) {\n  __extends(DayTableSlicer, _super);\n\n  function DayTableSlicer() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.forceDayIfListItem = true;\n    return _this;\n  }\n\n  DayTableSlicer.prototype.sliceRange = function (dateRange, dayTableModel) {\n    return dayTableModel.sliceRange(dateRange);\n  };\n\n  return DayTableSlicer;\n}(Slicer);\n\nvar DayTable =\n/** @class */\nfunction (_super) {\n  __extends(DayTable, _super);\n\n  function DayTable() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.slicer = new DayTableSlicer();\n    _this.tableRef = createRef();\n\n    _this.handleRootEl = function (rootEl) {\n      if (rootEl) {\n        _this.context.registerInteractiveComponent(_this, {\n          el: rootEl\n        });\n      } else {\n        _this.context.unregisterInteractiveComponent(_this);\n      }\n    };\n\n    return _this;\n  }\n\n  DayTable.prototype.render = function () {\n    var _a = this,\n        props = _a.props,\n        context = _a.context;\n\n    return createElement(Table, __assign({\n      ref: this.tableRef,\n      elRef: this.handleRootEl\n    }, this.slicer.sliceProps(props, props.dateProfile, props.nextDayThreshold, context, props.dayTableModel), {\n      dateProfile: props.dateProfile,\n      cells: props.dayTableModel.cells,\n      colGroupNode: props.colGroupNode,\n      tableMinWidth: props.tableMinWidth,\n      renderRowIntro: props.renderRowIntro,\n      dayMaxEvents: props.dayMaxEvents,\n      dayMaxEventRows: props.dayMaxEventRows,\n      showWeekNumbers: props.showWeekNumbers,\n      expandRows: props.expandRows,\n      headerAlignElRef: props.headerAlignElRef,\n      clientWidth: props.clientWidth,\n      clientHeight: props.clientHeight,\n      forPrint: props.forPrint\n    }));\n  };\n\n  DayTable.prototype.prepareHits = function () {\n    this.tableRef.current.prepareHits();\n  };\n\n  DayTable.prototype.queryHit = function (positionLeft, positionTop) {\n    var rawHit = this.tableRef.current.positionToHit(positionLeft, positionTop);\n\n    if (rawHit) {\n      return {\n        component: this,\n        dateSpan: rawHit.dateSpan,\n        dayEl: rawHit.dayEl,\n        rect: {\n          left: rawHit.relativeRect.left,\n          right: rawHit.relativeRect.right,\n          top: rawHit.relativeRect.top,\n          bottom: rawHit.relativeRect.bottom\n        },\n        layer: 0\n      };\n    }\n\n    return null;\n  };\n\n  return DayTable;\n}(DateComponent);\n\nvar DayTableView =\n/** @class */\nfunction (_super) {\n  __extends(DayTableView, _super);\n\n  function DayTableView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.buildDayTableModel = memoize(buildDayTableModel);\n    _this.headerRef = createRef();\n    _this.tableRef = createRef();\n    return _this;\n  }\n\n  DayTableView.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.context,\n        options = _a.options,\n        dateProfileGenerator = _a.dateProfileGenerator;\n    var props = this.props;\n    var dayTableModel = this.buildDayTableModel(props.dateProfile, dateProfileGenerator);\n    var headerContent = options.dayHeaders && createElement(DayHeader, {\n      ref: this.headerRef,\n      dateProfile: props.dateProfile,\n      dates: dayTableModel.headerDates,\n      datesRepDistinctDays: dayTableModel.rowCnt === 1\n    });\n\n    var bodyContent = function bodyContent(contentArg) {\n      return createElement(DayTable, {\n        ref: _this.tableRef,\n        dateProfile: props.dateProfile,\n        dayTableModel: dayTableModel,\n        businessHours: props.businessHours,\n        dateSelection: props.dateSelection,\n        eventStore: props.eventStore,\n        eventUiBases: props.eventUiBases,\n        eventSelection: props.eventSelection,\n        eventDrag: props.eventDrag,\n        eventResize: props.eventResize,\n        nextDayThreshold: options.nextDayThreshold,\n        colGroupNode: contentArg.tableColGroupNode,\n        tableMinWidth: contentArg.tableMinWidth,\n        dayMaxEvents: options.dayMaxEvents,\n        dayMaxEventRows: options.dayMaxEventRows,\n        showWeekNumbers: options.weekNumbers,\n        expandRows: !props.isHeightAuto,\n        headerAlignElRef: _this.headerElRef,\n        clientWidth: contentArg.clientWidth,\n        clientHeight: contentArg.clientHeight,\n        forPrint: props.forPrint\n      });\n    };\n\n    return options.dayMinWidth ? this.renderHScrollLayout(headerContent, bodyContent, dayTableModel.colCnt, options.dayMinWidth) : this.renderSimpleLayout(headerContent, bodyContent);\n  };\n\n  return DayTableView;\n}(TableView);\n\nfunction buildDayTableModel(dateProfile, dateProfileGenerator) {\n  var daySeries = new DaySeriesModel(dateProfile.renderRange, dateProfileGenerator);\n  return new DayTableModel(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n}\n\nvar TableDateProfileGenerator =\n/** @class */\nfunction (_super) {\n  __extends(TableDateProfileGenerator, _super);\n\n  function TableDateProfileGenerator() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  } // Computes the date range that will be rendered.\n\n\n  TableDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n    var dateEnv = this.props.dateEnv;\n\n    var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n\n    var start = renderRange.start;\n    var end = renderRange.end;\n    var endOfWeek; // year and month views should be aligned with weeks. this is already done for week\n\n    if (/^(year|month)$/.test(currentRangeUnit)) {\n      start = dateEnv.startOfWeek(start); // make end-of-week if not already\n\n      endOfWeek = dateEnv.startOfWeek(end);\n\n      if (endOfWeek.valueOf() !== end.valueOf()) {\n        end = addWeeks(endOfWeek, 1);\n      }\n    } // ensure 6 weeks\n\n\n    if (this.props.monthMode && this.props.fixedWeekCount) {\n      var rowCnt = Math.ceil( // could be partial weeks due to hiddenDays\n      diffWeeks(start, end));\n      end = addWeeks(end, 6 - rowCnt);\n    }\n\n    return {\n      start: start,\n      end: end\n    };\n  };\n\n  return TableDateProfileGenerator;\n}(DateProfileGenerator);\n\nvar OPTION_REFINERS = {\n  moreLinkClick: identity,\n  moreLinkClassNames: identity,\n  moreLinkContent: identity,\n  moreLinkDidMount: identity,\n  moreLinkWillUnmount: identity\n};\nvar main = createPlugin({\n  initialView: 'dayGridMonth',\n  optionRefiners: OPTION_REFINERS,\n  views: {\n    dayGrid: {\n      component: DayTableView,\n      dateProfileGeneratorClass: TableDateProfileGenerator\n    },\n    dayGridDay: {\n      type: 'dayGrid',\n      duration: {\n        days: 1\n      }\n    },\n    dayGridWeek: {\n      type: 'dayGrid',\n      duration: {\n        weeks: 1\n      }\n    },\n    dayGridMonth: {\n      type: 'dayGrid',\n      duration: {\n        months: 1\n      },\n      monthMode: true,\n      fixedWeekCount: true\n    }\n  }\n});\nexport default main;\nexport { DayTableView as DayGridView, DayTable, DayTableSlicer, Table, TableView, buildDayTableModel };","/*!\nFullCalendar v5.5.1\nDocs & License: https://fullcalendar.io/\n(c) 2020 Adam Shaw\n*/\nimport './main.css';\nimport { hasBgRendering, Splitter, createFormatter, createElement, ViewContextType, RenderHook, BaseComponent, createRef, diffDays, buildNavLinkData, WeekNumberRoot, getStickyHeaderDates, ViewRoot, SimpleScrollGrid, getStickyFooterScrollbar, NowTimer, NowIndicatorRoot, DateComponent, renderScrollShim, rangeContainsMarker, startOfDay, asRoughMs, createDuration, RefMap, PositionCache, sortEventSegs, compareByFieldSpecs, buildSegCompareObj, StandardEvent, DayCellContent, config, DayCellRoot, getSegMeta, buildEventRangeKey, BgEvent, renderFill, Fragment, memoize, addDurations, multiplyDuration, wholeDivideDurations, intersectRanges, Slicer, formatIsoTimeString, DayHeader, DaySeriesModel, DayTableModel, createPlugin } from '@fullcalendar/common';\nimport { __extends, __assign } from 'tslib';\nimport { DayTable } from '@fullcalendar/daygrid';\n\nvar AllDaySplitter =\n/** @class */\nfunction (_super) {\n  __extends(AllDaySplitter, _super);\n\n  function AllDaySplitter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  AllDaySplitter.prototype.getKeyInfo = function () {\n    return {\n      allDay: {},\n      timed: {}\n    };\n  };\n\n  AllDaySplitter.prototype.getKeysForDateSpan = function (dateSpan) {\n    if (dateSpan.allDay) {\n      return ['allDay'];\n    }\n\n    return ['timed'];\n  };\n\n  AllDaySplitter.prototype.getKeysForEventDef = function (eventDef) {\n    if (!eventDef.allDay) {\n      return ['timed'];\n    }\n\n    if (hasBgRendering(eventDef)) {\n      return ['timed', 'allDay'];\n    }\n\n    return ['allDay'];\n  };\n\n  return AllDaySplitter;\n}(Splitter);\n\nvar DEFAULT_SLAT_LABEL_FORMAT = createFormatter({\n  hour: 'numeric',\n  minute: '2-digit',\n  omitZeroMinute: true,\n  meridiem: 'short'\n});\n\nfunction TimeColsAxisCell(props) {\n  var classNames = ['fc-timegrid-slot', 'fc-timegrid-slot-label', props.isLabeled ? 'fc-scrollgrid-shrink' : 'fc-timegrid-slot-minor'];\n  return createElement(ViewContextType.Consumer, null, function (context) {\n    if (!props.isLabeled) {\n      return createElement(\"td\", {\n        className: classNames.join(' '),\n        \"data-time\": props.isoTimeStr\n      });\n    }\n\n    var dateEnv = context.dateEnv,\n        options = context.options,\n        viewApi = context.viewApi;\n    var labelFormat = // TODO: fully pre-parse\n    options.slotLabelFormat == null ? DEFAULT_SLAT_LABEL_FORMAT : Array.isArray(options.slotLabelFormat) ? createFormatter(options.slotLabelFormat[0]) : createFormatter(options.slotLabelFormat);\n    var hookProps = {\n      level: 0,\n      time: props.time,\n      date: dateEnv.toDate(props.date),\n      view: viewApi,\n      text: dateEnv.format(props.date, labelFormat)\n    };\n    return createElement(RenderHook, {\n      hookProps: hookProps,\n      classNames: options.slotLabelClassNames,\n      content: options.slotLabelContent,\n      defaultContent: renderInnerContent,\n      didMount: options.slotLabelDidMount,\n      willUnmount: options.slotLabelWillUnmount\n    }, function (rootElRef, customClassNames, innerElRef, innerContent) {\n      return createElement(\"td\", {\n        ref: rootElRef,\n        className: classNames.concat(customClassNames).join(' '),\n        \"data-time\": props.isoTimeStr\n      }, createElement(\"div\", {\n        className: \"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame\"\n      }, createElement(\"div\", {\n        className: \"fc-timegrid-slot-label-cushion fc-scrollgrid-shrink-cushion\",\n        ref: innerElRef\n      }, innerContent)));\n    });\n  });\n}\n\nfunction renderInnerContent(props) {\n  return props.text;\n}\n\nvar TimeBodyAxis =\n/** @class */\nfunction (_super) {\n  __extends(TimeBodyAxis, _super);\n\n  function TimeBodyAxis() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TimeBodyAxis.prototype.render = function () {\n    return this.props.slatMetas.map(function (slatMeta) {\n      return createElement(\"tr\", {\n        key: slatMeta.key\n      }, createElement(TimeColsAxisCell, __assign({}, slatMeta)));\n    });\n  };\n\n  return TimeBodyAxis;\n}(BaseComponent);\n\nvar DEFAULT_WEEK_NUM_FORMAT = createFormatter({\n  week: 'short'\n});\nvar AUTO_ALL_DAY_MAX_EVENT_ROWS = 5;\n\nvar TimeColsView =\n/** @class */\nfunction (_super) {\n  __extends(TimeColsView, _super);\n\n  function TimeColsView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.allDaySplitter = new AllDaySplitter(); // for use by subclasses\n\n    _this.headerElRef = createRef();\n    _this.rootElRef = createRef();\n    _this.scrollerElRef = createRef();\n    _this.state = {\n      slatCoords: null\n    };\n\n    _this.handleScrollTopRequest = function (scrollTop) {\n      var scrollerEl = _this.scrollerElRef.current;\n\n      if (scrollerEl) {\n        // TODO: not sure how this could ever be null. weirdness with the reducer\n        scrollerEl.scrollTop = scrollTop;\n      }\n    };\n    /* Header Render Methods\n    ------------------------------------------------------------------------------------------------------------------*/\n\n\n    _this.renderHeadAxis = function (rowKey, frameHeight) {\n      if (frameHeight === void 0) {\n        frameHeight = '';\n      }\n\n      var options = _this.context.options;\n      var dateProfile = _this.props.dateProfile;\n      var range = dateProfile.renderRange;\n      var dayCnt = diffDays(range.start, range.end);\n      var navLinkAttrs = options.navLinks && dayCnt === 1 ? // only do in day views (to avoid doing in week views that dont need it)\n      {\n        'data-navlink': buildNavLinkData(range.start, 'week'),\n        tabIndex: 0\n      } : {};\n\n      if (options.weekNumbers && rowKey === 'day') {\n        return createElement(WeekNumberRoot, {\n          date: range.start,\n          defaultFormat: DEFAULT_WEEK_NUM_FORMAT\n        }, function (rootElRef, classNames, innerElRef, innerContent) {\n          return createElement(\"th\", {\n            ref: rootElRef,\n            className: ['fc-timegrid-axis', 'fc-scrollgrid-shrink'].concat(classNames).join(' ')\n          }, createElement(\"div\", {\n            className: \"fc-timegrid-axis-frame fc-scrollgrid-shrink-frame fc-timegrid-axis-frame-liquid\",\n            style: {\n              height: frameHeight\n            }\n          }, createElement(\"a\", __assign({\n            ref: innerElRef,\n            className: \"fc-timegrid-axis-cushion fc-scrollgrid-shrink-cushion fc-scrollgrid-sync-inner\"\n          }, navLinkAttrs), innerContent)));\n        });\n      }\n\n      return createElement(\"th\", {\n        className: \"fc-timegrid-axis\"\n      }, createElement(\"div\", {\n        className: \"fc-timegrid-axis-frame\",\n        style: {\n          height: frameHeight\n        }\n      }));\n    };\n    /* Table Component Render Methods\n    ------------------------------------------------------------------------------------------------------------------*/\n    // only a one-way height sync. we don't send the axis inner-content height to the DayGrid,\n    // but DayGrid still needs to have classNames on inner elements in order to measure.\n\n\n    _this.renderTableRowAxis = function (rowHeight) {\n      var _a = _this.context,\n          options = _a.options,\n          viewApi = _a.viewApi;\n      var hookProps = {\n        text: options.allDayText,\n        view: viewApi\n      };\n      return (// TODO: make reusable hook. used in list view too\n        createElement(RenderHook, {\n          hookProps: hookProps,\n          classNames: options.allDayClassNames,\n          content: options.allDayContent,\n          defaultContent: renderAllDayInner,\n          didMount: options.allDayDidMount,\n          willUnmount: options.allDayWillUnmount\n        }, function (rootElRef, classNames, innerElRef, innerContent) {\n          return createElement(\"td\", {\n            ref: rootElRef,\n            className: ['fc-timegrid-axis', 'fc-scrollgrid-shrink'].concat(classNames).join(' ')\n          }, createElement(\"div\", {\n            className: 'fc-timegrid-axis-frame fc-scrollgrid-shrink-frame' + (rowHeight == null ? ' fc-timegrid-axis-frame-liquid' : ''),\n            style: {\n              height: rowHeight\n            }\n          }, createElement(\"span\", {\n            className: \"fc-timegrid-axis-cushion fc-scrollgrid-shrink-cushion fc-scrollgrid-sync-inner\",\n            ref: innerElRef\n          }, innerContent)));\n        })\n      );\n    };\n\n    _this.handleSlatCoords = function (slatCoords) {\n      _this.setState({\n        slatCoords: slatCoords\n      });\n    };\n\n    return _this;\n  } // rendering\n  // ----------------------------------------------------------------------------------------------------\n\n\n  TimeColsView.prototype.renderSimpleLayout = function (headerRowContent, allDayContent, timeContent) {\n    var _a = this,\n        context = _a.context,\n        props = _a.props;\n\n    var sections = [];\n    var stickyHeaderDates = getStickyHeaderDates(context.options);\n\n    if (headerRowContent) {\n      sections.push({\n        type: 'header',\n        key: 'header',\n        isSticky: stickyHeaderDates,\n        chunk: {\n          elRef: this.headerElRef,\n          tableClassName: 'fc-col-header',\n          rowContent: headerRowContent\n        }\n      });\n    }\n\n    if (allDayContent) {\n      sections.push({\n        type: 'body',\n        key: 'all-day',\n        chunk: {\n          content: allDayContent\n        }\n      });\n      sections.push({\n        type: 'body',\n        key: 'all-day-divider',\n        outerContent: // TODO: rename to cellContent so don't need to define <tr>?\n        createElement(\"tr\", {\n          className: \"fc-scrollgrid-section\"\n        }, createElement(\"td\", {\n          className: 'fc-timegrid-divider ' + context.theme.getClass('tableCellShaded')\n        }))\n      });\n    }\n\n    sections.push({\n      type: 'body',\n      key: 'body',\n      liquid: true,\n      expandRows: Boolean(context.options.expandRows),\n      chunk: {\n        scrollerElRef: this.scrollerElRef,\n        content: timeContent\n      }\n    });\n    return createElement(ViewRoot, {\n      viewSpec: context.viewSpec,\n      elRef: this.rootElRef\n    }, function (rootElRef, classNames) {\n      return createElement(\"div\", {\n        className: ['fc-timegrid'].concat(classNames).join(' '),\n        ref: rootElRef\n      }, createElement(SimpleScrollGrid, {\n        liquid: !props.isHeightAuto && !props.forPrint,\n        cols: [{\n          width: 'shrink'\n        }],\n        sections: sections\n      }));\n    });\n  };\n\n  TimeColsView.prototype.renderHScrollLayout = function (headerRowContent, allDayContent, timeContent, colCnt, dayMinWidth, slatMetas, slatCoords) {\n    var _this = this;\n\n    var ScrollGrid = this.context.pluginHooks.scrollGridImpl;\n\n    if (!ScrollGrid) {\n      throw new Error('No ScrollGrid implementation');\n    }\n\n    var _a = this,\n        context = _a.context,\n        props = _a.props;\n\n    var stickyHeaderDates = !props.forPrint && getStickyHeaderDates(context.options);\n    var stickyFooterScrollbar = !props.forPrint && getStickyFooterScrollbar(context.options);\n    var sections = [];\n\n    if (headerRowContent) {\n      sections.push({\n        type: 'header',\n        key: 'header',\n        isSticky: stickyHeaderDates,\n        syncRowHeights: true,\n        chunks: [{\n          key: 'axis',\n          rowContent: function rowContent(arg) {\n            return createElement(\"tr\", null, _this.renderHeadAxis('day', arg.rowSyncHeights[0]));\n          }\n        }, {\n          key: 'cols',\n          elRef: this.headerElRef,\n          tableClassName: 'fc-col-header',\n          rowContent: headerRowContent\n        }]\n      });\n    }\n\n    if (allDayContent) {\n      sections.push({\n        type: 'body',\n        key: 'all-day',\n        syncRowHeights: true,\n        chunks: [{\n          key: 'axis',\n          rowContent: function rowContent(contentArg) {\n            return createElement(\"tr\", null, _this.renderTableRowAxis(contentArg.rowSyncHeights[0]));\n          }\n        }, {\n          key: 'cols',\n          content: allDayContent\n        }]\n      });\n      sections.push({\n        key: 'all-day-divider',\n        type: 'body',\n        outerContent: // TODO: rename to cellContent so don't need to define <tr>?\n        createElement(\"tr\", {\n          className: \"fc-scrollgrid-section\"\n        }, createElement(\"td\", {\n          colSpan: 2,\n          className: 'fc-timegrid-divider ' + context.theme.getClass('tableCellShaded')\n        }))\n      });\n    }\n\n    var isNowIndicator = context.options.nowIndicator;\n    sections.push({\n      type: 'body',\n      key: 'body',\n      liquid: true,\n      expandRows: Boolean(context.options.expandRows),\n      chunks: [{\n        key: 'axis',\n        content: function content(arg) {\n          return (// TODO: make this now-indicator arrow more DRY with TimeColsContent\n            createElement(\"div\", {\n              className: \"fc-timegrid-axis-chunk\"\n            }, createElement(\"table\", {\n              style: {\n                height: arg.expandRows ? arg.clientHeight : ''\n              }\n            }, arg.tableColGroupNode, createElement(\"tbody\", null, createElement(TimeBodyAxis, {\n              slatMetas: slatMetas\n            }))), createElement(\"div\", {\n              className: \"fc-timegrid-now-indicator-container\"\n            }, createElement(NowTimer, {\n              unit: isNowIndicator ? 'minute' : 'day'\n              /* hacky */\n\n            }, function (nowDate) {\n              var nowIndicatorTop = isNowIndicator && slatCoords && slatCoords.safeComputeTop(nowDate); // might return void\n\n              if (typeof nowIndicatorTop === 'number') {\n                return createElement(NowIndicatorRoot, {\n                  isAxis: true,\n                  date: nowDate\n                }, function (rootElRef, classNames, innerElRef, innerContent) {\n                  return createElement(\"div\", {\n                    ref: rootElRef,\n                    className: ['fc-timegrid-now-indicator-arrow'].concat(classNames).join(' '),\n                    style: {\n                      top: nowIndicatorTop\n                    }\n                  }, innerContent);\n                });\n              }\n\n              return null;\n            })))\n          );\n        }\n      }, {\n        key: 'cols',\n        scrollerElRef: this.scrollerElRef,\n        content: timeContent\n      }]\n    });\n\n    if (stickyFooterScrollbar) {\n      sections.push({\n        key: 'footer',\n        type: 'footer',\n        isSticky: true,\n        chunks: [{\n          key: 'axis',\n          content: renderScrollShim\n        }, {\n          key: 'cols',\n          content: renderScrollShim\n        }]\n      });\n    }\n\n    return createElement(ViewRoot, {\n      viewSpec: context.viewSpec,\n      elRef: this.rootElRef\n    }, function (rootElRef, classNames) {\n      return createElement(\"div\", {\n        className: ['fc-timegrid'].concat(classNames).join(' '),\n        ref: rootElRef\n      }, createElement(ScrollGrid, {\n        liquid: !props.isHeightAuto && !props.forPrint,\n        colGroups: [{\n          width: 'shrink',\n          cols: [{\n            width: 'shrink'\n          }]\n        }, {\n          cols: [{\n            span: colCnt,\n            minWidth: dayMinWidth\n          }]\n        }],\n        sections: sections\n      }));\n    });\n  };\n  /* Dimensions\n  ------------------------------------------------------------------------------------------------------------------*/\n\n\n  TimeColsView.prototype.getAllDayMaxEventProps = function () {\n    var _a = this.context.options,\n        dayMaxEvents = _a.dayMaxEvents,\n        dayMaxEventRows = _a.dayMaxEventRows;\n\n    if (dayMaxEvents === true || dayMaxEventRows === true) {\n      // is auto?\n      dayMaxEvents = undefined;\n      dayMaxEventRows = AUTO_ALL_DAY_MAX_EVENT_ROWS; // make sure \"auto\" goes to a real number\n    }\n\n    return {\n      dayMaxEvents: dayMaxEvents,\n      dayMaxEventRows: dayMaxEventRows\n    };\n  };\n\n  return TimeColsView;\n}(DateComponent);\n\nfunction renderAllDayInner(hookProps) {\n  return hookProps.text;\n}\n\nvar TimeColsSlatsCoords =\n/** @class */\nfunction () {\n  function TimeColsSlatsCoords(positions, dateProfile, slotDuration) {\n    this.positions = positions;\n    this.dateProfile = dateProfile;\n    this.slotDuration = slotDuration;\n  }\n\n  TimeColsSlatsCoords.prototype.safeComputeTop = function (date) {\n    var dateProfile = this.dateProfile;\n\n    if (rangeContainsMarker(dateProfile.currentRange, date)) {\n      var startOfDayDate = startOfDay(date);\n      var timeMs = date.valueOf() - startOfDayDate.valueOf();\n\n      if (timeMs >= asRoughMs(dateProfile.slotMinTime) && timeMs < asRoughMs(dateProfile.slotMaxTime)) {\n        return this.computeTimeTop(createDuration(timeMs));\n      }\n    }\n\n    return null;\n  }; // Computes the top coordinate, relative to the bounds of the grid, of the given date.\n  // A `startOfDayDate` must be given for avoiding ambiguity over how to treat midnight.\n\n\n  TimeColsSlatsCoords.prototype.computeDateTop = function (when, startOfDayDate) {\n    if (!startOfDayDate) {\n      startOfDayDate = startOfDay(when);\n    }\n\n    return this.computeTimeTop(createDuration(when.valueOf() - startOfDayDate.valueOf()));\n  }; // Computes the top coordinate, relative to the bounds of the grid, of the given time (a Duration).\n  // This is a makeshify way to compute the time-top. Assumes all slatMetas dates are uniform.\n  // Eventually allow computation with arbirary slat dates.\n\n\n  TimeColsSlatsCoords.prototype.computeTimeTop = function (duration) {\n    var _a = this,\n        positions = _a.positions,\n        dateProfile = _a.dateProfile;\n\n    var len = positions.els.length; // floating-point value of # of slots covered\n\n    var slatCoverage = (duration.milliseconds - asRoughMs(dateProfile.slotMinTime)) / asRoughMs(this.slotDuration);\n    var slatIndex;\n    var slatRemainder; // compute a floating-point number for how many slats should be progressed through.\n    // from 0 to number of slats (inclusive)\n    // constrained because slotMinTime/slotMaxTime might be customized.\n\n    slatCoverage = Math.max(0, slatCoverage);\n    slatCoverage = Math.min(len, slatCoverage); // an integer index of the furthest whole slat\n    // from 0 to number slats (*exclusive*, so len-1)\n\n    slatIndex = Math.floor(slatCoverage);\n    slatIndex = Math.min(slatIndex, len - 1); // how much further through the slatIndex slat (from 0.0-1.0) must be covered in addition.\n    // could be 1.0 if slatCoverage is covering *all* the slots\n\n    slatRemainder = slatCoverage - slatIndex;\n    return positions.tops[slatIndex] + positions.getHeight(slatIndex) * slatRemainder;\n  };\n\n  return TimeColsSlatsCoords;\n}();\n\nvar TimeColsSlatsBody =\n/** @class */\nfunction (_super) {\n  __extends(TimeColsSlatsBody, _super);\n\n  function TimeColsSlatsBody() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TimeColsSlatsBody.prototype.render = function () {\n    var _a = this,\n        props = _a.props,\n        context = _a.context;\n\n    var options = context.options;\n    var slatElRefs = props.slatElRefs;\n    return createElement(\"tbody\", null, props.slatMetas.map(function (slatMeta, i) {\n      var hookProps = {\n        time: slatMeta.time,\n        date: context.dateEnv.toDate(slatMeta.date),\n        view: context.viewApi\n      };\n      var classNames = ['fc-timegrid-slot', 'fc-timegrid-slot-lane', slatMeta.isLabeled ? '' : 'fc-timegrid-slot-minor'];\n      return createElement(\"tr\", {\n        key: slatMeta.key,\n        ref: slatElRefs.createRef(slatMeta.key)\n      }, props.axis && createElement(TimeColsAxisCell, __assign({}, slatMeta)), createElement(RenderHook, {\n        hookProps: hookProps,\n        classNames: options.slotLaneClassNames,\n        content: options.slotLaneContent,\n        didMount: options.slotLaneDidMount,\n        willUnmount: options.slotLaneWillUnmount\n      }, function (rootElRef, customClassNames, innerElRef, innerContent) {\n        return createElement(\"td\", {\n          ref: rootElRef,\n          className: classNames.concat(customClassNames).join(' '),\n          \"data-time\": slatMeta.isoTimeStr\n        }, innerContent);\n      }));\n    }));\n  };\n\n  return TimeColsSlatsBody;\n}(BaseComponent);\n/*\nfor the horizontal \"slats\" that run width-wise. Has a time axis on a side. Depends on RTL.\n*/\n\n\nvar TimeColsSlats =\n/** @class */\nfunction (_super) {\n  __extends(TimeColsSlats, _super);\n\n  function TimeColsSlats() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.rootElRef = createRef();\n    _this.slatElRefs = new RefMap();\n    return _this;\n  }\n\n  TimeColsSlats.prototype.render = function () {\n    var _a = this,\n        props = _a.props,\n        context = _a.context;\n\n    return createElement(\"div\", {\n      className: \"fc-timegrid-slots\",\n      ref: this.rootElRef\n    }, createElement(\"table\", {\n      className: context.theme.getClass('table'),\n      style: {\n        minWidth: props.tableMinWidth,\n        width: props.clientWidth,\n        height: props.minHeight\n      }\n    }, props.tableColGroupNode\n    /* relies on there only being a single <col> for the axis */\n    , createElement(TimeColsSlatsBody, {\n      slatElRefs: this.slatElRefs,\n      axis: props.axis,\n      slatMetas: props.slatMetas\n    })));\n  };\n\n  TimeColsSlats.prototype.componentDidMount = function () {\n    this.updateSizing();\n  };\n\n  TimeColsSlats.prototype.componentDidUpdate = function () {\n    this.updateSizing();\n  };\n\n  TimeColsSlats.prototype.componentWillUnmount = function () {\n    if (this.props.onCoords) {\n      this.props.onCoords(null);\n    }\n  };\n\n  TimeColsSlats.prototype.updateSizing = function () {\n    var _a = this,\n        context = _a.context,\n        props = _a.props;\n\n    if (props.onCoords && props.clientWidth !== null // means sizing has stabilized\n    ) {\n        var rootEl = this.rootElRef.current;\n\n        if (rootEl.offsetHeight) {\n          // not hidden by css\n          props.onCoords(new TimeColsSlatsCoords(new PositionCache(this.rootElRef.current, collectSlatEls(this.slatElRefs.currentMap, props.slatMetas), false, true), this.props.dateProfile, context.options.slotDuration));\n        }\n      }\n  };\n\n  return TimeColsSlats;\n}(BaseComponent);\n\nfunction collectSlatEls(elMap, slatMetas) {\n  return slatMetas.map(function (slatMeta) {\n    return elMap[slatMeta.key];\n  });\n}\n\nfunction splitSegsByCol(segs, colCnt) {\n  var segsByCol = [];\n  var i;\n\n  for (i = 0; i < colCnt; i += 1) {\n    segsByCol.push([]);\n  }\n\n  if (segs) {\n    for (i = 0; i < segs.length; i += 1) {\n      segsByCol[segs[i].col].push(segs[i]);\n    }\n  }\n\n  return segsByCol;\n}\n\nfunction splitInteractionByCol(ui, colCnt) {\n  var byRow = [];\n\n  if (!ui) {\n    for (var i = 0; i < colCnt; i += 1) {\n      byRow[i] = null;\n    }\n  } else {\n    for (var i = 0; i < colCnt; i += 1) {\n      byRow[i] = {\n        affectedInstances: ui.affectedInstances,\n        isEvent: ui.isEvent,\n        segs: []\n      };\n    }\n\n    for (var _i = 0, _a = ui.segs; _i < _a.length; _i++) {\n      var seg = _a[_i];\n      byRow[seg.col].segs.push(seg);\n    }\n  }\n\n  return byRow;\n} // UNFORTUNATELY, assigns results to the top/bottom/level/forwardCoord/backwardCoord props of the actual segs.\n// TODO: return hash (by instanceId) of results\n\n\nfunction computeSegCoords(segs, dayDate, slatCoords, eventMinHeight, eventOrderSpecs) {\n  computeSegVerticals(segs, dayDate, slatCoords, eventMinHeight);\n  return computeSegHorizontals(segs, eventOrderSpecs); // requires top/bottom from computeSegVerticals\n} // For each segment in an array, computes and assigns its top and bottom properties\n\n\nfunction computeSegVerticals(segs, dayDate, slatCoords, eventMinHeight) {\n  for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n    var seg = segs_1[_i];\n    seg.top = slatCoords.computeDateTop(seg.start, dayDate);\n    seg.bottom = Math.max(seg.top + (eventMinHeight || 0), // yuck\n    slatCoords.computeDateTop(seg.end, dayDate));\n  }\n} // Given an array of segments that are all in the same column, sets the backwardCoord and forwardCoord on each.\n// Assumed the segs are already ordered.\n// NOTE: Also reorders the given array by date!\n\n\nfunction computeSegHorizontals(segs, eventOrderSpecs) {\n  // IMPORTANT TO CLEAR OLD RESULTS :(\n  for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n    var seg = segs_2[_i];\n    seg.level = null;\n    seg.forwardCoord = null;\n    seg.backwardCoord = null;\n    seg.forwardPressure = null;\n  }\n\n  segs = sortEventSegs(segs, eventOrderSpecs);\n  var level0;\n  var levels = buildSlotSegLevels(segs);\n  computeForwardSlotSegs(levels);\n\n  if (level0 = levels[0]) {\n    for (var _a = 0, level0_1 = level0; _a < level0_1.length; _a++) {\n      var seg = level0_1[_a];\n      computeSlotSegPressures(seg);\n    }\n\n    for (var _b = 0, level0_2 = level0; _b < level0_2.length; _b++) {\n      var seg = level0_2[_b];\n      computeSegForwardBack(seg, 0, 0, eventOrderSpecs);\n    }\n  }\n\n  return segs;\n} // Builds an array of segments \"levels\". The first level will be the leftmost tier of segments if the calendar is\n// left-to-right, or the rightmost if the calendar is right-to-left. Assumes the segments are already ordered by date.\n\n\nfunction buildSlotSegLevels(segs) {\n  var levels = [];\n  var i;\n  var seg;\n  var j;\n\n  for (i = 0; i < segs.length; i += 1) {\n    seg = segs[i]; // go through all the levels and stop on the first level where there are no collisions\n\n    for (j = 0; j < levels.length; j += 1) {\n      if (!computeSlotSegCollisions(seg, levels[j]).length) {\n        break;\n      }\n    }\n\n    seg.level = j;\n    (levels[j] || (levels[j] = [])).push(seg);\n  }\n\n  return levels;\n} // Find all the segments in `otherSegs` that vertically collide with `seg`.\n// Append into an optionally-supplied `results` array and return.\n\n\nfunction computeSlotSegCollisions(seg, otherSegs, results) {\n  if (results === void 0) {\n    results = [];\n  }\n\n  for (var i = 0; i < otherSegs.length; i += 1) {\n    if (isSlotSegCollision(seg, otherSegs[i])) {\n      results.push(otherSegs[i]);\n    }\n  }\n\n  return results;\n} // Do these segments occupy the same vertical space?\n\n\nfunction isSlotSegCollision(seg1, seg2) {\n  return seg1.bottom > seg2.top && seg1.top < seg2.bottom;\n} // For every segment, figure out the other segments that are in subsequent\n// levels that also occupy the same vertical space. Accumulate in seg.forwardSegs\n\n\nfunction computeForwardSlotSegs(levels) {\n  var i;\n  var level;\n  var j;\n  var seg;\n  var k;\n\n  for (i = 0; i < levels.length; i += 1) {\n    level = levels[i];\n\n    for (j = 0; j < level.length; j += 1) {\n      seg = level[j];\n      seg.forwardSegs = [];\n\n      for (k = i + 1; k < levels.length; k += 1) {\n        computeSlotSegCollisions(seg, levels[k], seg.forwardSegs);\n      }\n    }\n  }\n} // Figure out which path forward (via seg.forwardSegs) results in the longest path until\n// the furthest edge is reached. The number of segments in this path will be seg.forwardPressure\n\n\nfunction computeSlotSegPressures(seg) {\n  var forwardSegs = seg.forwardSegs;\n  var forwardPressure = 0;\n  var i;\n  var forwardSeg;\n\n  if (seg.forwardPressure == null) {\n    // not already computed\n    for (i = 0; i < forwardSegs.length; i += 1) {\n      forwardSeg = forwardSegs[i]; // figure out the child's maximum forward path\n\n      computeSlotSegPressures(forwardSeg); // either use the existing maximum, or use the child's forward pressure\n      // plus one (for the forwardSeg itself)\n\n      forwardPressure = Math.max(forwardPressure, 1 + forwardSeg.forwardPressure);\n    }\n\n    seg.forwardPressure = forwardPressure;\n  }\n} // Calculate seg.forwardCoord and seg.backwardCoord for the segment, where both values range\n// from 0 to 1. If the calendar is left-to-right, the seg.backwardCoord maps to \"left\" and\n// seg.forwardCoord maps to \"right\" (via percentage). Vice-versa if the calendar is right-to-left.\n//\n// The segment might be part of a \"series\", which means consecutive segments with the same pressure\n// who's width is unknown until an edge has been hit. `seriesBackwardPressure` is the number of\n// segments behind this one in the current series, and `seriesBackwardCoord` is the starting\n// coordinate of the first segment in the series.\n\n\nfunction computeSegForwardBack(seg, seriesBackwardPressure, seriesBackwardCoord, eventOrderSpecs) {\n  var forwardSegs = seg.forwardSegs;\n  var i;\n\n  if (seg.forwardCoord == null) {\n    // not already computed\n    if (!forwardSegs.length) {\n      // if there are no forward segments, this segment should butt up against the edge\n      seg.forwardCoord = 1;\n    } else {\n      // sort highest pressure first\n      sortForwardSegs(forwardSegs, eventOrderSpecs); // this segment's forwardCoord will be calculated from the backwardCoord of the\n      // highest-pressure forward segment.\n\n      computeSegForwardBack(forwardSegs[0], seriesBackwardPressure + 1, seriesBackwardCoord, eventOrderSpecs);\n      seg.forwardCoord = forwardSegs[0].backwardCoord;\n    } // calculate the backwardCoord from the forwardCoord. consider the series\n\n\n    seg.backwardCoord = seg.forwardCoord - (seg.forwardCoord - seriesBackwardCoord) / ( // available width for series\n    seriesBackwardPressure + 1); // # of segments in the series\n    // use this segment's coordinates to computed the coordinates of the less-pressurized\n    // forward segments\n\n    for (i = 0; i < forwardSegs.length; i += 1) {\n      computeSegForwardBack(forwardSegs[i], 0, seg.forwardCoord, eventOrderSpecs);\n    }\n  }\n}\n\nfunction sortForwardSegs(forwardSegs, eventOrderSpecs) {\n  var objs = forwardSegs.map(buildTimeGridSegCompareObj);\n  var specs = [// put higher-pressure first\n  {\n    field: 'forwardPressure',\n    order: -1\n  }, // put segments that are closer to initial edge first (and favor ones with no coords yet)\n  {\n    field: 'backwardCoord',\n    order: 1\n  }].concat(eventOrderSpecs);\n  objs.sort(function (obj0, obj1) {\n    return compareByFieldSpecs(obj0, obj1, specs);\n  });\n  return objs.map(function (c) {\n    return c._seg;\n  });\n}\n\nfunction buildTimeGridSegCompareObj(seg) {\n  var obj = buildSegCompareObj(seg);\n  obj.forwardPressure = seg.forwardPressure;\n  obj.backwardCoord = seg.backwardCoord;\n  return obj;\n}\n\nvar DEFAULT_TIME_FORMAT = createFormatter({\n  hour: 'numeric',\n  minute: '2-digit',\n  meridiem: false\n});\n\nvar TimeColEvent =\n/** @class */\nfunction (_super) {\n  __extends(TimeColEvent, _super);\n\n  function TimeColEvent() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TimeColEvent.prototype.render = function () {\n    var classNames = ['fc-timegrid-event', 'fc-v-event'];\n\n    if (this.props.isCondensed) {\n      classNames.push('fc-timegrid-event-condensed');\n    }\n\n    return createElement(StandardEvent, __assign({}, this.props, {\n      defaultTimeFormat: DEFAULT_TIME_FORMAT,\n      extraClassNames: classNames\n    }));\n  };\n\n  return TimeColEvent;\n}(BaseComponent);\n\nvar TimeColMisc =\n/** @class */\nfunction (_super) {\n  __extends(TimeColMisc, _super);\n\n  function TimeColMisc() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TimeColMisc.prototype.render = function () {\n    var props = this.props;\n    return createElement(DayCellContent, {\n      date: props.date,\n      dateProfile: props.dateProfile,\n      todayRange: props.todayRange,\n      extraHookProps: props.extraHookProps\n    }, function (innerElRef, innerContent) {\n      return innerContent && createElement(\"div\", {\n        className: \"fc-timegrid-col-misc\",\n        ref: innerElRef\n      }, innerContent);\n    });\n  };\n\n  return TimeColMisc;\n}(BaseComponent);\n\nconfig.timeGridEventCondensedHeight = 30;\n\nvar TimeCol =\n/** @class */\nfunction (_super) {\n  __extends(TimeCol, _super);\n\n  function TimeCol() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  TimeCol.prototype.render = function () {\n    var _this = this;\n\n    var _a = this,\n        props = _a.props,\n        context = _a.context;\n\n    var isSelectMirror = context.options.selectMirror;\n    var mirrorSegs = props.eventDrag && props.eventDrag.segs || props.eventResize && props.eventResize.segs || isSelectMirror && props.dateSelectionSegs || [];\n    var interactionAffectedInstances = // TODO: messy way to compute this\n    props.eventDrag && props.eventDrag.affectedInstances || props.eventResize && props.eventResize.affectedInstances || {};\n    return createElement(DayCellRoot, {\n      elRef: props.elRef,\n      date: props.date,\n      dateProfile: props.dateProfile,\n      todayRange: props.todayRange,\n      extraHookProps: props.extraHookProps\n    }, function (rootElRef, classNames, dataAttrs) {\n      return createElement(\"td\", __assign({\n        ref: rootElRef,\n        className: ['fc-timegrid-col'].concat(classNames, props.extraClassNames || []).join(' ')\n      }, dataAttrs, props.extraDataAttrs), createElement(\"div\", {\n        className: \"fc-timegrid-col-frame\"\n      }, createElement(\"div\", {\n        className: \"fc-timegrid-col-bg\"\n      }, _this.renderFillSegs(props.businessHourSegs, 'non-business'), _this.renderFillSegs(props.bgEventSegs, 'bg-event'), _this.renderFillSegs(props.dateSelectionSegs, 'highlight')), createElement(\"div\", {\n        className: \"fc-timegrid-col-events\"\n      }, _this.renderFgSegs(props.fgEventSegs, interactionAffectedInstances)), createElement(\"div\", {\n        className: \"fc-timegrid-col-events\"\n      }, _this.renderFgSegs(mirrorSegs, {}, Boolean(props.eventDrag), Boolean(props.eventResize), Boolean(isSelectMirror))), createElement(\"div\", {\n        className: \"fc-timegrid-now-indicator-container\"\n      }, _this.renderNowIndicator(props.nowIndicatorSegs)), createElement(TimeColMisc, {\n        date: props.date,\n        dateProfile: props.dateProfile,\n        todayRange: props.todayRange,\n        extraHookProps: props.extraHookProps\n      })));\n    });\n  };\n\n  TimeCol.prototype.renderFgSegs = function (segs, segIsInvisible, isDragging, isResizing, isDateSelecting) {\n    var props = this.props;\n\n    if (props.forPrint) {\n      return this.renderPrintFgSegs(segs);\n    }\n\n    if (props.slatCoords) {\n      return this.renderPositionedFgSegs(segs, segIsInvisible, isDragging, isResizing, isDateSelecting);\n    }\n\n    return null;\n  };\n\n  TimeCol.prototype.renderPrintFgSegs = function (segs) {\n    var _a = this,\n        props = _a.props,\n        context = _a.context; // not DRY\n\n\n    segs = sortEventSegs(segs, context.options.eventOrder);\n    return segs.map(function (seg) {\n      return createElement(\"div\", {\n        className: \"fc-timegrid-event-harness\",\n        key: seg.eventRange.instance.instanceId\n      }, createElement(TimeColEvent, __assign({\n        seg: seg,\n        isDragging: false,\n        isResizing: false,\n        isDateSelecting: false,\n        isSelected: false,\n        isCondensed: false\n      }, getSegMeta(seg, props.todayRange, props.nowDate))));\n    });\n  };\n\n  TimeCol.prototype.renderPositionedFgSegs = function (segs, segIsInvisible, isDragging, isResizing, isDateSelecting) {\n    var _this = this;\n\n    var _a = this,\n        context = _a.context,\n        props = _a.props; // assigns TO THE SEGS THEMSELVES\n    // also, receives resorted array\n\n\n    segs = computeSegCoords(segs, props.date, props.slatCoords, context.options.eventMinHeight, context.options.eventOrder);\n    return segs.map(function (seg) {\n      var instanceId = seg.eventRange.instance.instanceId;\n      var isMirror = isDragging || isResizing || isDateSelecting;\n      var positionCss = isMirror // will span entire column width\n      // also, won't assign z-index, which is good, fc-event-mirror will overpower other harnesses\n      ? __assign({\n        left: 0,\n        right: 0\n      }, _this.computeSegTopBottomCss(seg)) : _this.computeFgSegPositionCss(seg);\n      return createElement(\"div\", {\n        className: 'fc-timegrid-event-harness' + (seg.level > 0 ? ' fc-timegrid-event-harness-inset' : ''),\n        key: instanceId,\n        style: __assign({\n          visibility: segIsInvisible[instanceId] ? 'hidden' : ''\n        }, positionCss)\n      }, createElement(TimeColEvent, __assign({\n        seg: seg,\n        isDragging: isDragging,\n        isResizing: isResizing,\n        isDateSelecting: isDateSelecting,\n        isSelected: instanceId === props.eventSelection,\n        isCondensed: seg.bottom - seg.top < config.timeGridEventCondensedHeight\n      }, getSegMeta(seg, props.todayRange, props.nowDate))));\n    });\n  };\n\n  TimeCol.prototype.renderFillSegs = function (segs, fillType) {\n    var _this = this;\n\n    var _a = this,\n        context = _a.context,\n        props = _a.props;\n\n    if (!props.slatCoords) {\n      return null;\n    } // BAD: assigns TO THE SEGS THEMSELVES\n\n\n    computeSegVerticals(segs, props.date, props.slatCoords, context.options.eventMinHeight);\n    var children = segs.map(function (seg) {\n      return createElement(\"div\", {\n        key: buildEventRangeKey(seg.eventRange),\n        className: \"fc-timegrid-bg-harness\",\n        style: _this.computeSegTopBottomCss(seg)\n      }, fillType === 'bg-event' ? createElement(BgEvent, __assign({\n        seg: seg\n      }, getSegMeta(seg, props.todayRange, props.nowDate))) : renderFill(fillType));\n    });\n    return createElement(Fragment, null, children);\n  };\n\n  TimeCol.prototype.renderNowIndicator = function (segs) {\n    var _a = this.props,\n        slatCoords = _a.slatCoords,\n        date = _a.date;\n\n    if (!slatCoords) {\n      return null;\n    }\n\n    return segs.map(function (seg, i) {\n      return createElement(NowIndicatorRoot, {\n        isAxis: false,\n        date: date,\n        // key doesn't matter. will only ever be one\n        key: i\n      }, function (rootElRef, classNames, innerElRef, innerContent) {\n        return createElement(\"div\", {\n          ref: rootElRef,\n          className: ['fc-timegrid-now-indicator-line'].concat(classNames).join(' '),\n          style: {\n            top: slatCoords.computeDateTop(seg.start, date)\n          }\n        }, innerContent);\n      });\n    });\n  };\n\n  TimeCol.prototype.computeFgSegPositionCss = function (seg) {\n    var _a = this.context,\n        isRtl = _a.isRtl,\n        options = _a.options;\n    var shouldOverlap = options.slotEventOverlap;\n    var backwardCoord = seg.backwardCoord; // the left side if LTR. the right side if RTL. floating-point\n\n    var forwardCoord = seg.forwardCoord; // the right side if LTR. the left side if RTL. floating-point\n\n    var left; // amount of space from left edge, a fraction of the total width\n\n    var right; // amount of space from right edge, a fraction of the total width\n\n    if (shouldOverlap) {\n      // double the width, but don't go beyond the maximum forward coordinate (1.0)\n      forwardCoord = Math.min(1, backwardCoord + (forwardCoord - backwardCoord) * 2);\n    }\n\n    if (isRtl) {\n      left = 1 - forwardCoord;\n      right = backwardCoord;\n    } else {\n      left = backwardCoord;\n      right = 1 - forwardCoord;\n    }\n\n    var props = {\n      zIndex: seg.level + 1,\n      left: left * 100 + '%',\n      right: right * 100 + '%'\n    };\n\n    if (shouldOverlap && seg.forwardPressure) {\n      // add padding to the edge so that forward stacked events don't cover the resizer's icon\n      props[isRtl ? 'marginLeft' : 'marginRight'] = 10 * 2; // 10 is a guesstimate of the icon's width\n    }\n\n    return __assign(__assign({}, props), this.computeSegTopBottomCss(seg));\n  };\n\n  TimeCol.prototype.computeSegTopBottomCss = function (seg) {\n    return {\n      top: seg.top,\n      bottom: -seg.bottom\n    };\n  };\n\n  return TimeCol;\n}(BaseComponent);\n\nvar TimeColsContent =\n/** @class */\nfunction (_super) {\n  __extends(TimeColsContent, _super);\n\n  function TimeColsContent() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.splitFgEventSegs = memoize(splitSegsByCol);\n    _this.splitBgEventSegs = memoize(splitSegsByCol);\n    _this.splitBusinessHourSegs = memoize(splitSegsByCol);\n    _this.splitNowIndicatorSegs = memoize(splitSegsByCol);\n    _this.splitDateSelectionSegs = memoize(splitSegsByCol);\n    _this.splitEventDrag = memoize(splitInteractionByCol);\n    _this.splitEventResize = memoize(splitInteractionByCol);\n    _this.rootElRef = createRef();\n    _this.cellElRefs = new RefMap();\n    return _this;\n  }\n\n  TimeColsContent.prototype.render = function () {\n    var _this = this;\n\n    var _a = this,\n        props = _a.props,\n        context = _a.context;\n\n    var nowIndicatorTop = context.options.nowIndicator && props.slatCoords && props.slatCoords.safeComputeTop(props.nowDate); // might return void\n\n    var colCnt = props.cells.length;\n    var fgEventSegsByRow = this.splitFgEventSegs(props.fgEventSegs, colCnt);\n    var bgEventSegsByRow = this.splitBgEventSegs(props.bgEventSegs, colCnt);\n    var businessHourSegsByRow = this.splitBusinessHourSegs(props.businessHourSegs, colCnt);\n    var nowIndicatorSegsByRow = this.splitNowIndicatorSegs(props.nowIndicatorSegs, colCnt);\n    var dateSelectionSegsByRow = this.splitDateSelectionSegs(props.dateSelectionSegs, colCnt);\n    var eventDragByRow = this.splitEventDrag(props.eventDrag, colCnt);\n    var eventResizeByRow = this.splitEventResize(props.eventResize, colCnt);\n    return createElement(\"div\", {\n      className: \"fc-timegrid-cols\",\n      ref: this.rootElRef\n    }, createElement(\"table\", {\n      style: {\n        minWidth: props.tableMinWidth,\n        width: props.clientWidth\n      }\n    }, props.tableColGroupNode, createElement(\"tbody\", null, createElement(\"tr\", null, props.axis && createElement(\"td\", {\n      className: \"fc-timegrid-col fc-timegrid-axis\"\n    }, createElement(\"div\", {\n      className: \"fc-timegrid-col-frame\"\n    }, createElement(\"div\", {\n      className: \"fc-timegrid-now-indicator-container\"\n    }, typeof nowIndicatorTop === 'number' && createElement(NowIndicatorRoot, {\n      isAxis: true,\n      date: props.nowDate\n    }, function (rootElRef, classNames, innerElRef, innerContent) {\n      return createElement(\"div\", {\n        ref: rootElRef,\n        className: ['fc-timegrid-now-indicator-arrow'].concat(classNames).join(' '),\n        style: {\n          top: nowIndicatorTop\n        }\n      }, innerContent);\n    })))), props.cells.map(function (cell, i) {\n      return createElement(TimeCol, {\n        key: cell.key,\n        elRef: _this.cellElRefs.createRef(cell.key),\n        dateProfile: props.dateProfile,\n        date: cell.date,\n        nowDate: props.nowDate,\n        todayRange: props.todayRange,\n        extraHookProps: cell.extraHookProps,\n        extraDataAttrs: cell.extraDataAttrs,\n        extraClassNames: cell.extraClassNames,\n        fgEventSegs: fgEventSegsByRow[i],\n        bgEventSegs: bgEventSegsByRow[i],\n        businessHourSegs: businessHourSegsByRow[i],\n        nowIndicatorSegs: nowIndicatorSegsByRow[i],\n        dateSelectionSegs: dateSelectionSegsByRow[i],\n        eventDrag: eventDragByRow[i],\n        eventResize: eventResizeByRow[i],\n        slatCoords: props.slatCoords,\n        eventSelection: props.eventSelection,\n        forPrint: props.forPrint\n      });\n    })))));\n  };\n\n  TimeColsContent.prototype.componentDidMount = function () {\n    this.updateCoords();\n  };\n\n  TimeColsContent.prototype.componentDidUpdate = function () {\n    this.updateCoords();\n  };\n\n  TimeColsContent.prototype.updateCoords = function () {\n    var props = this.props;\n\n    if (props.onColCoords && props.clientWidth !== null // means sizing has stabilized\n    ) {\n        props.onColCoords(new PositionCache(this.rootElRef.current, collectCellEls(this.cellElRefs.currentMap, props.cells), true, // horizontal\n        false));\n      }\n  };\n\n  return TimeColsContent;\n}(BaseComponent);\n\nfunction collectCellEls(elMap, cells) {\n  return cells.map(function (cell) {\n    return elMap[cell.key];\n  });\n}\n/* A component that renders one or more columns of vertical time slots\n----------------------------------------------------------------------------------------------------------------------*/\n\n\nvar TimeCols =\n/** @class */\nfunction (_super) {\n  __extends(TimeCols, _super);\n\n  function TimeCols() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.processSlotOptions = memoize(processSlotOptions);\n    _this.state = {\n      slatCoords: null\n    };\n\n    _this.handleScrollRequest = function (request) {\n      var onScrollTopRequest = _this.props.onScrollTopRequest;\n      var slatCoords = _this.state.slatCoords;\n\n      if (onScrollTopRequest && slatCoords) {\n        if (request.time) {\n          var top_1 = slatCoords.computeTimeTop(request.time);\n          top_1 = Math.ceil(top_1); // zoom can give weird floating-point values. rather scroll a little bit further\n\n          if (top_1) {\n            top_1 += 1; // to overcome top border that slots beyond the first have. looks better\n          }\n\n          onScrollTopRequest(top_1);\n        }\n\n        return true;\n      }\n\n      return false;\n    };\n\n    _this.handleColCoords = function (colCoords) {\n      _this.colCoords = colCoords;\n    };\n\n    _this.handleSlatCoords = function (slatCoords) {\n      _this.setState({\n        slatCoords: slatCoords\n      });\n\n      if (_this.props.onSlatCoords) {\n        _this.props.onSlatCoords(slatCoords);\n      }\n    };\n\n    return _this;\n  }\n\n  TimeCols.prototype.render = function () {\n    var _a = this,\n        props = _a.props,\n        state = _a.state;\n\n    return createElement(\"div\", {\n      className: \"fc-timegrid-body\",\n      ref: props.rootElRef,\n      style: {\n        // these props are important to give this wrapper correct dimensions for interactions\n        // TODO: if we set it here, can we avoid giving to inner tables?\n        width: props.clientWidth,\n        minWidth: props.tableMinWidth\n      }\n    }, createElement(TimeColsSlats, {\n      axis: props.axis,\n      dateProfile: props.dateProfile,\n      slatMetas: props.slatMetas,\n      clientWidth: props.clientWidth,\n      minHeight: props.expandRows ? props.clientHeight : '',\n      tableMinWidth: props.tableMinWidth,\n      tableColGroupNode: props.axis ? props.tableColGroupNode : null\n      /* axis depends on the colgroup's shrinking */\n      ,\n      onCoords: this.handleSlatCoords\n    }), createElement(TimeColsContent, {\n      cells: props.cells,\n      axis: props.axis,\n      dateProfile: props.dateProfile,\n      businessHourSegs: props.businessHourSegs,\n      bgEventSegs: props.bgEventSegs,\n      fgEventSegs: props.fgEventSegs,\n      dateSelectionSegs: props.dateSelectionSegs,\n      eventSelection: props.eventSelection,\n      eventDrag: props.eventDrag,\n      eventResize: props.eventResize,\n      todayRange: props.todayRange,\n      nowDate: props.nowDate,\n      nowIndicatorSegs: props.nowIndicatorSegs,\n      clientWidth: props.clientWidth,\n      tableMinWidth: props.tableMinWidth,\n      tableColGroupNode: props.tableColGroupNode,\n      slatCoords: state.slatCoords,\n      onColCoords: this.handleColCoords,\n      forPrint: props.forPrint\n    }));\n  };\n\n  TimeCols.prototype.componentDidMount = function () {\n    this.scrollResponder = this.context.createScrollResponder(this.handleScrollRequest);\n  };\n\n  TimeCols.prototype.componentDidUpdate = function (prevProps) {\n    this.scrollResponder.update(prevProps.dateProfile !== this.props.dateProfile);\n  };\n\n  TimeCols.prototype.componentWillUnmount = function () {\n    this.scrollResponder.detach();\n  };\n\n  TimeCols.prototype.positionToHit = function (positionLeft, positionTop) {\n    var _a = this.context,\n        dateEnv = _a.dateEnv,\n        options = _a.options;\n    var colCoords = this.colCoords;\n    var dateProfile = this.props.dateProfile;\n    var slatCoords = this.state.slatCoords;\n\n    var _b = this.processSlotOptions(this.props.slotDuration, options.snapDuration),\n        snapDuration = _b.snapDuration,\n        snapsPerSlot = _b.snapsPerSlot;\n\n    var colIndex = colCoords.leftToIndex(positionLeft);\n    var slatIndex = slatCoords.positions.topToIndex(positionTop);\n\n    if (colIndex != null && slatIndex != null) {\n      var slatTop = slatCoords.positions.tops[slatIndex];\n      var slatHeight = slatCoords.positions.getHeight(slatIndex);\n      var partial = (positionTop - slatTop) / slatHeight; // floating point number between 0 and 1\n\n      var localSnapIndex = Math.floor(partial * snapsPerSlot); // the snap # relative to start of slat\n\n      var snapIndex = slatIndex * snapsPerSlot + localSnapIndex;\n      var dayDate = this.props.cells[colIndex].date;\n      var time = addDurations(dateProfile.slotMinTime, multiplyDuration(snapDuration, snapIndex));\n      var start = dateEnv.add(dayDate, time);\n      var end = dateEnv.add(start, snapDuration);\n      return {\n        col: colIndex,\n        dateSpan: {\n          range: {\n            start: start,\n            end: end\n          },\n          allDay: false\n        },\n        dayEl: colCoords.els[colIndex],\n        relativeRect: {\n          left: colCoords.lefts[colIndex],\n          right: colCoords.rights[colIndex],\n          top: slatTop,\n          bottom: slatTop + slatHeight\n        }\n      };\n    }\n\n    return null;\n  };\n\n  return TimeCols;\n}(BaseComponent);\n\nfunction processSlotOptions(slotDuration, snapDurationOverride) {\n  var snapDuration = snapDurationOverride || slotDuration;\n  var snapsPerSlot = wholeDivideDurations(slotDuration, snapDuration);\n\n  if (snapsPerSlot === null) {\n    snapDuration = slotDuration;\n    snapsPerSlot = 1; // TODO: say warning?\n  }\n\n  return {\n    snapDuration: snapDuration,\n    snapsPerSlot: snapsPerSlot\n  };\n}\n\nvar DayTimeColsSlicer =\n/** @class */\nfunction (_super) {\n  __extends(DayTimeColsSlicer, _super);\n\n  function DayTimeColsSlicer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  DayTimeColsSlicer.prototype.sliceRange = function (range, dayRanges) {\n    var segs = [];\n\n    for (var col = 0; col < dayRanges.length; col += 1) {\n      var segRange = intersectRanges(range, dayRanges[col]);\n\n      if (segRange) {\n        segs.push({\n          start: segRange.start,\n          end: segRange.end,\n          isStart: segRange.start.valueOf() === range.start.valueOf(),\n          isEnd: segRange.end.valueOf() === range.end.valueOf(),\n          col: col\n        });\n      }\n    }\n\n    return segs;\n  };\n\n  return DayTimeColsSlicer;\n}(Slicer);\n\nvar DayTimeCols =\n/** @class */\nfunction (_super) {\n  __extends(DayTimeCols, _super);\n\n  function DayTimeCols() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.buildDayRanges = memoize(buildDayRanges);\n    _this.slicer = new DayTimeColsSlicer();\n    _this.timeColsRef = createRef();\n\n    _this.handleRootEl = function (rootEl) {\n      if (rootEl) {\n        _this.context.registerInteractiveComponent(_this, {\n          el: rootEl\n        });\n      } else {\n        _this.context.unregisterInteractiveComponent(_this);\n      }\n    };\n\n    return _this;\n  }\n\n  DayTimeCols.prototype.render = function () {\n    var _this = this;\n\n    var _a = this,\n        props = _a.props,\n        context = _a.context;\n\n    var dateProfile = props.dateProfile,\n        dayTableModel = props.dayTableModel;\n    var isNowIndicator = context.options.nowIndicator;\n    var dayRanges = this.buildDayRanges(dayTableModel, dateProfile, context.dateEnv); // give it the first row of cells\n    // TODO: would move this further down hierarchy, but sliceNowDate needs it\n\n    return createElement(NowTimer, {\n      unit: isNowIndicator ? 'minute' : 'day'\n    }, function (nowDate, todayRange) {\n      return createElement(TimeCols, __assign({\n        ref: _this.timeColsRef,\n        rootElRef: _this.handleRootEl\n      }, _this.slicer.sliceProps(props, dateProfile, null, context, dayRanges), {\n        forPrint: props.forPrint,\n        axis: props.axis,\n        dateProfile: dateProfile,\n        slatMetas: props.slatMetas,\n        slotDuration: props.slotDuration,\n        cells: dayTableModel.cells[0],\n        tableColGroupNode: props.tableColGroupNode,\n        tableMinWidth: props.tableMinWidth,\n        clientWidth: props.clientWidth,\n        clientHeight: props.clientHeight,\n        expandRows: props.expandRows,\n        nowDate: nowDate,\n        nowIndicatorSegs: isNowIndicator && _this.slicer.sliceNowDate(nowDate, context, dayRanges),\n        todayRange: todayRange,\n        onScrollTopRequest: props.onScrollTopRequest,\n        onSlatCoords: props.onSlatCoords\n      }));\n    });\n  };\n\n  DayTimeCols.prototype.queryHit = function (positionLeft, positionTop) {\n    var rawHit = this.timeColsRef.current.positionToHit(positionLeft, positionTop);\n\n    if (rawHit) {\n      return {\n        component: this,\n        dateSpan: rawHit.dateSpan,\n        dayEl: rawHit.dayEl,\n        rect: {\n          left: rawHit.relativeRect.left,\n          right: rawHit.relativeRect.right,\n          top: rawHit.relativeRect.top,\n          bottom: rawHit.relativeRect.bottom\n        },\n        layer: 0\n      };\n    }\n\n    return null;\n  };\n\n  return DayTimeCols;\n}(DateComponent);\n\nfunction buildDayRanges(dayTableModel, dateProfile, dateEnv) {\n  var ranges = [];\n\n  for (var _i = 0, _a = dayTableModel.headerDates; _i < _a.length; _i++) {\n    var date = _a[_i];\n    ranges.push({\n      start: dateEnv.add(date, dateProfile.slotMinTime),\n      end: dateEnv.add(date, dateProfile.slotMaxTime)\n    });\n  }\n\n  return ranges;\n} // potential nice values for the slot-duration and interval-duration\n// from largest to smallest\n\n\nvar STOCK_SUB_DURATIONS = [{\n  hours: 1\n}, {\n  minutes: 30\n}, {\n  minutes: 15\n}, {\n  seconds: 30\n}, {\n  seconds: 15\n}];\n\nfunction buildSlatMetas(slotMinTime, slotMaxTime, explicitLabelInterval, slotDuration, dateEnv) {\n  var dayStart = new Date(0);\n  var slatTime = slotMinTime;\n  var slatIterator = createDuration(0);\n  var labelInterval = explicitLabelInterval || computeLabelInterval(slotDuration);\n  var metas = [];\n\n  while (asRoughMs(slatTime) < asRoughMs(slotMaxTime)) {\n    var date = dateEnv.add(dayStart, slatTime);\n    var isLabeled = wholeDivideDurations(slatIterator, labelInterval) !== null;\n    metas.push({\n      date: date,\n      time: slatTime,\n      key: date.toISOString(),\n      isoTimeStr: formatIsoTimeString(date),\n      isLabeled: isLabeled\n    });\n    slatTime = addDurations(slatTime, slotDuration);\n    slatIterator = addDurations(slatIterator, slotDuration);\n  }\n\n  return metas;\n} // Computes an automatic value for slotLabelInterval\n\n\nfunction computeLabelInterval(slotDuration) {\n  var i;\n  var labelInterval;\n  var slotsPerLabel; // find the smallest stock label interval that results in more than one slots-per-label\n\n  for (i = STOCK_SUB_DURATIONS.length - 1; i >= 0; i -= 1) {\n    labelInterval = createDuration(STOCK_SUB_DURATIONS[i]);\n    slotsPerLabel = wholeDivideDurations(labelInterval, slotDuration);\n\n    if (slotsPerLabel !== null && slotsPerLabel > 1) {\n      return labelInterval;\n    }\n  }\n\n  return slotDuration; // fall back\n}\n\nvar DayTimeColsView =\n/** @class */\nfunction (_super) {\n  __extends(DayTimeColsView, _super);\n\n  function DayTimeColsView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.buildTimeColsModel = memoize(buildTimeColsModel);\n    _this.buildSlatMetas = memoize(buildSlatMetas);\n    return _this;\n  }\n\n  DayTimeColsView.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.context,\n        options = _a.options,\n        dateEnv = _a.dateEnv,\n        dateProfileGenerator = _a.dateProfileGenerator;\n    var props = this.props;\n    var dateProfile = props.dateProfile;\n    var dayTableModel = this.buildTimeColsModel(dateProfile, dateProfileGenerator);\n    var splitProps = this.allDaySplitter.splitProps(props);\n    var slatMetas = this.buildSlatMetas(dateProfile.slotMinTime, dateProfile.slotMaxTime, options.slotLabelInterval, options.slotDuration, dateEnv);\n    var dayMinWidth = options.dayMinWidth;\n    var hasAttachedAxis = !dayMinWidth;\n    var hasDetachedAxis = dayMinWidth;\n    var headerContent = options.dayHeaders && createElement(DayHeader, {\n      dates: dayTableModel.headerDates,\n      dateProfile: dateProfile,\n      datesRepDistinctDays: true,\n      renderIntro: hasAttachedAxis ? this.renderHeadAxis : null\n    });\n\n    var allDayContent = options.allDaySlot !== false && function (contentArg) {\n      return createElement(DayTable, __assign({}, splitProps.allDay, {\n        dateProfile: dateProfile,\n        dayTableModel: dayTableModel,\n        nextDayThreshold: options.nextDayThreshold,\n        tableMinWidth: contentArg.tableMinWidth,\n        colGroupNode: contentArg.tableColGroupNode,\n        renderRowIntro: hasAttachedAxis ? _this.renderTableRowAxis : null,\n        showWeekNumbers: false,\n        expandRows: false,\n        headerAlignElRef: _this.headerElRef,\n        clientWidth: contentArg.clientWidth,\n        clientHeight: contentArg.clientHeight,\n        forPrint: props.forPrint\n      }, _this.getAllDayMaxEventProps()));\n    };\n\n    var timeGridContent = function timeGridContent(contentArg) {\n      return createElement(DayTimeCols, __assign({}, splitProps.timed, {\n        dayTableModel: dayTableModel,\n        dateProfile: dateProfile,\n        axis: hasAttachedAxis,\n        slotDuration: options.slotDuration,\n        slatMetas: slatMetas,\n        forPrint: props.forPrint,\n        tableColGroupNode: contentArg.tableColGroupNode,\n        tableMinWidth: contentArg.tableMinWidth,\n        clientWidth: contentArg.clientWidth,\n        clientHeight: contentArg.clientHeight,\n        onSlatCoords: _this.handleSlatCoords,\n        expandRows: contentArg.expandRows,\n        onScrollTopRequest: _this.handleScrollTopRequest\n      }));\n    };\n\n    return hasDetachedAxis ? this.renderHScrollLayout(headerContent, allDayContent, timeGridContent, dayTableModel.colCnt, dayMinWidth, slatMetas, this.state.slatCoords) : this.renderSimpleLayout(headerContent, allDayContent, timeGridContent);\n  };\n\n  return DayTimeColsView;\n}(TimeColsView);\n\nfunction buildTimeColsModel(dateProfile, dateProfileGenerator) {\n  var daySeries = new DaySeriesModel(dateProfile.renderRange, dateProfileGenerator);\n  return new DayTableModel(daySeries, false);\n}\n\nvar OPTION_REFINERS = {\n  allDaySlot: Boolean\n};\nvar main = createPlugin({\n  initialView: 'timeGridWeek',\n  optionRefiners: OPTION_REFINERS,\n  views: {\n    timeGrid: {\n      component: DayTimeColsView,\n      usesMinMaxTime: true,\n      allDaySlot: true,\n      slotDuration: '00:30:00',\n      slotEventOverlap: true\n    },\n    timeGridDay: {\n      type: 'timeGrid',\n      duration: {\n        days: 1\n      }\n    },\n    timeGridWeek: {\n      type: 'timeGrid',\n      duration: {\n        weeks: 1\n      }\n    }\n  }\n});\nexport default main;\nexport { DayTimeCols, DayTimeColsSlicer, DayTimeColsView, TimeCols, TimeColsSlatsCoords, TimeColsView, buildDayRanges, buildSlatMetas, buildTimeColsModel };","/*!\nFullCalendar v5.5.0\nDocs & License: https://fullcalendar.io/\n(c) 2020 Adam Shaw\n*/\nimport { __assign } from 'tslib';\nimport { identity, createPlugin, requestJson, addDays } from '@fullcalendar/common'; // rename this file to options.ts like other packages?\n\nvar OPTION_REFINERS = {\n  googleCalendarApiKey: String\n};\nvar EVENT_SOURCE_REFINERS = {\n  googleCalendarApiKey: String,\n  googleCalendarId: String,\n  googleCalendarApiBase: String,\n  extraParams: identity\n}; // TODO: expose somehow\n\nvar API_BASE = 'https://www.googleapis.com/calendar/v3/calendars';\nvar eventSourceDef = {\n  parseMeta: function parseMeta(refined) {\n    var googleCalendarId = refined.googleCalendarId;\n\n    if (!googleCalendarId && refined.url) {\n      googleCalendarId = parseGoogleCalendarId(refined.url);\n    }\n\n    if (googleCalendarId) {\n      return {\n        googleCalendarId: googleCalendarId,\n        googleCalendarApiKey: refined.googleCalendarApiKey,\n        googleCalendarApiBase: refined.googleCalendarApiBase,\n        extraParams: refined.extraParams\n      };\n    }\n\n    return null;\n  },\n  fetch: function fetch(arg, onSuccess, onFailure) {\n    var _a = arg.context,\n        dateEnv = _a.dateEnv,\n        options = _a.options;\n    var meta = arg.eventSource.meta;\n    var apiKey = meta.googleCalendarApiKey || options.googleCalendarApiKey;\n\n    if (!apiKey) {\n      onFailure({\n        message: 'Specify a googleCalendarApiKey. See http://fullcalendar.io/docs/google_calendar/'\n      });\n    } else {\n      var url = buildUrl(meta); // TODO: make DRY with json-feed-event-source\n\n      var extraParams = meta.extraParams;\n      var extraParamsObj = typeof extraParams === 'function' ? extraParams() : extraParams;\n      var requestParams_1 = buildRequestParams(arg.range, apiKey, extraParamsObj, dateEnv);\n      requestJson('GET', url, requestParams_1, function (body, xhr) {\n        if (body.error) {\n          onFailure({\n            message: 'Google Calendar API: ' + body.error.message,\n            errors: body.error.errors,\n            xhr: xhr\n          });\n        } else {\n          onSuccess({\n            rawEvents: gcalItemsToRawEventDefs(body.items, requestParams_1.timeZone),\n            xhr: xhr\n          });\n        }\n      }, function (message, xhr) {\n        onFailure({\n          message: message,\n          xhr: xhr\n        });\n      });\n    }\n  }\n};\n\nfunction parseGoogleCalendarId(url) {\n  var match; // detect if the ID was specified as a single string.\n  // will match calendars like \"asdf1234@calendar.google.com\" in addition to person email calendars.\n\n  if (/^[^/]+@([^/.]+\\.)*(google|googlemail|gmail)\\.com$/.test(url)) {\n    return url;\n  }\n\n  if ((match = /^https:\\/\\/www.googleapis.com\\/calendar\\/v3\\/calendars\\/([^/]*)/.exec(url)) || (match = /^https?:\\/\\/www.google.com\\/calendar\\/feeds\\/([^/]*)/.exec(url))) {\n    return decodeURIComponent(match[1]);\n  }\n\n  return null;\n}\n\nfunction buildUrl(meta) {\n  var apiBase = meta.googleCalendarApiBase;\n\n  if (!apiBase) {\n    apiBase = API_BASE;\n  }\n\n  return apiBase + '/' + encodeURIComponent(meta.googleCalendarId) + '/events';\n}\n\nfunction buildRequestParams(range, apiKey, extraParams, dateEnv) {\n  var params;\n  var startStr;\n  var endStr;\n\n  if (dateEnv.canComputeOffset) {\n    // strings will naturally have offsets, which GCal needs\n    startStr = dateEnv.formatIso(range.start);\n    endStr = dateEnv.formatIso(range.end);\n  } else {\n    // when timezone isn't known, we don't know what the UTC offset should be, so ask for +/- 1 day\n    // from the UTC day-start to guarantee we're getting all the events\n    // (start/end will be UTC-coerced dates, so toISOString is okay)\n    startStr = addDays(range.start, -1).toISOString();\n    endStr = addDays(range.end, 1).toISOString();\n  }\n\n  params = __assign(__assign({}, extraParams || {}), {\n    key: apiKey,\n    timeMin: startStr,\n    timeMax: endStr,\n    singleEvents: true,\n    maxResults: 9999\n  });\n\n  if (dateEnv.timeZone !== 'local') {\n    params.timeZone = dateEnv.timeZone;\n  }\n\n  return params;\n}\n\nfunction gcalItemsToRawEventDefs(items, gcalTimezone) {\n  return items.map(function (item) {\n    return gcalItemToRawEventDef(item, gcalTimezone);\n  });\n}\n\nfunction gcalItemToRawEventDef(item, gcalTimezone) {\n  var url = item.htmlLink || null; // make the URLs for each event show times in the correct timezone\n\n  if (url && gcalTimezone) {\n    url = injectQsComponent(url, 'ctz=' + gcalTimezone);\n  }\n\n  return {\n    id: item.id,\n    title: item.summary,\n    start: item.start.dateTime || item.start.date,\n    end: item.end.dateTime || item.end.date,\n    url: url,\n    location: item.location,\n    description: item.description\n  };\n} // Injects a string like \"arg=value\" into the querystring of a URL\n// TODO: move to a general util file?\n\n\nfunction injectQsComponent(url, component) {\n  // inject it after the querystring but before the fragment\n  return url.replace(/(\\?.*?)?(#|$)/, function (whole, qs, hash) {\n    return (qs ? qs + '&' : '?') + component + hash;\n  });\n}\n\nvar main = createPlugin({\n  eventSourceDefs: [eventSourceDef],\n  optionRefiners: OPTION_REFINERS,\n  eventSourceRefiners: EVENT_SOURCE_REFINERS\n});\nexport default main;","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nexport { _assign as __assign };\nexport function __rest(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\nexport function __param(paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n}\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\nexport function __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\nexport var __createBinding = Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n};\nexport function __exportStar(m, o) {\n  for (var p in m) {\n    if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n  }\n}\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) {\n    ar = ar.concat(__read(arguments[i]));\n  }\n\n  return ar;\n}\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n\n  return r;\n}\n;\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []),\n      i,\n      q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i;\n\n  function verb(n) {\n    if (g[n]) i[n] = function (v) {\n      return new Promise(function (a, b) {\n        q.push([n, v, a, b]) > 1 || resume(n, v);\n      });\n    };\n  }\n\n  function resume(n, v) {\n    try {\n      step(g[n](v));\n    } catch (e) {\n      settle(q[0][3], e);\n    }\n  }\n\n  function step(r) {\n    r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);\n  }\n\n  function fulfill(value) {\n    resume(\"next\", value);\n  }\n\n  function reject(value) {\n    resume(\"throw\", value);\n  }\n\n  function settle(f, v) {\n    if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]);\n  }\n}\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) {\n    throw e;\n  }), verb(\"return\"), i[Symbol.iterator] = function () {\n    return this;\n  }, i;\n\n  function verb(n, f) {\n    i[n] = o[n] ? function (v) {\n      return (p = !p) ? {\n        value: __await(o[n](v)),\n        done: n === \"return\"\n      } : f ? f(v) : v;\n    } : f;\n  }\n}\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator],\n      i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () {\n    return this;\n  }, i);\n\n  function verb(n) {\n    i[n] = o[n] && function (v) {\n      return new Promise(function (resolve, reject) {\n        v = o[n](v), settle(resolve, reject, v.done, v.value);\n      });\n    };\n  }\n\n  function settle(resolve, reject, d, v) {\n    Promise.resolve(v).then(function (v) {\n      resolve({\n        value: v,\n        done: d\n      });\n    }, reject);\n  }\n}\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) {\n    Object.defineProperty(cooked, \"raw\", {\n      value: raw\n    });\n  } else {\n    cooked.raw = raw;\n  }\n\n  return cooked;\n}\n;\n\nvar __setModuleDefault = Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n}\nexport function __importDefault(mod) {\n  return mod && mod.__esModule ? mod : {\n    default: mod\n  };\n}\nexport function __classPrivateFieldGet(receiver, privateMap) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return privateMap.get(receiver);\n}\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to set private field on non-instance\");\n  }\n\n  privateMap.set(receiver, value);\n  return value;\n}","import styled, { css, keyframes } from 'styled-components';\nimport { baseStyle, backgroundStyle, breakpointStyle, parseMetricToNum } from '../../utils';\nimport { defaultProps } from '../../default-props';\nvar hiddenPositionStyle = css([\"left:-100%;right:100%;z-index:-1;position:fixed;\"]);\nvar desktopLayerStyle = \"\\n  position: fixed;\\n  top: 0px;\\n  left: 0px;\\n  right: 0px;\\n  bottom: 0px;\\n\";\nvar responsiveLayerStyle = \"\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  min-height: 100vh;\\n\";\nvar StyledLayer = styled.div.withConfig({\n  displayName: \"StyledLayer\",\n  componentId: \"rmtehz-0\"\n})([\"\", \" background:transparent;position:relative;z-index:\", \";pointer-events:none;outline:none;\", \" \", \";\"], baseStyle, function (props) {\n  return props.theme.layer.zIndex;\n}, function (props) {\n  if (props.position === 'hidden') {\n    return hiddenPositionStyle;\n  }\n\n  var styles = [];\n\n  if (props.targetBounds) {\n    var _props$targetBounds = props.targetBounds,\n        left = _props$targetBounds.left,\n        right = _props$targetBounds.right,\n        top = _props$targetBounds.top,\n        bottom = _props$targetBounds.bottom;\n    styles.push(\"\\n        position: fixed;\\n        top: \" + top + \"px;\\n        left: \" + left + \"px;\\n        right: \" + right + \"px;\\n        bottom: \" + bottom + \"px;\\n      \");\n  } else {\n    styles.push(desktopLayerStyle);\n  }\n\n  if (props.responsive && props.theme.layer.responsiveBreakpoint) {\n    var breakpoint = props.theme.global.breakpoints[props.theme.layer.responsiveBreakpoint];\n    styles.push(breakpointStyle(breakpoint, responsiveLayerStyle));\n  }\n\n  return styles;\n}, function (props) {\n  return props.theme.layer && props.theme.layer.extend;\n});\nStyledLayer.defaultProps = {};\nObject.setPrototypeOf(StyledLayer.defaultProps, defaultProps);\nvar StyledOverlay = styled.div.withConfig({\n  displayName: \"StyledLayer__StyledOverlay\",\n  componentId: \"rmtehz-1\"\n})([\"position:absolute;\", \" top:0px;left:0px;right:0px;bottom:0px;\", \" pointer-events:all;\"], function (props) {\n  if (props.responsive && props.theme.layer.responsiveBreakpoint) {\n    var breakpoint = props.theme.global.breakpoints[props.theme.layer.responsiveBreakpoint];\n    return breakpointStyle(breakpoint, 'position: relative;');\n  }\n\n  return '';\n}, function (props) {\n  return !props.plain && props.theme.layer.overlay.background && backgroundStyle(props.theme.layer.overlay.background, props.theme);\n});\n\nvar getMargin = function getMargin(margin, theme, position) {\n  var axis = position.indexOf('top') !== -1 || position.indexOf('bottom') !== -1 ? 'vertical' : 'horizontal';\n  var marginValue = margin[position] || margin[axis] || margin;\n  var marginApplied = theme.global.edgeSize[marginValue] || marginValue;\n  var marginInTheme = !!theme.global.edgeSize[marginValue];\n  return !marginInTheme && typeof marginValue !== 'string' ? 0 : parseMetricToNum(marginApplied);\n};\n\nvar getBounds = function getBounds(bounds, margin, theme, position) {\n  if (position === void 0) {\n    position = undefined;\n  }\n\n  if (position) {\n    return bounds[position] + getMargin(margin, theme, position);\n  }\n\n  return {\n    bottom: bounds.bottom + getMargin(margin, theme, 'bottom'),\n    // 'bottom-left': getMargin(margin, theme, 'bottom-left'),\n    // 'bottom-right': getMargin(margin, theme, 'bottom-right'),\n    end: bounds.right + getMargin(margin, theme, 'end'),\n    left: bounds.left + getMargin(margin, theme, 'left'),\n    right: bounds.right + getMargin(margin, theme, 'right'),\n    start: bounds.left + getMargin(margin, theme, 'start'),\n    top: bounds.top + getMargin(margin, theme, 'top') // 'top-right': getMargin(margin, theme, 'top-right'),\n    // 'top-left': getMargin(margin, theme, 'top-left'),\n\n  };\n};\n\nvar KEYFRAMES = {\n  center: {\n    vertical: keyframes([\"0%{transform:translateX(-50%) scale(0.8);}100%{transform:translateX(-50%) scale(1);}\"]),\n    horizontal: keyframes([\"0%{transform:translateY(-50%) scale(0.8);}100%{transform:translateY(-50) scale(1);}\"]),\n    \"true\": keyframes([\"0%{transform:scale(0.8);}100%{transform:scale(1);}\"]),\n    \"false\": keyframes([\"0%{transform:translate(-50%,-50%) scale(0.8);}100%{transform:translate(-50%,-50%) scale(1);}\"])\n  },\n  top: {\n    vertical: keyframes([\"0%{transform:translate(-50%,-100%);}100%{transform:translate(-50%,0);}\"]),\n    horizontal: keyframes([\"0%{transform:translateY(-100%);}100%{transform:translateY(0);}\"]),\n    \"true\": keyframes([\"0%{transform:translateY(-100%);}100%{transform:translateY(0);}\"]),\n    \"false\": keyframes([\"0%{transform:translate(-50%,-100%);}100%{transform:translate(-50%,0);}\"])\n  },\n  bottom: {\n    vertical: keyframes([\"0%{transform:translate(-50%,100%);}100%{transform:translate(-50%,0);}\"]),\n    horizontal: keyframes([\"0%{transform:translateY(100%);}100%{transform:translateY(0);}\"]),\n    \"true\": keyframes([\"0%{transform:translateY(100%);}100%{transform:translateY(0);}\"]),\n    \"false\": keyframes([\"0%{transform:translate(-50%,100%);}100%{transform:translate(-50%,0);}\"])\n  },\n  left: {\n    vertical: keyframes([\"0%{transform:translateX(-100%);}100%{transform:translateX(0);}\"]),\n    horizontal: keyframes([\"0%{transform:translate(-100%,-50%);}100%{transform:translate(0,-50%);}\"]),\n    \"true\": keyframes([\"0%{transform:translateX(-100%);}100%{transform:translateX(0);}\"]),\n    \"false\": keyframes([\"0%{transform:translate(-100%,-50%);}100%{transform:translate(0,-50%);}\"])\n  },\n  right: {\n    vertical: keyframes([\"0%{transform:translateX(100%);}100%{transform:translateX(0);}\"]),\n    horizontal: keyframes([\"0%{transform:translate(100%,-50%);}100%{transform:translate(0,-50%);}\"]),\n    \"true\": keyframes([\"0%{transform:translateX(100%);}100%{transform:translateX(0);}\"]),\n    \"false\": keyframes([\"0%{transform:translate(100%,-50%);}100%{transform:translate(0,-50%);}\"])\n  },\n  start: {\n    vertical: keyframes([\"0%{transform:translateX(-100%);}100%{transform:translateX(0);}\"]),\n    horizontal: keyframes([\"0%{transform:translate(-100%,-50%);}100%{transform:translate(0,-50%);}\"]),\n    \"true\": keyframes([\"0%{transform:translateX(-100%);}100%{transform:translateX(0);}\"]),\n    \"false\": keyframes([\"0%{transform:translate(-100%,-50%);}100%{transform:translate(0,-50%);}\"])\n  },\n  end: {\n    vertical: keyframes([\"0%{transform:translateX(100%);}100%{transform:translateX(0);}\"]),\n    horizontal: keyframes([\"0%{transform:translate(100%,-50%);}100%{transform:translate(0,-50%);}\"]),\n    \"true\": keyframes([\"0%{transform:translateX(100%);}100%{transform:translateX(0);}\"]),\n    \"false\": keyframes([\"0%{transform:translate(100%,-50%);}100%{transform:translate(0,-50%);}\"])\n  }\n};\nvar animationDuration = 200;\n\nvar getAnimationStyle = function getAnimationStyle(props, position, full) {\n  var animation = props.animation !== undefined ? props.animation : props.animate;\n  if (animation === undefined) animation = 'slide';\n  var keys;\n\n  if (animation === 'slide' || animation === true) {\n    keys = KEYFRAMES[position][full];\n  } else if (animation === 'fadeIn') {\n    keys = keyframes([\"0%{opacity:0}100%{opacity:1}\"]);\n  }\n\n  return keys ? css([\"animation:\", \" \", \"s ease-in-out forwards;\"], keys, animationDuration / 1000.0) : '';\n}; // POSITIONS combines 'position', 'full', and 'margin' properties, since\n// they are all interdependent.\n// Basically, non-full axes combine 50% position with -50% translation.\n// full axes pin to the window edges offset by any margin.\n// The keyframe animations are included as they are done via translations\n// as well so they must take into account the non-animated positioning.\n\n\nvar POSITIONS = {\n  center: {\n    vertical: function vertical(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:50%;transform:translateX(-50%);\", \"\"], bounds.top, bounds.bottom, function (props) {\n        return getAnimationStyle(props, 'center', 'vertical');\n      });\n    },\n    horizontal: function horizontal(bounds) {\n      return css([\"left:\", \"px;right:\", \"px;top:50%;transform:translateY(-50%);\", \"\"], bounds.left, bounds.right, function (props) {\n        return getAnimationStyle(props, 'center', 'horizontal');\n      });\n    },\n    \"true\": function _true(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:\", \"px;right:\", \"px;\", \"\"], bounds.top, bounds.bottom, bounds.left, bounds.right, function (props) {\n        return getAnimationStyle(props, 'center', 'true');\n      });\n    },\n    \"false\": function _false() {\n      return css([\"top:50%;left:50%;transform:translate(-50%,-50%);\", \"\"], function (props) {\n        return getAnimationStyle(props, 'center', 'false');\n      });\n    }\n  },\n  top: {\n    vertical: function vertical(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:50%;transform:translate(-50%,0%);\", \"\"], bounds.top, bounds.bottom, function (props) {\n        return getAnimationStyle(props, 'top', 'vertical');\n      });\n    },\n    horizontal: function horizontal(bounds) {\n      return css([\"left:\", \"px;right:\", \"px;top:\", \"px;transform:translateY(0);\", \"\"], bounds.left, bounds.right, bounds.top, function (props) {\n        return getAnimationStyle(props, 'top', 'horizontal');\n      });\n    },\n    \"true\": function _true(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:\", \"px;right:\", \"px;transform:translateY(0);\", \"\"], bounds.top, bounds.bottom, bounds.left, bounds.right, function (props) {\n        return getAnimationStyle(props, 'top', 'true');\n      });\n    },\n    \"false\": function _false(bounds) {\n      return css([\"top:\", \"px;left:50%;transform:translate(-50%,0);\", \"\"], bounds.top, function (props) {\n        return getAnimationStyle(props, 'top', 'false');\n      });\n    }\n  },\n  bottom: {\n    vertical: function vertical(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:50%;transform:translate(-50%,0);\", \"\"], bounds.top, bounds.bottom, function (props) {\n        return getAnimationStyle(props, 'bottom', 'vertical');\n      });\n    },\n    horizontal: function horizontal(bounds) {\n      return css([\"left:\", \"px;right:\", \"px;bottom:\", \"px;transform:translateY(0);\", \"\"], bounds.left, bounds.top, bounds.bottom, function (props) {\n        return getAnimationStyle(props, 'bottom', 'horizontal');\n      });\n    },\n    \"true\": function _true(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:\", \"px;right:\", \"px;transform:translateY(0);\", \"\"], bounds.top, bounds.bottom, bounds.left, bounds.right, function (props) {\n        return getAnimationStyle(props, 'bottom', 'true');\n      });\n    },\n    \"false\": function _false(bounds) {\n      return css([\"bottom:\", \"px;left:50%;transform:translate(-50%,0);\", \"\"], bounds.bottom, function (props) {\n        return getAnimationStyle(props, 'bottom', 'false');\n      });\n    }\n  },\n  left: {\n    vertical: function vertical(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:\", \"px;transform:translateX(0);\", \"\"], bounds.top, bounds.bottom, bounds.left, function (props) {\n        return getAnimationStyle(props, 'left', 'vertical');\n      });\n    },\n    horizontal: function horizontal(bounds) {\n      return css([\"left:\", \"px;right:\", \"px;top:50%;transform:translate(0,-50%);\", \"\"], bounds.left, bounds.right, function (props) {\n        return getAnimationStyle(props, 'left', 'horizontal');\n      });\n    },\n    \"true\": function _true(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:\", \"px;right:\", \"px;transform:translateX(0);\", \"\"], bounds.top, bounds.bottom, bounds.left, bounds.right, function (props) {\n        return getAnimationStyle(props, 'left', 'true');\n      });\n    },\n    \"false\": function _false(bounds) {\n      return css([\"left:\", \"px;top:50%;transform:translate(0,-50%);\", \"\"], bounds.left, function (props) {\n        return getAnimationStyle(props, 'left', 'false');\n      });\n    }\n  },\n  right: {\n    vertical: function vertical(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;right:\", \"px;transform:translateX(0);\", \"\"], bounds.top, bounds.bottom, bounds.right, function (props) {\n        return getAnimationStyle(props, 'right', 'vertical');\n      });\n    },\n    horizontal: function horizontal(bounds) {\n      return css([\"left:\", \"px;right:\", \"px;top:50%;transform:translate(0,-50%);\", \"\"], bounds.left, bounds.right, function (props) {\n        return getAnimationStyle(props, 'right', 'horizontal');\n      });\n    },\n    \"true\": function _true(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:\", \"px;right:\", \"px;transform:translateX(0);\", \"\"], bounds.top, bounds.bottom, bounds.left, bounds.right, function (props) {\n        return getAnimationStyle(props, 'right', 'true');\n      });\n    },\n    \"false\": function _false(bounds) {\n      return css([\"right:\", \"px;top:50%;transform:translate(0,-50%);\", \"\"], bounds.right, function (props) {\n        return getAnimationStyle(props, 'right', 'false');\n      });\n    }\n  },\n  start: {\n    vertical: function vertical(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;inset-inline-start:\", \"px;transform:translateX(0);\", \"\"], bounds.top, bounds.bottom, bounds.start, function (props) {\n        return getAnimationStyle(props, 'start', 'vertical');\n      });\n    },\n    horizontal: function horizontal(bounds) {\n      return css([\"inset-inline-start:\", \"px;inset-inline-end:\", \"px;top:50%;transform:translate(0,-50%);\", \"\"], bounds.start, bounds.end, function (props) {\n        return getAnimationStyle(props, 'start', 'horizontal');\n      });\n    },\n    \"true\": function _true(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;inset-inline-start:\", \"px;inset-inline-end:\", \"px;transform:translateX(0);\", \"\"], bounds.top, bounds.bottom, bounds.start, bounds.end, function (props) {\n        return getAnimationStyle(props, 'start', 'true');\n      });\n    },\n    \"false\": function _false(bounds) {\n      return css([\"inset-inline-start:\", \"px;top:50%;transform:translate(0,-50%);\", \"\"], bounds.start, function (props) {\n        return getAnimationStyle(props, 'start', 'false');\n      });\n    }\n  },\n  end: {\n    vertical: function vertical(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;inset-inline-end:\", \"px;transform:translateX(0);\", \"\"], bounds.top, bounds.bottom, bounds.end, function (props) {\n        return getAnimationStyle(props, 'end', 'vertical');\n      });\n    },\n    horizontal: function horizontal(bounds) {\n      return css([\"inset-inline-start:\", \"px;inset-inline-end:\", \"px;top:50%;transform:translate(0,-50%);\", \"\"], bounds.start, bounds.end, function (props) {\n        return getAnimationStyle(props, 'end', 'horizontal');\n      });\n    },\n    \"true\": function _true(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;inset-inline-start:\", \"px;inset-inline-end:\", \"px;transform:translateX(0);\", \"\"], bounds.top, bounds.bottom, bounds.start, bounds.end, function (props) {\n        return getAnimationStyle(props, 'end', 'true');\n      });\n    },\n    \"false\": function _false(bounds) {\n      return css([\"inset-inline-end:\", \"px;top:50%;transform:translate(0,-50%);\", \"\"], bounds.end, function (props) {\n        return getAnimationStyle(props, 'end', 'false');\n      });\n    }\n  },\n  'top-right': {\n    vertical: function vertical(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;right:\", \"px;transform:translateX(0);\", \";\"], bounds.top, bounds.bottom, bounds.right, function (props) {\n        return getAnimationStyle(props, 'top', 'true');\n      });\n    },\n    horizontal: function horizontal(bounds) {\n      return css([\"left:\", \"px;right:\", \"px;top:0;transform:translateX(0);\", \";\"], bounds.left, bounds.right, function (props) {\n        return getAnimationStyle(props, 'top', 'true');\n      });\n    },\n    \"true\": function _true(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:\", \"px;right:\", \"px;transform:translateX(0);\", \";\"], bounds.top, bounds.bottom, bounds.left, bounds.right, function (props) {\n        return getAnimationStyle(props, 'top', 'true');\n      });\n    },\n    \"false\": function _false(bounds) {\n      return css([\"top:\", \"px;right:\", \"px;transform:translateY(0);\", \";\"], bounds.top, bounds.right, function (props) {\n        return getAnimationStyle(props, 'top', 'true');\n      });\n    }\n  },\n  'top-left': {\n    vertical: function vertical(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:\", \"px;transform:translateX(0);\", \"\"], bounds.top, bounds.bottom, bounds.left, function (props) {\n        return getAnimationStyle(props, 'top', 'true');\n      });\n    },\n    horizontal: function horizontal(bounds) {\n      return css([\"left:\", \"px;right:\", \"px;top:0;transform:translateX(0);\", \"\"], bounds.left, bounds.right, function (props) {\n        return getAnimationStyle(props, 'top', 'true');\n      });\n    },\n    \"true\": function _true(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:\", \"px;right:\", \"px;transform:translateX(0);\", \"\"], bounds.top, bounds.bottom, bounds.left, bounds.right, function (props) {\n        return getAnimationStyle(props, 'top', 'true');\n      });\n    },\n    \"false\": function _false(bounds) {\n      return css([\"top:\", \"px;left:\", \"px;transform:translateY(0);\", \"\"], bounds.top, bounds.left, function (props) {\n        return getAnimationStyle(props, 'top', 'true');\n      });\n    }\n  },\n  'bottom-right': {\n    vertical: function vertical(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;right:\", \"px;transform:translateX(0);\", \"\"], bounds.top, bounds.bottom, bounds.right, function (props) {\n        return getAnimationStyle(props, 'bottom', 'true');\n      });\n    },\n    horizontal: function horizontal(bounds) {\n      return css([\"left:\", \"px;right:\", \"px;bottom:\", \"px;transform:translateY(0);\", \"\"], bounds.left, bounds.right, bounds.bottom, function (props) {\n        return getAnimationStyle(props, 'bottom', 'true');\n      });\n    },\n    \"true\": function _true(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:\", \"px;right:\", \"px;transform:translateX(0);\", \"\"], bounds.top, bounds.bottom, bounds.left, bounds.right, function (props) {\n        return getAnimationStyle(props, 'bottom', 'true');\n      });\n    },\n    \"false\": function _false(bounds) {\n      return css([\"bottom:\", \"px;right:\", \"px;transform:translateY(0);\", \"\"], bounds.bottom, bounds.right, function (props) {\n        return getAnimationStyle(props, 'bottom', 'true');\n      });\n    }\n  },\n  'bottom-left': {\n    vertical: function vertical(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:\", \"px;transform:translateX(0);\", \"\"], bounds.top, bounds.bottom, bounds.left, function (props) {\n        return getAnimationStyle(props, 'bottom', 'true');\n      });\n    },\n    horizontal: function horizontal(bounds) {\n      return css([\"left:\", \"px;right:\", \"px;bottom:\", \"px;transform:translateY(0);\", \"\"], bounds.left, bounds.right, bounds.bottom, function (props) {\n        return getAnimationStyle(props, 'bottom', 'true');\n      });\n    },\n    \"true\": function _true(bounds) {\n      return css([\"top:\", \"px;bottom:\", \"px;left:\", \"px;right:\", \"px;transform:translateX(0);\", \"\"], bounds.top, bounds.bottom, bounds.left, bounds.right, function (props) {\n        return getAnimationStyle(props, 'bottom', 'true');\n      });\n    },\n    \"false\": function _false(bounds) {\n      return css([\"bottom:\", \"px;left:\", \"px;transform:translateY(0);\", \"\"], bounds.bottom, bounds.left, function (props) {\n        return getAnimationStyle(props, 'bottom', 'true');\n      });\n    }\n  }\n};\n\nvar roundStyle = function roundStyle(data, theme, position, margin) {\n  var styles = [];\n  var size = data === true ? 'medium' : data;\n  var round = theme.global.edgeSize[size] || size; // if user provides CSS string such as '50px 12px', apply that always\n\n  var customCSS = round.split(' ').length > 1;\n\n  if (margin === 'none' && !customCSS && theme.layer.border.intelligentRounding === true) {\n    if (position === 'bottom') {\n      styles.push(css([\"border-radius:\", \" \", \" 0 0;\"], round, round));\n    } else if (position === 'bottom-left') {\n      styles.push(css([\"border-radius:0 \", \" 0 0;\"], round));\n    } else if (position === 'bottom-right') {\n      styles.push(css([\"border-radius:\", \" 0 0 0;\"], round));\n    } else if (position === 'end') {\n      // only works on Firefox, what should be fallback?\n      styles.push(css([\"border-start-start-radius:\", \";border-end-start-radius:\", \";\"], round, round));\n    } else if (position === 'left') {\n      styles.push(css([\"border-radius:0 \", \" \", \" 0;\"], round, round));\n    } else if (position === 'right') {\n      styles.push(css([\"border-radius:\", \" 0 0 \", \";\"], round, round));\n    } else if (position === 'start') {\n      // only works on Firefox, what should be fallback?\n      styles.push(css([\"border-end-end-radius:\", \";border-start-end-radius:\", \";\"], round, round));\n    } else if (position === 'top') {\n      styles.push(css([\"border-radius:0 0 \", \" \", \";\"], round, round));\n    } else if (position === 'top-left') {\n      styles.push(css([\"border-radius:0 0 \", \" 0;\"], round));\n    } else if (position === 'top-right') {\n      styles.push(css([\"border-radius:0 0 0 \", \";\"], round));\n    } else {\n      // position is center, apply uniform border-radius\n      styles.push(css([\"border-radius:\", \";\"], round));\n    }\n  } else {\n    // if there's a margin apply uniform border-radius, or if user has supplied\n    // a complex CSS string such as \"50px 20px\" apply this\n    styles.push(css([\"border-radius:\", \";\"], round));\n  }\n\n  return styles;\n};\n\nvar desktopContainerStyle = css([\"\", \" max-height:\", \";max-width:\", \";\", \";\", \";\"], function (props) {\n  if (!props.modal && props.position === 'hidden') {\n    return hiddenPositionStyle;\n  }\n\n  return css([\"position:\", \";\"], props.modal ? 'absolute' : 'fixed');\n}, function (props) {\n  return \"calc(100% - \" + getBounds(props.targetBounds, props.margin, props.theme, 'top') + \"px - \" + getBounds(props.targetBounds, props.margin, props.theme, 'bottom') + \"px)\";\n}, function (props) {\n  return \"calc(100% - \" + getBounds(props.targetBounds, props.margin, props.theme, 'left') + \"px - \" + getBounds(props.targetBounds, props.margin, props.theme, 'right') + \"px)\";\n}, function (props) {\n  return props.plain || props.full && props.margin === 'none' ? \"border-radius: 0;\" : roundStyle(props.theme.layer.border.radius, props.theme, props.position, props.margin);\n}, function (props) {\n  return props.position !== 'hidden' && POSITIONS[props.position][props.full](getBounds(props.targetBounds, props.margin, props.theme), props.targetBounds) || '';\n});\nvar responsiveContainerStyle = css([\"position:relative;max-height:none;max-width:none;border-radius:0;top:0;bottom:0;left:0;right:0;transform:none;animation:none;height:100vh;width:100vw;\"]);\nvar elevationStyle = css([\"box-shadow:\", \";\"], function (props) {\n  return props.theme.global.elevation[props.theme.dark ? 'dark' : 'light'][props.theme.layer.container.elevation];\n});\nvar StyledContainer = styled.div.withConfig({\n  displayName: \"StyledLayer__StyledContainer\",\n  componentId: \"rmtehz-2\"\n})([\"\", \" display:flex;flex-direction:column;min-height:\", \";\", \" outline:none;pointer-events:all;z-index:\", \";\", \" \", \" \", \";\", \";\"], function (props) {\n  return !props.modal ? baseStyle : '';\n}, function (props) {\n  return props.theme.global.size.xxsmall;\n}, function (props) {\n  return !props.plain && (props.background || props.theme.layer.background) && backgroundStyle(props.background || props.theme.layer.background, props.theme);\n}, function (props) {\n  return props.theme.layer.container.zIndex;\n}, function (props) {\n  return props.theme.layer.container.elevation && elevationStyle;\n}, desktopContainerStyle, function (props) {\n  if (props.responsive && props.theme.layer.responsiveBreakpoint) {\n    var breakpoint = props.theme.global.breakpoints[props.theme.layer.responsiveBreakpoint];\n\n    if (breakpoint) {\n      return breakpointStyle(breakpoint, responsiveContainerStyle);\n    }\n  }\n\n  return '';\n}, function (props) {\n  return props.theme.layer.container && props.theme.layer.container.extend;\n});\nStyledContainer.defaultProps = {};\nObject.setPrototypeOf(StyledContainer.defaultProps, defaultProps);\nexport { animationDuration, StyledLayer, StyledOverlay, StyledContainer };","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { FocusedContainer } from '../FocusedContainer';\nimport { Keyboard } from '../Keyboard';\nimport { backgroundIsDark, findVisibleParent, PortalContext } from '../../utils';\nimport { StyledLayer, StyledContainer, StyledOverlay } from './StyledLayer';\nvar HiddenAnchor = styled.a.withConfig({\n  displayName: \"LayerContainer__HiddenAnchor\",\n  componentId: \"sc-1srj14c-0\"\n})([\"width:0;height:0;overflow:hidden;position:absolute;\"]);\nvar defaultPortalContext = [];\nvar fullBounds = {\n  left: 0,\n  right: 0,\n  top: 0,\n  bottom: 0\n};\nvar LayerContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var background = _ref.background,\n      children = _ref.children,\n      _ref$full = _ref.full,\n      full = _ref$full === void 0 ? false : _ref$full,\n      id = _ref.id,\n      _ref$margin = _ref.margin,\n      margin = _ref$margin === void 0 ? 'none' : _ref$margin,\n      _ref$modal = _ref.modal,\n      modal = _ref$modal === void 0 ? true : _ref$modal,\n      onClickOutside = _ref.onClickOutside,\n      onEsc = _ref.onEsc,\n      plain = _ref.plain,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? 'center' : _ref$position,\n      _ref$responsive = _ref.responsive,\n      responsive = _ref$responsive === void 0 ? true : _ref$responsive,\n      layerTarget = _ref.target,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"background\", \"children\", \"full\", \"id\", \"margin\", \"modal\", \"onClickOutside\", \"onEsc\", \"plain\", \"position\", \"responsive\", \"target\"]);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(fullBounds),\n      targetBounds = _useState[0],\n      setTargetBounds = _useState[1];\n\n  var anchorRef = useRef();\n  var containerRef = useRef();\n  var layerRef = useRef();\n  var portalContext = useContext(PortalContext) || defaultPortalContext;\n  var portalId = useMemo(function () {\n    return portalContext.length;\n  }, [portalContext]);\n  var nextPortalContext = useMemo(function () {\n    return [].concat(portalContext, [portalId]);\n  }, [portalContext, portalId]);\n  useEffect(function () {\n    if (position !== 'hidden') {\n      var node = layerRef.current || containerRef.current || ref.current;\n      if (node && node.scrollIntoView) node.scrollIntoView(); // Once layer is open we make sure it has focus so that you\n      // can start tabbing inside the layer. If the caller put focus\n      // on an element already, we honor that. Otherwise, we put\n      // the focus in the hidden anchor.\n\n      var element = document.activeElement;\n\n      while (element) {\n        if (element === containerRef.current) {\n          // already have focus inside the container\n          break;\n        }\n\n        element = element.parentElement;\n      }\n\n      if (modal && !element && anchorRef.current) {\n        anchorRef.current.focus();\n      }\n    }\n  }, [modal, position, ref]);\n  useEffect(function () {\n    if (position !== 'hidden') {\n      var node = layerRef.current || containerRef.current || ref.current;\n      if (node && node.scrollIntoView) node.scrollIntoView();\n    }\n  }, [position, ref]);\n  useEffect(function () {\n    var onClickDocument = function onClickDocument(event) {\n      // determine which portal id the target is in, if any\n      var clickedPortalId = null;\n      var node = event.target;\n\n      while (clickedPortalId === null && node !== document && node !== null) {\n        // check if user click occurred within the layer\n        var attr = node.getAttribute('data-g-portal-id');\n        if (attr !== null && attr !== '') clickedPortalId = parseInt(attr, 10); // loop upward through parents to see if clicked element is a child\n        // of the Layer. if so, click was inside Layer\n        else node = node.parentNode;\n      }\n\n      if ((clickedPortalId === null || portalContext.indexOf(clickedPortalId) !== -1) && node !== null) {\n        // if the click occurred outside of the Layer portal, call\n        // the user's onClickOutside function\n        onClickOutside(event);\n      }\n    }; // if user provides an onClickOutside function, listen for mousedown event\n\n\n    if (onClickOutside) {\n      document.addEventListener('mousedown', onClickDocument);\n    }\n\n    if (layerTarget) {\n      var updateBounds = function updateBounds() {\n        var rect = findVisibleParent(layerTarget).getBoundingClientRect();\n        setTargetBounds({\n          left: rect.left,\n          right: window.innerWidth - rect.right,\n          top: rect.top,\n          bottom: window.innerHeight - rect.bottom\n        });\n      };\n\n      updateBounds();\n      window.addEventListener('resize', updateBounds);\n      window.addEventListener('scroll', updateBounds, true);\n      return function () {\n        window.removeEventListener('resize', updateBounds);\n        window.removeEventListener('scroll', updateBounds, true);\n\n        if (onClickOutside) {\n          document.removeEventListener('mousedown', onClickDocument);\n        }\n      };\n    }\n\n    setTargetBounds(fullBounds);\n    return function () {\n      if (onClickOutside) {\n        document.removeEventListener('mousedown', onClickDocument);\n      }\n    };\n  }, [layerTarget, onClickOutside, portalContext, portalId]);\n  var content = /*#__PURE__*/React.createElement(StyledContainer, _extends({\n    ref: ref || containerRef,\n    background: background,\n    elevation: theme.layer.container.elevation,\n    id: id,\n    full: full,\n    margin: margin,\n    modal: modal,\n    targetBounds: !modal ? targetBounds : fullBounds\n  }, rest, {\n    position: position,\n    plain: plain,\n    responsive: responsive,\n    dir: theme.dir // portalId is used to determine if click occurred inside\n    // or outside of the layer\n    ,\n    \"data-g-portal-id\": portalId\n  }), /*#__PURE__*/React.createElement(HiddenAnchor, {\n    ref: anchorRef,\n    tabIndex: \"-1\",\n    \"aria-hidden\": \"true\"\n  }), children);\n\n  if (modal) {\n    content = /*#__PURE__*/React.createElement(StyledLayer, {\n      ref: layerRef,\n      id: id,\n      targetBounds: targetBounds,\n      plain: plain,\n      position: position,\n      responsive: responsive,\n      tabIndex: \"-1\",\n      dir: theme.dir\n    }, /*#__PURE__*/React.createElement(StyledOverlay, {\n      plain: plain,\n      responsive: responsive,\n      onMouseDown: onClickOutside\n    }), content);\n  }\n\n  if (onEsc) {\n    content = /*#__PURE__*/React.createElement(Keyboard, {\n      onEsc: onEsc ? function (event) {\n        // prevent further capturing or bubbling of event to other\n        // child or parent elements\n        event.stopPropagation();\n        onEsc(event);\n      } : undefined,\n      target: modal === false ? 'document' : undefined\n    }, content);\n  }\n\n  if (theme.layer.background) {\n    var dark = backgroundIsDark(theme.layer.background, theme);\n\n    if (dark !== undefined && dark !== theme.dark) {\n      content = /*#__PURE__*/React.createElement(ThemeContext.Provider, {\n        value: _extends({}, theme, {\n          dark: dark\n        })\n      }, content);\n    }\n  }\n\n  content = /*#__PURE__*/React.createElement(PortalContext.Provider, {\n    value: nextPortalContext\n  }, content);\n\n  if (modal) {\n    content = /*#__PURE__*/React.createElement(FocusedContainer, {\n      hidden: position === 'hidden' // if layer has a target, do not restrict scroll.\n      // restricting scroll could inhibit the user's\n      // ability to scroll the page while the layer is open.\n      ,\n      restrictScroll: !layerTarget ? true : undefined,\n      trapFocus: true\n    }, content);\n  }\n\n  return content;\n});\nexport { LayerContainer };","function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { forwardRef, useContext, useEffect, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { getNewContainer } from '../../utils';\nimport { LayerContainer } from './LayerContainer';\nimport { animationDuration } from './StyledLayer';\nimport { ContainerTargetContext } from '../../contexts/ContainerTargetContext';\nvar Layer = /*#__PURE__*/forwardRef(function (props, ref) {\n  var animate = props.animate,\n      animation = props.animation,\n      targetChildPosition = props.targetChildPosition;\n\n  var _useState = useState(),\n      originalFocusedElement = _useState[0],\n      setOriginalFocusedElement = _useState[1];\n\n  useEffect(function () {\n    return setOriginalFocusedElement(document.activeElement);\n  }, []);\n\n  var _useState2 = useState(),\n      layerContainer = _useState2[0],\n      setLayerContainer = _useState2[1];\n\n  var containerTarget = useContext(ContainerTargetContext);\n  useEffect(function () {\n    return setLayerContainer(getNewContainer(containerTarget, targetChildPosition));\n  }, [containerTarget, targetChildPosition]); // just a few things to clean up when the Layer is unmounted\n\n  useEffect(function () {\n    return function () {\n      if (originalFocusedElement) {\n        if (originalFocusedElement.focus) {\n          // wait for the fixed positioning to come back to normal\n          // see layer styling for reference\n          setTimeout(function () {\n            return originalFocusedElement.focus();\n          }, 0);\n        } else if (originalFocusedElement.parentNode && originalFocusedElement.parentNode.focus) {\n          // required for IE11 and Edge\n          originalFocusedElement.parentNode.focus();\n        }\n      }\n\n      if (layerContainer) {\n        var activeAnimation = animation !== undefined ? animation : animate;\n\n        if (activeAnimation !== false) {\n          // undefined uses 'slide' as the default\n          // animate out and remove later\n          var layerClone = layerContainer.cloneNode(true);\n          layerClone.id = 'layerClone';\n          containerTarget.appendChild(layerClone);\n          var clonedContainer = layerClone.querySelector('[class*=\"StyledLayer__StyledContainer\"]');\n\n          if (clonedContainer && clonedContainer.style) {\n            clonedContainer.style.animationDirection = 'reverse';\n          }\n\n          setTimeout(function () {\n            // we add the id and query here so the unit tests work\n            var clone = document.getElementById('layerClone');\n\n            if (clone) {\n              containerTarget.removeChild(clone);\n              layerContainer.remove();\n            }\n          }, animationDuration);\n        } else {\n          containerTarget.removeChild(layerContainer);\n        }\n      }\n    };\n  }, [animate, animation, containerTarget, layerContainer, originalFocusedElement]);\n  return layerContainer ? /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(LayerContainer, _extends({\n    ref: ref\n  }, props)), layerContainer) : null;\n});\nLayer.displayName = 'Layer';\nvar LayerDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  LayerDoc = require('./doc').doc(Layer); // eslint-disable-line global-require\n}\n\nvar LayerWrapper = LayerDoc || Layer;\nexport { LayerWrapper as Layer };","import toInteger from \"../_lib/toInteger/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name addDays\n * @category Day Helpers\n * @summary Add the specified number of days to the given date.\n *\n * @description\n * Add the specified number of days to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of days to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the days added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 10 days to 1 September 2014:\n * const result = addDays(new Date(2014, 8, 1), 10)\n * //=> Thu Sep 11 2014 00:00:00\n */\n\nexport default function addDays(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var amount = toInteger(dirtyAmount);\n\n  if (isNaN(amount)) {\n    return new Date(NaN);\n  }\n\n  if (!amount) {\n    // If 0 days, no-op to avoid changing times in the hour before end of DST\n    return date;\n  }\n\n  date.setDate(date.getDate() + amount);\n  return date;\n}","import toInteger from \"../_lib/toInteger/index.js\";\nimport addMilliseconds from \"../addMilliseconds/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nvar MILLISECONDS_IN_HOUR = 3600000;\n/**\n * @name addHours\n * @category Hour Helpers\n * @summary Add the specified number of hours to the given date.\n *\n * @description\n * Add the specified number of hours to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of hours to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the hours added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 2 hours to 10 July 2014 23:00:00:\n * const result = addHours(new Date(2014, 6, 10, 23, 0), 2)\n * //=> Fri Jul 11 2014 01:00:00\n */\n\nexport default function addHours(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addMilliseconds(dirtyDate, amount * MILLISECONDS_IN_HOUR);\n}","import toInteger from \"../_lib/toInteger/index.js\";\nimport addMilliseconds from \"../addMilliseconds/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nvar MILLISECONDS_IN_MINUTE = 60000;\n/**\n * @name addMinutes\n * @category Minute Helpers\n * @summary Add the specified number of minutes to the given date.\n *\n * @description\n * Add the specified number of minutes to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of minutes to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the minutes added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 30 minutes to 10 July 2014 12:00:00:\n * const result = addMinutes(new Date(2014, 6, 10, 12, 0), 30)\n * //=> Thu Jul 10 2014 12:30:00\n */\n\nexport default function addMinutes(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addMilliseconds(dirtyDate, amount * MILLISECONDS_IN_MINUTE);\n}","import { useRef, useState, useEffect } from \"react\";\nimport DashboardLayout from \"components/layouts/DashboardLayout\";\nimport FullCalendar from \"@fullcalendar/react\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport googleCalendarPlugin from \"@fullcalendar/google-calendar\";\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport { FullWidthMobile } from \"components/common/Container\";\nimport ruLocale from \"@fullcalendar/core/locales/ru\";\nimport {\n  withFirebaseProvider,\n  useFunctions,\n  useFirebase,\n} from \"components/FirebaseProvider\";\nimport { Header as GrommetHeader, Layer, Box } from \"grommet\";\nimport styled, { createGlobalStyle } from \"styled-components\";\nimport { transparentize, darken } from \"polished\";\nimport { addWeeks, addMinutes, addDays, addHours } from \"date-fns\";\nimport { mediaQueries } from \"lib/screenSizes\";\nimport { navigate } from \"@reach/router\";\n\nconst CalendarStyles = createGlobalStyle`\n  :root {\n    --fc-non-business-color: ${({ theme }) =>\n      transparentize(0.5, theme.colors.red)};\n    --fc-bg-event-color: ${({ theme }) =>\n      transparentize(0.3, theme.colors.green)};\n    --fc-today-bg-color: ${({ theme }) =>\n      transparentize(0.5, theme.colors.red)};\n\n  }\n\n  .fc-non-business {\n    cursor: not-allowed;\n  }\n\n  .fc-timegrid-slot {\n  }\n/* \n  .fc-timegrid-slots tr:hover  {\n    background-color: rgba(255, 255, 255, 0.3);\n  }\n\n  .fc-timegrid-col:hover {\n    background-color:  rgba(0,0,0, 0,5);\n  }\n\n  .fc-list-item:hover td{\n    background-color: red!important;\n}\n\n  .fc .fc-timegrid-col-frame {\n    height: 1px;\n  }\n\n  .fc-timegrid-col-misc {\n    height: 100%;\n  }\n\n  .fc-timegrid-slots {\n    z-index: 0!important;\n  } */\n\n  .fc-timegrid  {\n    \n  }\n\n  .fc-bg-event, .fc-day-today {\n    cursor: pointer;\n  }\n\n  .fc-bg-event {\n    transition: 0.1s ease-in all;\n  }\n\n  .fc-bg-event:hover  {\n    background-color: ${({ theme }) => theme.colors.green};\n  }\n\n  .fc-timegrid-bg-harness:first-child .fc-bg-event {\n    background-color: transparent!important;\n  }\n\n  `;\n\nconst StyledLayer = styled(Layer)`\n  background-color: ${({ theme }) => theme.colors.backgroundPrimary};\n  overflow: hidden;\n\n  @media ${mediaQueries.sm} {\n    border-radius: 10px;\n    margin: 20px;\n  }\n`;\n\nconst now = new Date(\n  new Date().getFullYear(),\n  new Date().getMonth(),\n  new Date().getDate()\n);\n\nconst tomorrow = addDays(now, 1);\nconst afterWeek = addWeeks(now, 1);\n\nconst generateEvents = (start, end) => {\n  const calendarRef = useRef(null);\n  const getCalendarApi = () => calendarRef.current.getApi();\n  const { user } = useFirebase();\n  const functions = useFunctions();\n  const [apiKey, setApiKey] = useState(undefined);\n  const [availiableTime, setAvaliableTime] = useState([]);\n\n  useEffect(() => {\n    if (user !== null) {\n      console.log(\"user\", user);\n      setApiKey(process.env.GATSBY_GOOGLE_CALENDAR_LEWKAN_API_PUBLIC_KEY);\n      const getUserEvents = functions.httpsCallable(\"getUserEvents\");\n      getUserEvents().then(response => {\n        const events = response.data;\n        if (events.length < 1) {\n          setAvaliableTime(generateEvents(now, afterWeek));\n        }\n      });\n    }\n  }, [user]);\n\n  const openDay = e => {\n    if (e.date >= now && e.date <= afterWeek) {\n      getCalendarApi().changeView(\"timeGridDay\", e.dateStr);\n    }\n  };\n\n  const openSubscription = e => {\n    if (e.allDay) return;\n    if (e.date > tomorrow && e.date <= afterWeek) {\n      const queryParams = new URLSearchParams({\n        date: e.dateStr,\n      });\n\n      navigate(`/dashboard/lesson/create/${queryParams.toString()}`);\n    }\n  };\n  const events = [];\n  for (let day = start; day <= end; day = addDays(day, 1)) {\n    events.push({\n      start: day,\n      allDay: true,\n      display: \"background\",\n    });\n    for (let hour = 0; hour < 24; hour++) {\n      const start = addHours(day, hour);\n      events.push({\n        start: start,\n        end: addMinutes(start, 30),\n        display: \"background\",\n      });\n      events.push({\n        start: addMinutes(start, 30),\n        end: addHours(start, 1),\n        display: \"background\",\n      });\n    }\n  }\n  return events;\n};\n\nconst renderEventContent = eventInfo => {\n  return (\n    <>\n      <b>{eventInfo.timeText}</b>\n      <i>{eventInfo.event.title}</i>\n    </>\n  );\n};\n\nconst SchedulePage = () => {\n  const calendarRef = useRef(null);\n  const getCalendarApi = () => calendarRef.current.getApi();\n  const { user } = useFirebase();\n  const functions = useFunctions();\n  const [apiKey, setApiKey] = useState(undefined);\n  const [availiableTime, setAvaliableTime] = useState([]);\n\n  useEffect(() => {\n    if (user !== null) {\n      console.log(\"user\", user);\n      setApiKey(process.env.GATSBY_GOOGLE_CALENDAR_LEWKAN_API_PUBLIC_KEY);\n      const getUserEvents = functions.httpsCallable(\"getUserEvents\");\n      getUserEvents().then(response => {\n        const events = response.data;\n        if (events.length < 1) {\n          setAvaliableTime(generateEvents(now, afterWeek));\n        }\n      });\n    }\n  }, [user]);\n\n  const openDay = e => {\n    if (e.date >= now && e.date <= afterWeek) {\n      getCalendarApi().changeView(\"timeGridDay\", e.dateStr);\n    }\n  };\n\n  const openSubscription = e => {\n    if (e.allDay) return;\n    if (e.date > tomorrow && e.date <= afterWeek) {\n      navigate(`/dashboard/lesson/create/${e.dateStr}`);\n    }\n  };\n  return (\n    <FullWidthMobile>\n      <CalendarStyles />\n      <Box flex direction=\"row\"></Box>\n      <FullCalendar\n        ref={calendarRef}\n        locale={ruLocale}\n        plugins={[\n          dayGridPlugin,\n          interactionPlugin,\n          timeGridPlugin,\n          googleCalendarPlugin,\n        ]}\n        allDaySlot={false}\n        initialView=\"timeGridWeek\"\n        headerToolbar={{\n          center: \"dayGridMonth timeGridWeek\",\n        }}\n        contentHeight={1500}\n        googleCalendarApiKey={apiKey}\n        firstDay={1}\n        views={{\n          dayGrid: {\n            dateClick: openDay,\n          },\n          timeGrid: {\n            slotMinTime: \"14:00\",\n            slotMaxTime: \"21:00\",\n            expandRows: true,\n            selectable: true,\n            dateClick: openSubscription,\n          },\n        }}\n        eventClick={e => {\n          e.jsEvent.preventDefault(); // don'\n          console.log(\"event\", e, e.event.id);\n          navigate(\"/dashboard/lesson/attend/\" + e.event.id);\n        }}\n        events={{}}\n        eventSources={[\n          {\n            events: availiableTime,\n          },\n          { googleCalendarId: process.env.GATSBY_GOOGLE_CALENDAR_ID },\n        ]}\n        eventContent={renderEventContent}\n        validRange={nowDate => {\n          return {\n            start: new Date(),\n            end: new Date(nowDate.getFullYear(), nowDate.getMonth() + 2),\n          };\n        }}\n        fixedWeekCount={false}\n      />\n    </FullWidthMobile>\n  );\n};\n\nexport default withFirebaseProvider(SchedulePage);\n","import toInteger from \"../_lib/toInteger/index.js\";\nimport addDays from \"../addDays/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name addWeeks\n * @category Week Helpers\n * @summary Add the specified number of weeks to the given date.\n *\n * @description\n * Add the specified number of week to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of weeks to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the weeks added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 4 weeks to 1 September 2014:\n * const result = addWeeks(new Date(2014, 8, 1), 4)\n * //=> Mon Sep 29 2014 00:00:00\n */\n\nexport default function addWeeks(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  var days = amount * 7;\n  return addDays(dirtyDate, days);\n}","/*!\nFullCalendar v5.5.0\nDocs & License: https://fullcalendar.io/\n(c) 2020 Adam Shaw\n*/\nimport { config, elementClosest, Emitter, applyStyle, whenTransitionDone, removeElement, ScrollController, ElementScrollController, computeInnerRect, WindowScrollController, preventSelection, preventContextMenu, allowSelection, allowContextMenu, ElementDragging, computeRect, getClippingParents, pointInsideRect, isDateSpansEqual, constrainPoint, intersectRects, getRectCenter, diffPoints, mapHash, rangeContainsRange, interactionSettingsToStore, Interaction, enableCursor, disableCursor, triggerDateSelect, compareNumbers, getElSeg, getRelevantEvents, EventApi, createEmptyEventStore, applyMutationToEventStore, buildEventApis, interactionSettingsStore, startOfDay, diffDates, createDuration, identity, eventTupleToStore, isInteractionValid, parseDragMeta, elementMatches, refineEventDef, parseEventDef, getDefaultEventEnd, createEventInstance, BASE_OPTION_DEFAULTS, createPlugin } from '@fullcalendar/common';\nimport { __extends, __assign } from 'tslib';\nconfig.touchMouseIgnoreWait = 500;\nvar ignoreMouseDepth = 0;\nvar listenerCnt = 0;\nvar isWindowTouchMoveCancelled = false;\n/*\nUses a \"pointer\" abstraction, which monitors UI events for both mouse and touch.\nTracks when the pointer \"drags\" on a certain element, meaning down+move+up.\n\nAlso, tracks if there was touch-scrolling.\nAlso, can prevent touch-scrolling from happening.\nAlso, can fire pointermove events when scrolling happens underneath, even when no real pointer movement.\n\nemits:\n- pointerdown\n- pointermove\n- pointerup\n*/\n\nvar PointerDragging =\n/** @class */\nfunction () {\n  function PointerDragging(containerEl) {\n    var _this = this;\n\n    this.subjectEl = null; // options that can be directly assigned by caller\n\n    this.selector = ''; // will cause subjectEl in all emitted events to be this element\n\n    this.handleSelector = '';\n    this.shouldIgnoreMove = false;\n    this.shouldWatchScroll = true; // for simulating pointermove on scroll\n    // internal states\n\n    this.isDragging = false;\n    this.isTouchDragging = false;\n    this.wasTouchScroll = false; // Mouse\n    // ----------------------------------------------------------------------------------------------------\n\n    this.handleMouseDown = function (ev) {\n      if (!_this.shouldIgnoreMouse() && isPrimaryMouseButton(ev) && _this.tryStart(ev)) {\n        var pev = _this.createEventFromMouse(ev, true);\n\n        _this.emitter.trigger('pointerdown', pev);\n\n        _this.initScrollWatch(pev);\n\n        if (!_this.shouldIgnoreMove) {\n          document.addEventListener('mousemove', _this.handleMouseMove);\n        }\n\n        document.addEventListener('mouseup', _this.handleMouseUp);\n      }\n    };\n\n    this.handleMouseMove = function (ev) {\n      var pev = _this.createEventFromMouse(ev);\n\n      _this.recordCoords(pev);\n\n      _this.emitter.trigger('pointermove', pev);\n    };\n\n    this.handleMouseUp = function (ev) {\n      document.removeEventListener('mousemove', _this.handleMouseMove);\n      document.removeEventListener('mouseup', _this.handleMouseUp);\n\n      _this.emitter.trigger('pointerup', _this.createEventFromMouse(ev));\n\n      _this.cleanup(); // call last so that pointerup has access to props\n\n    }; // Touch\n    // ----------------------------------------------------------------------------------------------------\n\n\n    this.handleTouchStart = function (ev) {\n      if (_this.tryStart(ev)) {\n        _this.isTouchDragging = true;\n\n        var pev = _this.createEventFromTouch(ev, true);\n\n        _this.emitter.trigger('pointerdown', pev);\n\n        _this.initScrollWatch(pev); // unlike mouse, need to attach to target, not document\n        // https://stackoverflow.com/a/45760014\n\n\n        var targetEl = ev.target;\n\n        if (!_this.shouldIgnoreMove) {\n          targetEl.addEventListener('touchmove', _this.handleTouchMove);\n        }\n\n        targetEl.addEventListener('touchend', _this.handleTouchEnd);\n        targetEl.addEventListener('touchcancel', _this.handleTouchEnd); // treat it as a touch end\n        // attach a handler to get called when ANY scroll action happens on the page.\n        // this was impossible to do with normal on/off because 'scroll' doesn't bubble.\n        // http://stackoverflow.com/a/32954565/96342\n\n        window.addEventListener('scroll', _this.handleTouchScroll, true);\n      }\n    };\n\n    this.handleTouchMove = function (ev) {\n      var pev = _this.createEventFromTouch(ev);\n\n      _this.recordCoords(pev);\n\n      _this.emitter.trigger('pointermove', pev);\n    };\n\n    this.handleTouchEnd = function (ev) {\n      if (_this.isDragging) {\n        // done to guard against touchend followed by touchcancel\n        var targetEl = ev.target;\n        targetEl.removeEventListener('touchmove', _this.handleTouchMove);\n        targetEl.removeEventListener('touchend', _this.handleTouchEnd);\n        targetEl.removeEventListener('touchcancel', _this.handleTouchEnd);\n        window.removeEventListener('scroll', _this.handleTouchScroll, true); // useCaptured=true\n\n        _this.emitter.trigger('pointerup', _this.createEventFromTouch(ev));\n\n        _this.cleanup(); // call last so that pointerup has access to props\n\n\n        _this.isTouchDragging = false;\n        startIgnoringMouse();\n      }\n    };\n\n    this.handleTouchScroll = function () {\n      _this.wasTouchScroll = true;\n    };\n\n    this.handleScroll = function (ev) {\n      if (!_this.shouldIgnoreMove) {\n        var pageX = window.pageXOffset - _this.prevScrollX + _this.prevPageX;\n        var pageY = window.pageYOffset - _this.prevScrollY + _this.prevPageY;\n\n        _this.emitter.trigger('pointermove', {\n          origEvent: ev,\n          isTouch: _this.isTouchDragging,\n          subjectEl: _this.subjectEl,\n          pageX: pageX,\n          pageY: pageY,\n          deltaX: pageX - _this.origPageX,\n          deltaY: pageY - _this.origPageY\n        });\n      }\n    };\n\n    this.containerEl = containerEl;\n    this.emitter = new Emitter();\n    containerEl.addEventListener('mousedown', this.handleMouseDown);\n    containerEl.addEventListener('touchstart', this.handleTouchStart, {\n      passive: true\n    });\n    listenerCreated();\n  }\n\n  PointerDragging.prototype.destroy = function () {\n    this.containerEl.removeEventListener('mousedown', this.handleMouseDown);\n    this.containerEl.removeEventListener('touchstart', this.handleTouchStart, {\n      passive: true\n    });\n    listenerDestroyed();\n  };\n\n  PointerDragging.prototype.tryStart = function (ev) {\n    var subjectEl = this.querySubjectEl(ev);\n    var downEl = ev.target;\n\n    if (subjectEl && (!this.handleSelector || elementClosest(downEl, this.handleSelector))) {\n      this.subjectEl = subjectEl;\n      this.isDragging = true; // do this first so cancelTouchScroll will work\n\n      this.wasTouchScroll = false;\n      return true;\n    }\n\n    return false;\n  };\n\n  PointerDragging.prototype.cleanup = function () {\n    isWindowTouchMoveCancelled = false;\n    this.isDragging = false;\n    this.subjectEl = null; // keep wasTouchScroll around for later access\n\n    this.destroyScrollWatch();\n  };\n\n  PointerDragging.prototype.querySubjectEl = function (ev) {\n    if (this.selector) {\n      return elementClosest(ev.target, this.selector);\n    }\n\n    return this.containerEl;\n  };\n\n  PointerDragging.prototype.shouldIgnoreMouse = function () {\n    return ignoreMouseDepth || this.isTouchDragging;\n  }; // can be called by user of this class, to cancel touch-based scrolling for the current drag\n\n\n  PointerDragging.prototype.cancelTouchScroll = function () {\n    if (this.isDragging) {\n      isWindowTouchMoveCancelled = true;\n    }\n  }; // Scrolling that simulates pointermoves\n  // ----------------------------------------------------------------------------------------------------\n\n\n  PointerDragging.prototype.initScrollWatch = function (ev) {\n    if (this.shouldWatchScroll) {\n      this.recordCoords(ev);\n      window.addEventListener('scroll', this.handleScroll, true); // useCapture=true\n    }\n  };\n\n  PointerDragging.prototype.recordCoords = function (ev) {\n    if (this.shouldWatchScroll) {\n      this.prevPageX = ev.pageX;\n      this.prevPageY = ev.pageY;\n      this.prevScrollX = window.pageXOffset;\n      this.prevScrollY = window.pageYOffset;\n    }\n  };\n\n  PointerDragging.prototype.destroyScrollWatch = function () {\n    if (this.shouldWatchScroll) {\n      window.removeEventListener('scroll', this.handleScroll, true); // useCaptured=true\n    }\n  }; // Event Normalization\n  // ----------------------------------------------------------------------------------------------------\n\n\n  PointerDragging.prototype.createEventFromMouse = function (ev, isFirst) {\n    var deltaX = 0;\n    var deltaY = 0; // TODO: repeat code\n\n    if (isFirst) {\n      this.origPageX = ev.pageX;\n      this.origPageY = ev.pageY;\n    } else {\n      deltaX = ev.pageX - this.origPageX;\n      deltaY = ev.pageY - this.origPageY;\n    }\n\n    return {\n      origEvent: ev,\n      isTouch: false,\n      subjectEl: this.subjectEl,\n      pageX: ev.pageX,\n      pageY: ev.pageY,\n      deltaX: deltaX,\n      deltaY: deltaY\n    };\n  };\n\n  PointerDragging.prototype.createEventFromTouch = function (ev, isFirst) {\n    var touches = ev.touches;\n    var pageX;\n    var pageY;\n    var deltaX = 0;\n    var deltaY = 0; // if touch coords available, prefer,\n    // because FF would give bad ev.pageX ev.pageY\n\n    if (touches && touches.length) {\n      pageX = touches[0].pageX;\n      pageY = touches[0].pageY;\n    } else {\n      pageX = ev.pageX;\n      pageY = ev.pageY;\n    } // TODO: repeat code\n\n\n    if (isFirst) {\n      this.origPageX = pageX;\n      this.origPageY = pageY;\n    } else {\n      deltaX = pageX - this.origPageX;\n      deltaY = pageY - this.origPageY;\n    }\n\n    return {\n      origEvent: ev,\n      isTouch: true,\n      subjectEl: this.subjectEl,\n      pageX: pageX,\n      pageY: pageY,\n      deltaX: deltaX,\n      deltaY: deltaY\n    };\n  };\n\n  return PointerDragging;\n}(); // Returns a boolean whether this was a left mouse click and no ctrl key (which means right click on Mac)\n\n\nfunction isPrimaryMouseButton(ev) {\n  return ev.button === 0 && !ev.ctrlKey;\n} // Ignoring fake mouse events generated by touch\n// ----------------------------------------------------------------------------------------------------\n\n\nfunction startIgnoringMouse() {\n  ignoreMouseDepth += 1;\n  setTimeout(function () {\n    ignoreMouseDepth -= 1;\n  }, config.touchMouseIgnoreWait);\n} // We want to attach touchmove as early as possible for Safari\n// ----------------------------------------------------------------------------------------------------\n\n\nfunction listenerCreated() {\n  listenerCnt += 1;\n\n  if (listenerCnt === 1) {\n    window.addEventListener('touchmove', onWindowTouchMove, {\n      passive: false\n    });\n  }\n}\n\nfunction listenerDestroyed() {\n  listenerCnt -= 1;\n\n  if (!listenerCnt) {\n    window.removeEventListener('touchmove', onWindowTouchMove, {\n      passive: false\n    });\n  }\n}\n\nfunction onWindowTouchMove(ev) {\n  if (isWindowTouchMoveCancelled) {\n    ev.preventDefault();\n  }\n}\n/*\nAn effect in which an element follows the movement of a pointer across the screen.\nThe moving element is a clone of some other element.\nMust call start + handleMove + stop.\n*/\n\n\nvar ElementMirror =\n/** @class */\nfunction () {\n  function ElementMirror() {\n    this.isVisible = false; // must be explicitly enabled\n\n    this.sourceEl = null;\n    this.mirrorEl = null;\n    this.sourceElRect = null; // screen coords relative to viewport\n    // options that can be set directly by caller\n\n    this.parentNode = document.body;\n    this.zIndex = 9999;\n    this.revertDuration = 0;\n  }\n\n  ElementMirror.prototype.start = function (sourceEl, pageX, pageY) {\n    this.sourceEl = sourceEl;\n    this.sourceElRect = this.sourceEl.getBoundingClientRect();\n    this.origScreenX = pageX - window.pageXOffset;\n    this.origScreenY = pageY - window.pageYOffset;\n    this.deltaX = 0;\n    this.deltaY = 0;\n    this.updateElPosition();\n  };\n\n  ElementMirror.prototype.handleMove = function (pageX, pageY) {\n    this.deltaX = pageX - window.pageXOffset - this.origScreenX;\n    this.deltaY = pageY - window.pageYOffset - this.origScreenY;\n    this.updateElPosition();\n  }; // can be called before start\n\n\n  ElementMirror.prototype.setIsVisible = function (bool) {\n    if (bool) {\n      if (!this.isVisible) {\n        if (this.mirrorEl) {\n          this.mirrorEl.style.display = '';\n        }\n\n        this.isVisible = bool; // needs to happen before updateElPosition\n\n        this.updateElPosition(); // because was not updating the position while invisible\n      }\n    } else if (this.isVisible) {\n      if (this.mirrorEl) {\n        this.mirrorEl.style.display = 'none';\n      }\n\n      this.isVisible = bool;\n    }\n  }; // always async\n\n\n  ElementMirror.prototype.stop = function (needsRevertAnimation, callback) {\n    var _this = this;\n\n    var done = function done() {\n      _this.cleanup();\n\n      callback();\n    };\n\n    if (needsRevertAnimation && this.mirrorEl && this.isVisible && this.revertDuration && ( // if 0, transition won't work\n    this.deltaX || this.deltaY) // if same coords, transition won't work\n    ) {\n        this.doRevertAnimation(done, this.revertDuration);\n      } else {\n      setTimeout(done, 0);\n    }\n  };\n\n  ElementMirror.prototype.doRevertAnimation = function (callback, revertDuration) {\n    var mirrorEl = this.mirrorEl;\n    var finalSourceElRect = this.sourceEl.getBoundingClientRect(); // because autoscrolling might have happened\n\n    mirrorEl.style.transition = 'top ' + revertDuration + 'ms,' + 'left ' + revertDuration + 'ms';\n    applyStyle(mirrorEl, {\n      left: finalSourceElRect.left,\n      top: finalSourceElRect.top\n    });\n    whenTransitionDone(mirrorEl, function () {\n      mirrorEl.style.transition = '';\n      callback();\n    });\n  };\n\n  ElementMirror.prototype.cleanup = function () {\n    if (this.mirrorEl) {\n      removeElement(this.mirrorEl);\n      this.mirrorEl = null;\n    }\n\n    this.sourceEl = null;\n  };\n\n  ElementMirror.prototype.updateElPosition = function () {\n    if (this.sourceEl && this.isVisible) {\n      applyStyle(this.getMirrorEl(), {\n        left: this.sourceElRect.left + this.deltaX,\n        top: this.sourceElRect.top + this.deltaY\n      });\n    }\n  };\n\n  ElementMirror.prototype.getMirrorEl = function () {\n    var sourceElRect = this.sourceElRect;\n    var mirrorEl = this.mirrorEl;\n\n    if (!mirrorEl) {\n      mirrorEl = this.mirrorEl = this.sourceEl.cloneNode(true); // cloneChildren=true\n      // we don't want long taps or any mouse interaction causing selection/menus.\n      // would use preventSelection(), but that prevents selectstart, causing problems.\n\n      mirrorEl.classList.add('fc-unselectable');\n      mirrorEl.classList.add('fc-event-dragging');\n      applyStyle(mirrorEl, {\n        position: 'fixed',\n        zIndex: this.zIndex,\n        visibility: '',\n        boxSizing: 'border-box',\n        width: sourceElRect.right - sourceElRect.left,\n        height: sourceElRect.bottom - sourceElRect.top,\n        right: 'auto',\n        bottom: 'auto',\n        margin: 0\n      });\n      this.parentNode.appendChild(mirrorEl);\n    }\n\n    return mirrorEl;\n  };\n\n  return ElementMirror;\n}();\n/*\nIs a cache for a given element's scroll information (all the info that ScrollController stores)\nin addition the \"client rectangle\" of the element.. the area within the scrollbars.\n\nThe cache can be in one of two modes:\n- doesListening:false - ignores when the container is scrolled by someone else\n- doesListening:true - watch for scrolling and update the cache\n*/\n\n\nvar ScrollGeomCache =\n/** @class */\nfunction (_super) {\n  __extends(ScrollGeomCache, _super);\n\n  function ScrollGeomCache(scrollController, doesListening) {\n    var _this = _super.call(this) || this;\n\n    _this.handleScroll = function () {\n      _this.scrollTop = _this.scrollController.getScrollTop();\n      _this.scrollLeft = _this.scrollController.getScrollLeft();\n\n      _this.handleScrollChange();\n    };\n\n    _this.scrollController = scrollController;\n    _this.doesListening = doesListening;\n    _this.scrollTop = _this.origScrollTop = scrollController.getScrollTop();\n    _this.scrollLeft = _this.origScrollLeft = scrollController.getScrollLeft();\n    _this.scrollWidth = scrollController.getScrollWidth();\n    _this.scrollHeight = scrollController.getScrollHeight();\n    _this.clientWidth = scrollController.getClientWidth();\n    _this.clientHeight = scrollController.getClientHeight();\n    _this.clientRect = _this.computeClientRect(); // do last in case it needs cached values\n\n    if (_this.doesListening) {\n      _this.getEventTarget().addEventListener('scroll', _this.handleScroll);\n    }\n\n    return _this;\n  }\n\n  ScrollGeomCache.prototype.destroy = function () {\n    if (this.doesListening) {\n      this.getEventTarget().removeEventListener('scroll', this.handleScroll);\n    }\n  };\n\n  ScrollGeomCache.prototype.getScrollTop = function () {\n    return this.scrollTop;\n  };\n\n  ScrollGeomCache.prototype.getScrollLeft = function () {\n    return this.scrollLeft;\n  };\n\n  ScrollGeomCache.prototype.setScrollTop = function (top) {\n    this.scrollController.setScrollTop(top);\n\n    if (!this.doesListening) {\n      // we are not relying on the element to normalize out-of-bounds scroll values\n      // so we need to sanitize ourselves\n      this.scrollTop = Math.max(Math.min(top, this.getMaxScrollTop()), 0);\n      this.handleScrollChange();\n    }\n  };\n\n  ScrollGeomCache.prototype.setScrollLeft = function (top) {\n    this.scrollController.setScrollLeft(top);\n\n    if (!this.doesListening) {\n      // we are not relying on the element to normalize out-of-bounds scroll values\n      // so we need to sanitize ourselves\n      this.scrollLeft = Math.max(Math.min(top, this.getMaxScrollLeft()), 0);\n      this.handleScrollChange();\n    }\n  };\n\n  ScrollGeomCache.prototype.getClientWidth = function () {\n    return this.clientWidth;\n  };\n\n  ScrollGeomCache.prototype.getClientHeight = function () {\n    return this.clientHeight;\n  };\n\n  ScrollGeomCache.prototype.getScrollWidth = function () {\n    return this.scrollWidth;\n  };\n\n  ScrollGeomCache.prototype.getScrollHeight = function () {\n    return this.scrollHeight;\n  };\n\n  ScrollGeomCache.prototype.handleScrollChange = function () {};\n\n  return ScrollGeomCache;\n}(ScrollController);\n\nvar ElementScrollGeomCache =\n/** @class */\nfunction (_super) {\n  __extends(ElementScrollGeomCache, _super);\n\n  function ElementScrollGeomCache(el, doesListening) {\n    return _super.call(this, new ElementScrollController(el), doesListening) || this;\n  }\n\n  ElementScrollGeomCache.prototype.getEventTarget = function () {\n    return this.scrollController.el;\n  };\n\n  ElementScrollGeomCache.prototype.computeClientRect = function () {\n    return computeInnerRect(this.scrollController.el);\n  };\n\n  return ElementScrollGeomCache;\n}(ScrollGeomCache);\n\nvar WindowScrollGeomCache =\n/** @class */\nfunction (_super) {\n  __extends(WindowScrollGeomCache, _super);\n\n  function WindowScrollGeomCache(doesListening) {\n    return _super.call(this, new WindowScrollController(), doesListening) || this;\n  }\n\n  WindowScrollGeomCache.prototype.getEventTarget = function () {\n    return window;\n  };\n\n  WindowScrollGeomCache.prototype.computeClientRect = function () {\n    return {\n      left: this.scrollLeft,\n      right: this.scrollLeft + this.clientWidth,\n      top: this.scrollTop,\n      bottom: this.scrollTop + this.clientHeight\n    };\n  }; // the window is the only scroll object that changes it's rectangle relative\n  // to the document's topleft as it scrolls\n\n\n  WindowScrollGeomCache.prototype.handleScrollChange = function () {\n    this.clientRect = this.computeClientRect();\n  };\n\n  return WindowScrollGeomCache;\n}(ScrollGeomCache); // If available we are using native \"performance\" API instead of \"Date\"\n// Read more about it on MDN:\n// https://developer.mozilla.org/en-US/docs/Web/API/Performance\n\n\nvar getTime = typeof performance === 'function' ? performance.now : Date.now;\n/*\nFor a pointer interaction, automatically scrolls certain scroll containers when the pointer\napproaches the edge.\n\nThe caller must call start + handleMove + stop.\n*/\n\nvar AutoScroller =\n/** @class */\nfunction () {\n  function AutoScroller() {\n    var _this = this; // options that can be set by caller\n\n\n    this.isEnabled = true;\n    this.scrollQuery = [window, '.fc-scroller'];\n    this.edgeThreshold = 50; // pixels\n\n    this.maxVelocity = 300; // pixels per second\n    // internal state\n\n    this.pointerScreenX = null;\n    this.pointerScreenY = null;\n    this.isAnimating = false;\n    this.scrollCaches = null; // protect against the initial pointerdown being too close to an edge and starting the scroll\n\n    this.everMovedUp = false;\n    this.everMovedDown = false;\n    this.everMovedLeft = false;\n    this.everMovedRight = false;\n\n    this.animate = function () {\n      if (_this.isAnimating) {\n        // wasn't cancelled between animation calls\n        var edge = _this.computeBestEdge(_this.pointerScreenX + window.pageXOffset, _this.pointerScreenY + window.pageYOffset);\n\n        if (edge) {\n          var now = getTime();\n\n          _this.handleSide(edge, (now - _this.msSinceRequest) / 1000);\n\n          _this.requestAnimation(now);\n        } else {\n          _this.isAnimating = false; // will stop animation\n        }\n      }\n    };\n  }\n\n  AutoScroller.prototype.start = function (pageX, pageY) {\n    if (this.isEnabled) {\n      this.scrollCaches = this.buildCaches();\n      this.pointerScreenX = null;\n      this.pointerScreenY = null;\n      this.everMovedUp = false;\n      this.everMovedDown = false;\n      this.everMovedLeft = false;\n      this.everMovedRight = false;\n      this.handleMove(pageX, pageY);\n    }\n  };\n\n  AutoScroller.prototype.handleMove = function (pageX, pageY) {\n    if (this.isEnabled) {\n      var pointerScreenX = pageX - window.pageXOffset;\n      var pointerScreenY = pageY - window.pageYOffset;\n      var yDelta = this.pointerScreenY === null ? 0 : pointerScreenY - this.pointerScreenY;\n      var xDelta = this.pointerScreenX === null ? 0 : pointerScreenX - this.pointerScreenX;\n\n      if (yDelta < 0) {\n        this.everMovedUp = true;\n      } else if (yDelta > 0) {\n        this.everMovedDown = true;\n      }\n\n      if (xDelta < 0) {\n        this.everMovedLeft = true;\n      } else if (xDelta > 0) {\n        this.everMovedRight = true;\n      }\n\n      this.pointerScreenX = pointerScreenX;\n      this.pointerScreenY = pointerScreenY;\n\n      if (!this.isAnimating) {\n        this.isAnimating = true;\n        this.requestAnimation(getTime());\n      }\n    }\n  };\n\n  AutoScroller.prototype.stop = function () {\n    if (this.isEnabled) {\n      this.isAnimating = false; // will stop animation\n\n      for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n        var scrollCache = _a[_i];\n        scrollCache.destroy();\n      }\n\n      this.scrollCaches = null;\n    }\n  };\n\n  AutoScroller.prototype.requestAnimation = function (now) {\n    this.msSinceRequest = now;\n    requestAnimationFrame(this.animate);\n  };\n\n  AutoScroller.prototype.handleSide = function (edge, seconds) {\n    var scrollCache = edge.scrollCache;\n    var edgeThreshold = this.edgeThreshold;\n    var invDistance = edgeThreshold - edge.distance;\n    var velocity = // the closer to the edge, the faster we scroll\n    invDistance * invDistance / (edgeThreshold * edgeThreshold) * // quadratic\n    this.maxVelocity * seconds;\n    var sign = 1;\n\n    switch (edge.name) {\n      case 'left':\n        sign = -1;\n      // falls through\n\n      case 'right':\n        scrollCache.setScrollLeft(scrollCache.getScrollLeft() + velocity * sign);\n        break;\n\n      case 'top':\n        sign = -1;\n      // falls through\n\n      case 'bottom':\n        scrollCache.setScrollTop(scrollCache.getScrollTop() + velocity * sign);\n        break;\n    }\n  }; // left/top are relative to document topleft\n\n\n  AutoScroller.prototype.computeBestEdge = function (left, top) {\n    var edgeThreshold = this.edgeThreshold;\n    var bestSide = null;\n\n    for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n      var scrollCache = _a[_i];\n      var rect = scrollCache.clientRect;\n      var leftDist = left - rect.left;\n      var rightDist = rect.right - left;\n      var topDist = top - rect.top;\n      var bottomDist = rect.bottom - top; // completely within the rect?\n\n      if (leftDist >= 0 && rightDist >= 0 && topDist >= 0 && bottomDist >= 0) {\n        if (topDist <= edgeThreshold && this.everMovedUp && scrollCache.canScrollUp() && (!bestSide || bestSide.distance > topDist)) {\n          bestSide = {\n            scrollCache: scrollCache,\n            name: 'top',\n            distance: topDist\n          };\n        }\n\n        if (bottomDist <= edgeThreshold && this.everMovedDown && scrollCache.canScrollDown() && (!bestSide || bestSide.distance > bottomDist)) {\n          bestSide = {\n            scrollCache: scrollCache,\n            name: 'bottom',\n            distance: bottomDist\n          };\n        }\n\n        if (leftDist <= edgeThreshold && this.everMovedLeft && scrollCache.canScrollLeft() && (!bestSide || bestSide.distance > leftDist)) {\n          bestSide = {\n            scrollCache: scrollCache,\n            name: 'left',\n            distance: leftDist\n          };\n        }\n\n        if (rightDist <= edgeThreshold && this.everMovedRight && scrollCache.canScrollRight() && (!bestSide || bestSide.distance > rightDist)) {\n          bestSide = {\n            scrollCache: scrollCache,\n            name: 'right',\n            distance: rightDist\n          };\n        }\n      }\n    }\n\n    return bestSide;\n  };\n\n  AutoScroller.prototype.buildCaches = function () {\n    return this.queryScrollEls().map(function (el) {\n      if (el === window) {\n        return new WindowScrollGeomCache(false); // false = don't listen to user-generated scrolls\n      }\n\n      return new ElementScrollGeomCache(el, false); // false = don't listen to user-generated scrolls\n    });\n  };\n\n  AutoScroller.prototype.queryScrollEls = function () {\n    var els = [];\n\n    for (var _i = 0, _a = this.scrollQuery; _i < _a.length; _i++) {\n      var query = _a[_i];\n\n      if (typeof query === 'object') {\n        els.push(query);\n      } else {\n        els.push.apply(els, Array.prototype.slice.call(document.querySelectorAll(query)));\n      }\n    }\n\n    return els;\n  };\n\n  return AutoScroller;\n}();\n/*\nMonitors dragging on an element. Has a number of high-level features:\n- minimum distance required before dragging\n- minimum wait time (\"delay\") before dragging\n- a mirror element that follows the pointer\n*/\n\n\nvar FeaturefulElementDragging =\n/** @class */\nfunction (_super) {\n  __extends(FeaturefulElementDragging, _super);\n\n  function FeaturefulElementDragging(containerEl, selector) {\n    var _this = _super.call(this, containerEl) || this; // options that can be directly set by caller\n    // the caller can also set the PointerDragging's options as well\n\n\n    _this.delay = null;\n    _this.minDistance = 0;\n    _this.touchScrollAllowed = true; // prevents drag from starting and blocks scrolling during drag\n\n    _this.mirrorNeedsRevert = false;\n    _this.isInteracting = false; // is the user validly moving the pointer? lasts until pointerup\n\n    _this.isDragging = false; // is it INTENTFULLY dragging? lasts until after revert animation\n\n    _this.isDelayEnded = false;\n    _this.isDistanceSurpassed = false;\n    _this.delayTimeoutId = null;\n\n    _this.onPointerDown = function (ev) {\n      if (!_this.isDragging) {\n        // so new drag doesn't happen while revert animation is going\n        _this.isInteracting = true;\n        _this.isDelayEnded = false;\n        _this.isDistanceSurpassed = false;\n        preventSelection(document.body);\n        preventContextMenu(document.body); // prevent links from being visited if there's an eventual drag.\n        // also prevents selection in older browsers (maybe?).\n        // not necessary for touch, besides, browser would complain about passiveness.\n\n        if (!ev.isTouch) {\n          ev.origEvent.preventDefault();\n        }\n\n        _this.emitter.trigger('pointerdown', ev);\n\n        if (_this.isInteracting && // not destroyed via pointerdown handler\n        !_this.pointer.shouldIgnoreMove) {\n          // actions related to initiating dragstart+dragmove+dragend...\n          _this.mirror.setIsVisible(false); // reset. caller must set-visible\n\n\n          _this.mirror.start(ev.subjectEl, ev.pageX, ev.pageY); // must happen on first pointer down\n\n\n          _this.startDelay(ev);\n\n          if (!_this.minDistance) {\n            _this.handleDistanceSurpassed(ev);\n          }\n        }\n      }\n    };\n\n    _this.onPointerMove = function (ev) {\n      if (_this.isInteracting) {\n        _this.emitter.trigger('pointermove', ev);\n\n        if (!_this.isDistanceSurpassed) {\n          var minDistance = _this.minDistance;\n          var distanceSq = void 0; // current distance from the origin, squared\n\n          var deltaX = ev.deltaX,\n              deltaY = ev.deltaY;\n          distanceSq = deltaX * deltaX + deltaY * deltaY;\n\n          if (distanceSq >= minDistance * minDistance) {\n            // use pythagorean theorem\n            _this.handleDistanceSurpassed(ev);\n          }\n        }\n\n        if (_this.isDragging) {\n          // a real pointer move? (not one simulated by scrolling)\n          if (ev.origEvent.type !== 'scroll') {\n            _this.mirror.handleMove(ev.pageX, ev.pageY);\n\n            _this.autoScroller.handleMove(ev.pageX, ev.pageY);\n          }\n\n          _this.emitter.trigger('dragmove', ev);\n        }\n      }\n    };\n\n    _this.onPointerUp = function (ev) {\n      if (_this.isInteracting) {\n        _this.isInteracting = false;\n        allowSelection(document.body);\n        allowContextMenu(document.body);\n\n        _this.emitter.trigger('pointerup', ev); // can potentially set mirrorNeedsRevert\n\n\n        if (_this.isDragging) {\n          _this.autoScroller.stop();\n\n          _this.tryStopDrag(ev); // which will stop the mirror\n\n        }\n\n        if (_this.delayTimeoutId) {\n          clearTimeout(_this.delayTimeoutId);\n          _this.delayTimeoutId = null;\n        }\n      }\n    };\n\n    var pointer = _this.pointer = new PointerDragging(containerEl);\n    pointer.emitter.on('pointerdown', _this.onPointerDown);\n    pointer.emitter.on('pointermove', _this.onPointerMove);\n    pointer.emitter.on('pointerup', _this.onPointerUp);\n\n    if (selector) {\n      pointer.selector = selector;\n    }\n\n    _this.mirror = new ElementMirror();\n    _this.autoScroller = new AutoScroller();\n    return _this;\n  }\n\n  FeaturefulElementDragging.prototype.destroy = function () {\n    this.pointer.destroy(); // HACK: simulate a pointer-up to end the current drag\n    // TODO: fire 'dragend' directly and stop interaction. discourage use of pointerup event (b/c might not fire)\n\n    this.onPointerUp({});\n  };\n\n  FeaturefulElementDragging.prototype.startDelay = function (ev) {\n    var _this = this;\n\n    if (typeof this.delay === 'number') {\n      this.delayTimeoutId = setTimeout(function () {\n        _this.delayTimeoutId = null;\n\n        _this.handleDelayEnd(ev);\n      }, this.delay); // not assignable to number!\n    } else {\n      this.handleDelayEnd(ev);\n    }\n  };\n\n  FeaturefulElementDragging.prototype.handleDelayEnd = function (ev) {\n    this.isDelayEnded = true;\n    this.tryStartDrag(ev);\n  };\n\n  FeaturefulElementDragging.prototype.handleDistanceSurpassed = function (ev) {\n    this.isDistanceSurpassed = true;\n    this.tryStartDrag(ev);\n  };\n\n  FeaturefulElementDragging.prototype.tryStartDrag = function (ev) {\n    if (this.isDelayEnded && this.isDistanceSurpassed) {\n      if (!this.pointer.wasTouchScroll || this.touchScrollAllowed) {\n        this.isDragging = true;\n        this.mirrorNeedsRevert = false;\n        this.autoScroller.start(ev.pageX, ev.pageY);\n        this.emitter.trigger('dragstart', ev);\n\n        if (this.touchScrollAllowed === false) {\n          this.pointer.cancelTouchScroll();\n        }\n      }\n    }\n  };\n\n  FeaturefulElementDragging.prototype.tryStopDrag = function (ev) {\n    // .stop() is ALWAYS asynchronous, which we NEED because we want all pointerup events\n    // that come from the document to fire beforehand. much more convenient this way.\n    this.mirror.stop(this.mirrorNeedsRevert, this.stopDrag.bind(this, ev));\n  };\n\n  FeaturefulElementDragging.prototype.stopDrag = function (ev) {\n    this.isDragging = false;\n    this.emitter.trigger('dragend', ev);\n  }; // fill in the implementations...\n\n\n  FeaturefulElementDragging.prototype.setIgnoreMove = function (bool) {\n    this.pointer.shouldIgnoreMove = bool;\n  };\n\n  FeaturefulElementDragging.prototype.setMirrorIsVisible = function (bool) {\n    this.mirror.setIsVisible(bool);\n  };\n\n  FeaturefulElementDragging.prototype.setMirrorNeedsRevert = function (bool) {\n    this.mirrorNeedsRevert = bool;\n  };\n\n  FeaturefulElementDragging.prototype.setAutoScrollEnabled = function (bool) {\n    this.autoScroller.isEnabled = bool;\n  };\n\n  return FeaturefulElementDragging;\n}(ElementDragging);\n/*\nWhen this class is instantiated, it records the offset of an element (relative to the document topleft),\nand continues to monitor scrolling, updating the cached coordinates if it needs to.\nDoes not access the DOM after instantiation, so highly performant.\n\nAlso keeps track of all scrolling/overflow:hidden containers that are parents of the given element\nand an determine if a given point is inside the combined clipping rectangle.\n*/\n\n\nvar OffsetTracker =\n/** @class */\nfunction () {\n  function OffsetTracker(el) {\n    this.origRect = computeRect(el); // will work fine for divs that have overflow:hidden\n\n    this.scrollCaches = getClippingParents(el).map(function (scrollEl) {\n      return new ElementScrollGeomCache(scrollEl, true);\n    });\n  }\n\n  OffsetTracker.prototype.destroy = function () {\n    for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n      var scrollCache = _a[_i];\n      scrollCache.destroy();\n    }\n  };\n\n  OffsetTracker.prototype.computeLeft = function () {\n    var left = this.origRect.left;\n\n    for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n      var scrollCache = _a[_i];\n      left += scrollCache.origScrollLeft - scrollCache.getScrollLeft();\n    }\n\n    return left;\n  };\n\n  OffsetTracker.prototype.computeTop = function () {\n    var top = this.origRect.top;\n\n    for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n      var scrollCache = _a[_i];\n      top += scrollCache.origScrollTop - scrollCache.getScrollTop();\n    }\n\n    return top;\n  };\n\n  OffsetTracker.prototype.isWithinClipping = function (pageX, pageY) {\n    var point = {\n      left: pageX,\n      top: pageY\n    };\n\n    for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n      var scrollCache = _a[_i];\n\n      if (!isIgnoredClipping(scrollCache.getEventTarget()) && !pointInsideRect(point, scrollCache.clientRect)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  return OffsetTracker;\n}(); // certain clipping containers should never constrain interactions, like <html> and <body>\n// https://github.com/fullcalendar/fullcalendar/issues/3615\n\n\nfunction isIgnoredClipping(node) {\n  var tagName = node.tagName;\n  return tagName === 'HTML' || tagName === 'BODY';\n}\n/*\nTracks movement over multiple droppable areas (aka \"hits\")\nthat exist in one or more DateComponents.\nRelies on an existing draggable.\n\nemits:\n- pointerdown\n- dragstart\n- hitchange - fires initially, even if not over a hit\n- pointerup\n- (hitchange - again, to null, if ended over a hit)\n- dragend\n*/\n\n\nvar HitDragging =\n/** @class */\nfunction () {\n  function HitDragging(dragging, droppableStore) {\n    var _this = this; // options that can be set by caller\n\n\n    this.useSubjectCenter = false;\n    this.requireInitial = true; // if doesn't start out on a hit, won't emit any events\n\n    this.initialHit = null;\n    this.movingHit = null;\n    this.finalHit = null; // won't ever be populated if shouldIgnoreMove\n\n    this.handlePointerDown = function (ev) {\n      var dragging = _this.dragging;\n      _this.initialHit = null;\n      _this.movingHit = null;\n      _this.finalHit = null;\n\n      _this.prepareHits();\n\n      _this.processFirstCoord(ev);\n\n      if (_this.initialHit || !_this.requireInitial) {\n        dragging.setIgnoreMove(false); // TODO: fire this before computing processFirstCoord, so listeners can cancel. this gets fired by almost every handler :(\n\n        _this.emitter.trigger('pointerdown', ev);\n      } else {\n        dragging.setIgnoreMove(true);\n      }\n    };\n\n    this.handleDragStart = function (ev) {\n      _this.emitter.trigger('dragstart', ev);\n\n      _this.handleMove(ev, true); // force = fire even if initially null\n\n    };\n\n    this.handleDragMove = function (ev) {\n      _this.emitter.trigger('dragmove', ev);\n\n      _this.handleMove(ev);\n    };\n\n    this.handlePointerUp = function (ev) {\n      _this.releaseHits();\n\n      _this.emitter.trigger('pointerup', ev);\n    };\n\n    this.handleDragEnd = function (ev) {\n      if (_this.movingHit) {\n        _this.emitter.trigger('hitupdate', null, true, ev);\n      }\n\n      _this.finalHit = _this.movingHit;\n      _this.movingHit = null;\n\n      _this.emitter.trigger('dragend', ev);\n    };\n\n    this.droppableStore = droppableStore;\n    dragging.emitter.on('pointerdown', this.handlePointerDown);\n    dragging.emitter.on('dragstart', this.handleDragStart);\n    dragging.emitter.on('dragmove', this.handleDragMove);\n    dragging.emitter.on('pointerup', this.handlePointerUp);\n    dragging.emitter.on('dragend', this.handleDragEnd);\n    this.dragging = dragging;\n    this.emitter = new Emitter();\n  } // sets initialHit\n  // sets coordAdjust\n\n\n  HitDragging.prototype.processFirstCoord = function (ev) {\n    var origPoint = {\n      left: ev.pageX,\n      top: ev.pageY\n    };\n    var adjustedPoint = origPoint;\n    var subjectEl = ev.subjectEl;\n    var subjectRect;\n\n    if (subjectEl !== document) {\n      subjectRect = computeRect(subjectEl);\n      adjustedPoint = constrainPoint(adjustedPoint, subjectRect);\n    }\n\n    var initialHit = this.initialHit = this.queryHitForOffset(adjustedPoint.left, adjustedPoint.top);\n\n    if (initialHit) {\n      if (this.useSubjectCenter && subjectRect) {\n        var slicedSubjectRect = intersectRects(subjectRect, initialHit.rect);\n\n        if (slicedSubjectRect) {\n          adjustedPoint = getRectCenter(slicedSubjectRect);\n        }\n      }\n\n      this.coordAdjust = diffPoints(adjustedPoint, origPoint);\n    } else {\n      this.coordAdjust = {\n        left: 0,\n        top: 0\n      };\n    }\n  };\n\n  HitDragging.prototype.handleMove = function (ev, forceHandle) {\n    var hit = this.queryHitForOffset(ev.pageX + this.coordAdjust.left, ev.pageY + this.coordAdjust.top);\n\n    if (forceHandle || !isHitsEqual(this.movingHit, hit)) {\n      this.movingHit = hit;\n      this.emitter.trigger('hitupdate', hit, false, ev);\n    }\n  };\n\n  HitDragging.prototype.prepareHits = function () {\n    this.offsetTrackers = mapHash(this.droppableStore, function (interactionSettings) {\n      interactionSettings.component.prepareHits();\n      return new OffsetTracker(interactionSettings.el);\n    });\n  };\n\n  HitDragging.prototype.releaseHits = function () {\n    var offsetTrackers = this.offsetTrackers;\n\n    for (var id in offsetTrackers) {\n      offsetTrackers[id].destroy();\n    }\n\n    this.offsetTrackers = {};\n  };\n\n  HitDragging.prototype.queryHitForOffset = function (offsetLeft, offsetTop) {\n    var _a = this,\n        droppableStore = _a.droppableStore,\n        offsetTrackers = _a.offsetTrackers;\n\n    var bestHit = null;\n\n    for (var id in droppableStore) {\n      var component = droppableStore[id].component;\n      var offsetTracker = offsetTrackers[id];\n\n      if (offsetTracker && // wasn't destroyed mid-drag\n      offsetTracker.isWithinClipping(offsetLeft, offsetTop)) {\n        var originLeft = offsetTracker.computeLeft();\n        var originTop = offsetTracker.computeTop();\n        var positionLeft = offsetLeft - originLeft;\n        var positionTop = offsetTop - originTop;\n        var origRect = offsetTracker.origRect;\n        var width = origRect.right - origRect.left;\n        var height = origRect.bottom - origRect.top;\n\n        if ( // must be within the element's bounds\n        positionLeft >= 0 && positionLeft < width && positionTop >= 0 && positionTop < height) {\n          var hit = component.queryHit(positionLeft, positionTop, width, height);\n          var dateProfile = component.context.getCurrentData().dateProfile;\n\n          if (hit && // make sure the hit is within activeRange, meaning it's not a deal cell\n          rangeContainsRange(dateProfile.activeRange, hit.dateSpan.range) && (!bestHit || hit.layer > bestHit.layer)) {\n            // TODO: better way to re-orient rectangle\n            hit.rect.left += originLeft;\n            hit.rect.right += originLeft;\n            hit.rect.top += originTop;\n            hit.rect.bottom += originTop;\n            bestHit = hit;\n          }\n        }\n      }\n    }\n\n    return bestHit;\n  };\n\n  return HitDragging;\n}();\n\nfunction isHitsEqual(hit0, hit1) {\n  if (!hit0 && !hit1) {\n    return true;\n  }\n\n  if (Boolean(hit0) !== Boolean(hit1)) {\n    return false;\n  }\n\n  return isDateSpansEqual(hit0.dateSpan, hit1.dateSpan);\n}\n\nfunction buildDatePointApiWithContext(dateSpan, context) {\n  var props = {};\n\n  for (var _i = 0, _a = context.pluginHooks.datePointTransforms; _i < _a.length; _i++) {\n    var transform = _a[_i];\n\n    __assign(props, transform(dateSpan, context));\n  }\n\n  __assign(props, buildDatePointApi(dateSpan, context.dateEnv));\n\n  return props;\n}\n\nfunction buildDatePointApi(span, dateEnv) {\n  return {\n    date: dateEnv.toDate(span.range.start),\n    dateStr: dateEnv.formatIso(span.range.start, {\n      omitTime: span.allDay\n    }),\n    allDay: span.allDay\n  };\n}\n/*\nMonitors when the user clicks on a specific date/time of a component.\nA pointerdown+pointerup on the same \"hit\" constitutes a click.\n*/\n\n\nvar DateClicking =\n/** @class */\nfunction (_super) {\n  __extends(DateClicking, _super);\n\n  function DateClicking(settings) {\n    var _this = _super.call(this, settings) || this;\n\n    _this.handlePointerDown = function (pev) {\n      var dragging = _this.dragging;\n      var downEl = pev.origEvent.target; // do this in pointerdown (not dragend) because DOM might be mutated by the time dragend is fired\n\n      dragging.setIgnoreMove(!_this.component.isValidDateDownEl(downEl));\n    }; // won't even fire if moving was ignored\n\n\n    _this.handleDragEnd = function (ev) {\n      var component = _this.component;\n      var pointer = _this.dragging.pointer;\n\n      if (!pointer.wasTouchScroll) {\n        var _a = _this.hitDragging,\n            initialHit = _a.initialHit,\n            finalHit = _a.finalHit;\n\n        if (initialHit && finalHit && isHitsEqual(initialHit, finalHit)) {\n          var context = component.context;\n\n          var arg = __assign(__assign({}, buildDatePointApiWithContext(initialHit.dateSpan, context)), {\n            dayEl: initialHit.dayEl,\n            jsEvent: ev.origEvent,\n            view: context.viewApi || context.calendarApi.view\n          });\n\n          context.emitter.trigger('dateClick', arg);\n        }\n      }\n    }; // we DO want to watch pointer moves because otherwise finalHit won't get populated\n\n\n    _this.dragging = new FeaturefulElementDragging(settings.el);\n    _this.dragging.autoScroller.isEnabled = false;\n    var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n    hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n    hitDragging.emitter.on('dragend', _this.handleDragEnd);\n    return _this;\n  }\n\n  DateClicking.prototype.destroy = function () {\n    this.dragging.destroy();\n  };\n\n  return DateClicking;\n}(Interaction);\n/*\nTracks when the user selects a portion of time of a component,\nconstituted by a drag over date cells, with a possible delay at the beginning of the drag.\n*/\n\n\nvar DateSelecting =\n/** @class */\nfunction (_super) {\n  __extends(DateSelecting, _super);\n\n  function DateSelecting(settings) {\n    var _this = _super.call(this, settings) || this;\n\n    _this.dragSelection = null;\n\n    _this.handlePointerDown = function (ev) {\n      var _a = _this,\n          component = _a.component,\n          dragging = _a.dragging;\n      var options = component.context.options;\n      var canSelect = options.selectable && component.isValidDateDownEl(ev.origEvent.target); // don't bother to watch expensive moves if component won't do selection\n\n      dragging.setIgnoreMove(!canSelect); // if touch, require user to hold down\n\n      dragging.delay = ev.isTouch ? getComponentTouchDelay(component) : null;\n    };\n\n    _this.handleDragStart = function (ev) {\n      _this.component.context.calendarApi.unselect(ev); // unselect previous selections\n\n    };\n\n    _this.handleHitUpdate = function (hit, isFinal) {\n      var context = _this.component.context;\n      var dragSelection = null;\n      var isInvalid = false;\n\n      if (hit) {\n        dragSelection = joinHitsIntoSelection(_this.hitDragging.initialHit, hit, context.pluginHooks.dateSelectionTransformers);\n\n        if (!dragSelection || !_this.component.isDateSelectionValid(dragSelection)) {\n          isInvalid = true;\n          dragSelection = null;\n        }\n      }\n\n      if (dragSelection) {\n        context.dispatch({\n          type: 'SELECT_DATES',\n          selection: dragSelection\n        });\n      } else if (!isFinal) {\n        // only unselect if moved away while dragging\n        context.dispatch({\n          type: 'UNSELECT_DATES'\n        });\n      }\n\n      if (!isInvalid) {\n        enableCursor();\n      } else {\n        disableCursor();\n      }\n\n      if (!isFinal) {\n        _this.dragSelection = dragSelection; // only clear if moved away from all hits while dragging\n      }\n    };\n\n    _this.handlePointerUp = function (pev) {\n      if (_this.dragSelection) {\n        // selection is already rendered, so just need to report selection\n        triggerDateSelect(_this.dragSelection, pev, _this.component.context);\n        _this.dragSelection = null;\n      }\n    };\n\n    var component = settings.component;\n    var options = component.context.options;\n    var dragging = _this.dragging = new FeaturefulElementDragging(settings.el);\n    dragging.touchScrollAllowed = false;\n    dragging.minDistance = options.selectMinDistance || 0;\n    dragging.autoScroller.isEnabled = options.dragScroll;\n    var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n    hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n    hitDragging.emitter.on('dragstart', _this.handleDragStart);\n    hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n    hitDragging.emitter.on('pointerup', _this.handlePointerUp);\n    return _this;\n  }\n\n  DateSelecting.prototype.destroy = function () {\n    this.dragging.destroy();\n  };\n\n  return DateSelecting;\n}(Interaction);\n\nfunction getComponentTouchDelay(component) {\n  var options = component.context.options;\n  var delay = options.selectLongPressDelay;\n\n  if (delay == null) {\n    delay = options.longPressDelay;\n  }\n\n  return delay;\n}\n\nfunction joinHitsIntoSelection(hit0, hit1, dateSelectionTransformers) {\n  var dateSpan0 = hit0.dateSpan;\n  var dateSpan1 = hit1.dateSpan;\n  var ms = [dateSpan0.range.start, dateSpan0.range.end, dateSpan1.range.start, dateSpan1.range.end];\n  ms.sort(compareNumbers);\n  var props = {};\n\n  for (var _i = 0, dateSelectionTransformers_1 = dateSelectionTransformers; _i < dateSelectionTransformers_1.length; _i++) {\n    var transformer = dateSelectionTransformers_1[_i];\n    var res = transformer(hit0, hit1);\n\n    if (res === false) {\n      return null;\n    }\n\n    if (res) {\n      __assign(props, res);\n    }\n  }\n\n  props.range = {\n    start: ms[0],\n    end: ms[3]\n  };\n  props.allDay = dateSpan0.allDay;\n  return props;\n}\n\nvar EventDragging =\n/** @class */\nfunction (_super) {\n  __extends(EventDragging, _super);\n\n  function EventDragging(settings) {\n    var _this = _super.call(this, settings) || this; // internal state\n\n\n    _this.subjectEl = null;\n    _this.subjectSeg = null; // the seg being selected/dragged\n\n    _this.isDragging = false;\n    _this.eventRange = null;\n    _this.relevantEvents = null; // the events being dragged\n\n    _this.receivingContext = null;\n    _this.validMutation = null;\n    _this.mutatedRelevantEvents = null;\n\n    _this.handlePointerDown = function (ev) {\n      var origTarget = ev.origEvent.target;\n      var _a = _this,\n          component = _a.component,\n          dragging = _a.dragging;\n      var mirror = dragging.mirror;\n      var options = component.context.options;\n      var initialContext = component.context;\n      _this.subjectEl = ev.subjectEl;\n      var subjectSeg = _this.subjectSeg = getElSeg(ev.subjectEl);\n      var eventRange = _this.eventRange = subjectSeg.eventRange;\n      var eventInstanceId = eventRange.instance.instanceId;\n      _this.relevantEvents = getRelevantEvents(initialContext.getCurrentData().eventStore, eventInstanceId);\n      dragging.minDistance = ev.isTouch ? 0 : options.eventDragMinDistance;\n      dragging.delay = // only do a touch delay if touch and this event hasn't been selected yet\n      ev.isTouch && eventInstanceId !== component.props.eventSelection ? getComponentTouchDelay$1(component) : null;\n\n      if (options.fixedMirrorParent) {\n        mirror.parentNode = options.fixedMirrorParent;\n      } else {\n        mirror.parentNode = elementClosest(origTarget, '.fc');\n      }\n\n      mirror.revertDuration = options.dragRevertDuration;\n      var isValid = component.isValidSegDownEl(origTarget) && !elementClosest(origTarget, '.fc-event-resizer'); // NOT on a resizer\n\n      dragging.setIgnoreMove(!isValid); // disable dragging for elements that are resizable (ie, selectable)\n      // but are not draggable\n\n      _this.isDragging = isValid && ev.subjectEl.classList.contains('fc-event-draggable');\n    };\n\n    _this.handleDragStart = function (ev) {\n      var initialContext = _this.component.context;\n      var eventRange = _this.eventRange;\n      var eventInstanceId = eventRange.instance.instanceId;\n\n      if (ev.isTouch) {\n        // need to select a different event?\n        if (eventInstanceId !== _this.component.props.eventSelection) {\n          initialContext.dispatch({\n            type: 'SELECT_EVENT',\n            eventInstanceId: eventInstanceId\n          });\n        }\n      } else {\n        // if now using mouse, but was previous touch interaction, clear selected event\n        initialContext.dispatch({\n          type: 'UNSELECT_EVENT'\n        });\n      }\n\n      if (_this.isDragging) {\n        initialContext.calendarApi.unselect(ev); // unselect *date* selection\n\n        initialContext.emitter.trigger('eventDragStart', {\n          el: _this.subjectEl,\n          event: new EventApi(initialContext, eventRange.def, eventRange.instance),\n          jsEvent: ev.origEvent,\n          view: initialContext.viewApi\n        });\n      }\n    };\n\n    _this.handleHitUpdate = function (hit, isFinal) {\n      if (!_this.isDragging) {\n        return;\n      }\n\n      var relevantEvents = _this.relevantEvents;\n      var initialHit = _this.hitDragging.initialHit;\n      var initialContext = _this.component.context; // states based on new hit\n\n      var receivingContext = null;\n      var mutation = null;\n      var mutatedRelevantEvents = null;\n      var isInvalid = false;\n      var interaction = {\n        affectedEvents: relevantEvents,\n        mutatedEvents: createEmptyEventStore(),\n        isEvent: true\n      };\n\n      if (hit) {\n        var receivingComponent = hit.component;\n        receivingContext = receivingComponent.context;\n        var receivingOptions = receivingContext.options;\n\n        if (initialContext === receivingContext || receivingOptions.editable && receivingOptions.droppable) {\n          mutation = computeEventMutation(initialHit, hit, receivingContext.getCurrentData().pluginHooks.eventDragMutationMassagers);\n\n          if (mutation) {\n            mutatedRelevantEvents = applyMutationToEventStore(relevantEvents, receivingContext.getCurrentData().eventUiBases, mutation, receivingContext);\n            interaction.mutatedEvents = mutatedRelevantEvents;\n\n            if (!receivingComponent.isInteractionValid(interaction)) {\n              isInvalid = true;\n              mutation = null;\n              mutatedRelevantEvents = null;\n              interaction.mutatedEvents = createEmptyEventStore();\n            }\n          }\n        } else {\n          receivingContext = null;\n        }\n      }\n\n      _this.displayDrag(receivingContext, interaction);\n\n      if (!isInvalid) {\n        enableCursor();\n      } else {\n        disableCursor();\n      }\n\n      if (!isFinal) {\n        if (initialContext === receivingContext && // TODO: write test for this\n        isHitsEqual(initialHit, hit)) {\n          mutation = null;\n        }\n\n        _this.dragging.setMirrorNeedsRevert(!mutation); // render the mirror if no already-rendered mirror\n        // TODO: wish we could somehow wait for dispatch to guarantee render\n\n\n        _this.dragging.setMirrorIsVisible(!hit || !document.querySelector('.fc-event-mirror')); // assign states based on new hit\n\n\n        _this.receivingContext = receivingContext;\n        _this.validMutation = mutation;\n        _this.mutatedRelevantEvents = mutatedRelevantEvents;\n      }\n    };\n\n    _this.handlePointerUp = function () {\n      if (!_this.isDragging) {\n        _this.cleanup(); // because handleDragEnd won't fire\n\n      }\n    };\n\n    _this.handleDragEnd = function (ev) {\n      if (_this.isDragging) {\n        var initialContext_1 = _this.component.context;\n        var initialView = initialContext_1.viewApi;\n        var _a = _this,\n            receivingContext_1 = _a.receivingContext,\n            validMutation = _a.validMutation;\n        var eventDef = _this.eventRange.def;\n        var eventInstance = _this.eventRange.instance;\n        var eventApi = new EventApi(initialContext_1, eventDef, eventInstance);\n        var relevantEvents_1 = _this.relevantEvents;\n        var mutatedRelevantEvents_1 = _this.mutatedRelevantEvents;\n        var finalHit = _this.hitDragging.finalHit;\n\n        _this.clearDrag(); // must happen after revert animation\n\n\n        initialContext_1.emitter.trigger('eventDragStop', {\n          el: _this.subjectEl,\n          event: eventApi,\n          jsEvent: ev.origEvent,\n          view: initialView\n        });\n\n        if (validMutation) {\n          // dropped within same calendar\n          if (receivingContext_1 === initialContext_1) {\n            var updatedEventApi = new EventApi(initialContext_1, mutatedRelevantEvents_1.defs[eventDef.defId], eventInstance ? mutatedRelevantEvents_1.instances[eventInstance.instanceId] : null);\n            initialContext_1.dispatch({\n              type: 'MERGE_EVENTS',\n              eventStore: mutatedRelevantEvents_1\n            });\n            var eventChangeArg = {\n              oldEvent: eventApi,\n              event: updatedEventApi,\n              relatedEvents: buildEventApis(mutatedRelevantEvents_1, initialContext_1, eventInstance),\n              revert: function revert() {\n                initialContext_1.dispatch({\n                  type: 'MERGE_EVENTS',\n                  eventStore: relevantEvents_1\n                });\n              }\n            };\n            var transformed = {};\n\n            for (var _i = 0, _b = initialContext_1.getCurrentData().pluginHooks.eventDropTransformers; _i < _b.length; _i++) {\n              var transformer = _b[_i];\n\n              __assign(transformed, transformer(validMutation, initialContext_1));\n            }\n\n            initialContext_1.emitter.trigger('eventDrop', __assign(__assign(__assign({}, eventChangeArg), transformed), {\n              el: ev.subjectEl,\n              delta: validMutation.datesDelta,\n              jsEvent: ev.origEvent,\n              view: initialView\n            }));\n            initialContext_1.emitter.trigger('eventChange', eventChangeArg); // dropped in different calendar\n          } else if (receivingContext_1) {\n            var eventRemoveArg = {\n              event: eventApi,\n              relatedEvents: buildEventApis(relevantEvents_1, initialContext_1, eventInstance),\n              revert: function revert() {\n                initialContext_1.dispatch({\n                  type: 'MERGE_EVENTS',\n                  eventStore: relevantEvents_1\n                });\n              }\n            };\n            initialContext_1.emitter.trigger('eventLeave', __assign(__assign({}, eventRemoveArg), {\n              draggedEl: ev.subjectEl,\n              view: initialView\n            }));\n            initialContext_1.dispatch({\n              type: 'REMOVE_EVENTS',\n              eventStore: relevantEvents_1\n            });\n            initialContext_1.emitter.trigger('eventRemove', eventRemoveArg);\n            var addedEventDef = mutatedRelevantEvents_1.defs[eventDef.defId];\n            var addedEventInstance = mutatedRelevantEvents_1.instances[eventInstance.instanceId];\n            var addedEventApi = new EventApi(receivingContext_1, addedEventDef, addedEventInstance);\n            receivingContext_1.dispatch({\n              type: 'MERGE_EVENTS',\n              eventStore: mutatedRelevantEvents_1\n            });\n            var eventAddArg = {\n              event: addedEventApi,\n              relatedEvents: buildEventApis(mutatedRelevantEvents_1, receivingContext_1, addedEventInstance),\n              revert: function revert() {\n                receivingContext_1.dispatch({\n                  type: 'REMOVE_EVENTS',\n                  eventStore: mutatedRelevantEvents_1\n                });\n              }\n            };\n            receivingContext_1.emitter.trigger('eventAdd', eventAddArg);\n\n            if (ev.isTouch) {\n              receivingContext_1.dispatch({\n                type: 'SELECT_EVENT',\n                eventInstanceId: eventInstance.instanceId\n              });\n            }\n\n            receivingContext_1.emitter.trigger('drop', __assign(__assign({}, buildDatePointApiWithContext(finalHit.dateSpan, receivingContext_1)), {\n              draggedEl: ev.subjectEl,\n              jsEvent: ev.origEvent,\n              view: finalHit.component.context.viewApi\n            }));\n            receivingContext_1.emitter.trigger('eventReceive', __assign(__assign({}, eventAddArg), {\n              draggedEl: ev.subjectEl,\n              view: finalHit.component.context.viewApi\n            }));\n          }\n        } else {\n          initialContext_1.emitter.trigger('_noEventDrop');\n        }\n      }\n\n      _this.cleanup();\n    };\n\n    var component = _this.component;\n    var options = component.context.options;\n    var dragging = _this.dragging = new FeaturefulElementDragging(settings.el);\n    dragging.pointer.selector = EventDragging.SELECTOR;\n    dragging.touchScrollAllowed = false;\n    dragging.autoScroller.isEnabled = options.dragScroll;\n    var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsStore);\n    hitDragging.useSubjectCenter = settings.useEventCenter;\n    hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n    hitDragging.emitter.on('dragstart', _this.handleDragStart);\n    hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n    hitDragging.emitter.on('pointerup', _this.handlePointerUp);\n    hitDragging.emitter.on('dragend', _this.handleDragEnd);\n    return _this;\n  }\n\n  EventDragging.prototype.destroy = function () {\n    this.dragging.destroy();\n  }; // render a drag state on the next receivingCalendar\n\n\n  EventDragging.prototype.displayDrag = function (nextContext, state) {\n    var initialContext = this.component.context;\n    var prevContext = this.receivingContext; // does the previous calendar need to be cleared?\n\n    if (prevContext && prevContext !== nextContext) {\n      // does the initial calendar need to be cleared?\n      // if so, don't clear all the way. we still need to to hide the affectedEvents\n      if (prevContext === initialContext) {\n        prevContext.dispatch({\n          type: 'SET_EVENT_DRAG',\n          state: {\n            affectedEvents: state.affectedEvents,\n            mutatedEvents: createEmptyEventStore(),\n            isEvent: true\n          }\n        }); // completely clear the old calendar if it wasn't the initial\n      } else {\n        prevContext.dispatch({\n          type: 'UNSET_EVENT_DRAG'\n        });\n      }\n    }\n\n    if (nextContext) {\n      nextContext.dispatch({\n        type: 'SET_EVENT_DRAG',\n        state: state\n      });\n    }\n  };\n\n  EventDragging.prototype.clearDrag = function () {\n    var initialCalendar = this.component.context;\n    var receivingContext = this.receivingContext;\n\n    if (receivingContext) {\n      receivingContext.dispatch({\n        type: 'UNSET_EVENT_DRAG'\n      });\n    } // the initial calendar might have an dummy drag state from displayDrag\n\n\n    if (initialCalendar !== receivingContext) {\n      initialCalendar.dispatch({\n        type: 'UNSET_EVENT_DRAG'\n      });\n    }\n  };\n\n  EventDragging.prototype.cleanup = function () {\n    this.subjectSeg = null;\n    this.isDragging = false;\n    this.eventRange = null;\n    this.relevantEvents = null;\n    this.receivingContext = null;\n    this.validMutation = null;\n    this.mutatedRelevantEvents = null;\n  }; // TODO: test this in IE11\n  // QUESTION: why do we need it on the resizable???\n\n\n  EventDragging.SELECTOR = '.fc-event-draggable, .fc-event-resizable';\n  return EventDragging;\n}(Interaction);\n\nfunction computeEventMutation(hit0, hit1, massagers) {\n  var dateSpan0 = hit0.dateSpan;\n  var dateSpan1 = hit1.dateSpan;\n  var date0 = dateSpan0.range.start;\n  var date1 = dateSpan1.range.start;\n  var standardProps = {};\n\n  if (dateSpan0.allDay !== dateSpan1.allDay) {\n    standardProps.allDay = dateSpan1.allDay;\n    standardProps.hasEnd = hit1.component.context.options.allDayMaintainDuration;\n\n    if (dateSpan1.allDay) {\n      // means date1 is already start-of-day,\n      // but date0 needs to be converted\n      date0 = startOfDay(date0);\n    }\n  }\n\n  var delta = diffDates(date0, date1, hit0.component.context.dateEnv, hit0.component === hit1.component ? hit0.component.largeUnit : null);\n\n  if (delta.milliseconds) {\n    // has hours/minutes/seconds\n    standardProps.allDay = false;\n  }\n\n  var mutation = {\n    datesDelta: delta,\n    standardProps: standardProps\n  };\n\n  for (var _i = 0, massagers_1 = massagers; _i < massagers_1.length; _i++) {\n    var massager = massagers_1[_i];\n    massager(mutation, hit0, hit1);\n  }\n\n  return mutation;\n}\n\nfunction getComponentTouchDelay$1(component) {\n  var options = component.context.options;\n  var delay = options.eventLongPressDelay;\n\n  if (delay == null) {\n    delay = options.longPressDelay;\n  }\n\n  return delay;\n}\n\nvar EventResizing =\n/** @class */\nfunction (_super) {\n  __extends(EventResizing, _super);\n\n  function EventResizing(settings) {\n    var _this = _super.call(this, settings) || this; // internal state\n\n\n    _this.draggingSegEl = null;\n    _this.draggingSeg = null; // TODO: rename to resizingSeg? subjectSeg?\n\n    _this.eventRange = null;\n    _this.relevantEvents = null;\n    _this.validMutation = null;\n    _this.mutatedRelevantEvents = null;\n\n    _this.handlePointerDown = function (ev) {\n      var component = _this.component;\n\n      var segEl = _this.querySegEl(ev);\n\n      var seg = getElSeg(segEl);\n      var eventRange = _this.eventRange = seg.eventRange;\n      _this.dragging.minDistance = component.context.options.eventDragMinDistance; // if touch, need to be working with a selected event\n\n      _this.dragging.setIgnoreMove(!_this.component.isValidSegDownEl(ev.origEvent.target) || ev.isTouch && _this.component.props.eventSelection !== eventRange.instance.instanceId);\n    };\n\n    _this.handleDragStart = function (ev) {\n      var context = _this.component.context;\n      var eventRange = _this.eventRange;\n      _this.relevantEvents = getRelevantEvents(context.getCurrentData().eventStore, _this.eventRange.instance.instanceId);\n\n      var segEl = _this.querySegEl(ev);\n\n      _this.draggingSegEl = segEl;\n      _this.draggingSeg = getElSeg(segEl);\n      context.calendarApi.unselect();\n      context.emitter.trigger('eventResizeStart', {\n        el: segEl,\n        event: new EventApi(context, eventRange.def, eventRange.instance),\n        jsEvent: ev.origEvent,\n        view: context.viewApi\n      });\n    };\n\n    _this.handleHitUpdate = function (hit, isFinal, ev) {\n      var context = _this.component.context;\n      var relevantEvents = _this.relevantEvents;\n      var initialHit = _this.hitDragging.initialHit;\n      var eventInstance = _this.eventRange.instance;\n      var mutation = null;\n      var mutatedRelevantEvents = null;\n      var isInvalid = false;\n      var interaction = {\n        affectedEvents: relevantEvents,\n        mutatedEvents: createEmptyEventStore(),\n        isEvent: true\n      };\n\n      if (hit) {\n        mutation = computeMutation(initialHit, hit, ev.subjectEl.classList.contains('fc-event-resizer-start'), eventInstance.range, context.pluginHooks.eventResizeJoinTransforms);\n      }\n\n      if (mutation) {\n        mutatedRelevantEvents = applyMutationToEventStore(relevantEvents, context.getCurrentData().eventUiBases, mutation, context);\n        interaction.mutatedEvents = mutatedRelevantEvents;\n\n        if (!_this.component.isInteractionValid(interaction)) {\n          isInvalid = true;\n          mutation = null;\n          mutatedRelevantEvents = null;\n          interaction.mutatedEvents = null;\n        }\n      }\n\n      if (mutatedRelevantEvents) {\n        context.dispatch({\n          type: 'SET_EVENT_RESIZE',\n          state: interaction\n        });\n      } else {\n        context.dispatch({\n          type: 'UNSET_EVENT_RESIZE'\n        });\n      }\n\n      if (!isInvalid) {\n        enableCursor();\n      } else {\n        disableCursor();\n      }\n\n      if (!isFinal) {\n        if (mutation && isHitsEqual(initialHit, hit)) {\n          mutation = null;\n        }\n\n        _this.validMutation = mutation;\n        _this.mutatedRelevantEvents = mutatedRelevantEvents;\n      }\n    };\n\n    _this.handleDragEnd = function (ev) {\n      var context = _this.component.context;\n      var eventDef = _this.eventRange.def;\n      var eventInstance = _this.eventRange.instance;\n      var eventApi = new EventApi(context, eventDef, eventInstance);\n      var relevantEvents = _this.relevantEvents;\n      var mutatedRelevantEvents = _this.mutatedRelevantEvents;\n      context.emitter.trigger('eventResizeStop', {\n        el: _this.draggingSegEl,\n        event: eventApi,\n        jsEvent: ev.origEvent,\n        view: context.viewApi\n      });\n\n      if (_this.validMutation) {\n        var updatedEventApi = new EventApi(context, mutatedRelevantEvents.defs[eventDef.defId], eventInstance ? mutatedRelevantEvents.instances[eventInstance.instanceId] : null);\n        context.dispatch({\n          type: 'MERGE_EVENTS',\n          eventStore: mutatedRelevantEvents\n        });\n        var eventChangeArg = {\n          oldEvent: eventApi,\n          event: updatedEventApi,\n          relatedEvents: buildEventApis(mutatedRelevantEvents, context, eventInstance),\n          revert: function revert() {\n            context.dispatch({\n              type: 'MERGE_EVENTS',\n              eventStore: relevantEvents\n            });\n          }\n        };\n        context.emitter.trigger('eventResize', __assign(__assign({}, eventChangeArg), {\n          el: _this.draggingSegEl,\n          startDelta: _this.validMutation.startDelta || createDuration(0),\n          endDelta: _this.validMutation.endDelta || createDuration(0),\n          jsEvent: ev.origEvent,\n          view: context.viewApi\n        }));\n        context.emitter.trigger('eventChange', eventChangeArg);\n      } else {\n        context.emitter.trigger('_noEventResize');\n      } // reset all internal state\n\n\n      _this.draggingSeg = null;\n      _this.relevantEvents = null;\n      _this.validMutation = null; // okay to keep eventInstance around. useful to set it in handlePointerDown\n    };\n\n    var component = settings.component;\n    var dragging = _this.dragging = new FeaturefulElementDragging(settings.el);\n    dragging.pointer.selector = '.fc-event-resizer';\n    dragging.touchScrollAllowed = false;\n    dragging.autoScroller.isEnabled = component.context.options.dragScroll;\n    var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n    hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n    hitDragging.emitter.on('dragstart', _this.handleDragStart);\n    hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n    hitDragging.emitter.on('dragend', _this.handleDragEnd);\n    return _this;\n  }\n\n  EventResizing.prototype.destroy = function () {\n    this.dragging.destroy();\n  };\n\n  EventResizing.prototype.querySegEl = function (ev) {\n    return elementClosest(ev.subjectEl, '.fc-event');\n  };\n\n  return EventResizing;\n}(Interaction);\n\nfunction computeMutation(hit0, hit1, isFromStart, instanceRange, transforms) {\n  var dateEnv = hit0.component.context.dateEnv;\n  var date0 = hit0.dateSpan.range.start;\n  var date1 = hit1.dateSpan.range.start;\n  var delta = diffDates(date0, date1, dateEnv, hit0.component.largeUnit);\n  var props = {};\n\n  for (var _i = 0, transforms_1 = transforms; _i < transforms_1.length; _i++) {\n    var transform = transforms_1[_i];\n    var res = transform(hit0, hit1);\n\n    if (res === false) {\n      return null;\n    }\n\n    if (res) {\n      __assign(props, res);\n    }\n  }\n\n  if (isFromStart) {\n    if (dateEnv.add(instanceRange.start, delta) < instanceRange.end) {\n      props.startDelta = delta;\n      return props;\n    }\n  } else if (dateEnv.add(instanceRange.end, delta) > instanceRange.start) {\n    props.endDelta = delta;\n    return props;\n  }\n\n  return null;\n}\n\nvar UnselectAuto =\n/** @class */\nfunction () {\n  function UnselectAuto(context) {\n    var _this = this;\n\n    this.context = context;\n    this.isRecentPointerDateSelect = false; // wish we could use a selector to detect date selection, but uses hit system\n\n    this.matchesCancel = false;\n    this.matchesEvent = false;\n\n    this.onSelect = function (selectInfo) {\n      if (selectInfo.jsEvent) {\n        _this.isRecentPointerDateSelect = true;\n      }\n    };\n\n    this.onDocumentPointerDown = function (pev) {\n      var unselectCancel = _this.context.options.unselectCancel;\n      var downEl = pev.origEvent.target;\n      _this.matchesCancel = !!elementClosest(downEl, unselectCancel);\n      _this.matchesEvent = !!elementClosest(downEl, EventDragging.SELECTOR); // interaction started on an event?\n    };\n\n    this.onDocumentPointerUp = function (pev) {\n      var context = _this.context;\n      var documentPointer = _this.documentPointer;\n      var calendarState = context.getCurrentData(); // touch-scrolling should never unfocus any type of selection\n\n      if (!documentPointer.wasTouchScroll) {\n        if (calendarState.dateSelection && // an existing date selection?\n        !_this.isRecentPointerDateSelect // a new pointer-initiated date selection since last onDocumentPointerUp?\n        ) {\n            var unselectAuto = context.options.unselectAuto;\n\n            if (unselectAuto && (!unselectAuto || !_this.matchesCancel)) {\n              context.calendarApi.unselect(pev);\n            }\n          }\n\n        if (calendarState.eventSelection && // an existing event selected?\n        !_this.matchesEvent // interaction DIDN'T start on an event\n        ) {\n            context.dispatch({\n              type: 'UNSELECT_EVENT'\n            });\n          }\n      }\n\n      _this.isRecentPointerDateSelect = false;\n    };\n\n    var documentPointer = this.documentPointer = new PointerDragging(document);\n    documentPointer.shouldIgnoreMove = true;\n    documentPointer.shouldWatchScroll = false;\n    documentPointer.emitter.on('pointerdown', this.onDocumentPointerDown);\n    documentPointer.emitter.on('pointerup', this.onDocumentPointerUp);\n    /*\n    TODO: better way to know about whether there was a selection with the pointer\n    */\n\n    context.emitter.on('select', this.onSelect);\n  }\n\n  UnselectAuto.prototype.destroy = function () {\n    this.context.emitter.off('select', this.onSelect);\n    this.documentPointer.destroy();\n  };\n\n  return UnselectAuto;\n}();\n\nvar OPTION_REFINERS = {\n  fixedMirrorParent: identity\n};\nvar LISTENER_REFINERS = {\n  dateClick: identity,\n  eventDragStart: identity,\n  eventDragStop: identity,\n  eventDrop: identity,\n  eventResizeStart: identity,\n  eventResizeStop: identity,\n  eventResize: identity,\n  drop: identity,\n  eventReceive: identity,\n  eventLeave: identity\n};\n/*\nGiven an already instantiated draggable object for one-or-more elements,\nInterprets any dragging as an attempt to drag an events that lives outside\nof a calendar onto a calendar.\n*/\n\nvar ExternalElementDragging =\n/** @class */\nfunction () {\n  function ExternalElementDragging(dragging, suppliedDragMeta) {\n    var _this = this;\n\n    this.receivingContext = null;\n    this.droppableEvent = null; // will exist for all drags, even if create:false\n\n    this.suppliedDragMeta = null;\n    this.dragMeta = null;\n\n    this.handleDragStart = function (ev) {\n      _this.dragMeta = _this.buildDragMeta(ev.subjectEl);\n    };\n\n    this.handleHitUpdate = function (hit, isFinal, ev) {\n      var dragging = _this.hitDragging.dragging;\n      var receivingContext = null;\n      var droppableEvent = null;\n      var isInvalid = false;\n      var interaction = {\n        affectedEvents: createEmptyEventStore(),\n        mutatedEvents: createEmptyEventStore(),\n        isEvent: _this.dragMeta.create\n      };\n\n      if (hit) {\n        receivingContext = hit.component.context;\n\n        if (_this.canDropElOnCalendar(ev.subjectEl, receivingContext)) {\n          droppableEvent = computeEventForDateSpan(hit.dateSpan, _this.dragMeta, receivingContext);\n          interaction.mutatedEvents = eventTupleToStore(droppableEvent);\n          isInvalid = !isInteractionValid(interaction, receivingContext);\n\n          if (isInvalid) {\n            interaction.mutatedEvents = createEmptyEventStore();\n            droppableEvent = null;\n          }\n        }\n      }\n\n      _this.displayDrag(receivingContext, interaction); // show mirror if no already-rendered mirror element OR if we are shutting down the mirror (?)\n      // TODO: wish we could somehow wait for dispatch to guarantee render\n\n\n      dragging.setMirrorIsVisible(isFinal || !droppableEvent || !document.querySelector('.fc-event-mirror'));\n\n      if (!isInvalid) {\n        enableCursor();\n      } else {\n        disableCursor();\n      }\n\n      if (!isFinal) {\n        dragging.setMirrorNeedsRevert(!droppableEvent);\n        _this.receivingContext = receivingContext;\n        _this.droppableEvent = droppableEvent;\n      }\n    };\n\n    this.handleDragEnd = function (pev) {\n      var _a = _this,\n          receivingContext = _a.receivingContext,\n          droppableEvent = _a.droppableEvent;\n\n      _this.clearDrag();\n\n      if (receivingContext && droppableEvent) {\n        var finalHit = _this.hitDragging.finalHit;\n        var finalView = finalHit.component.context.viewApi;\n        var dragMeta = _this.dragMeta;\n        receivingContext.emitter.trigger('drop', __assign(__assign({}, buildDatePointApiWithContext(finalHit.dateSpan, receivingContext)), {\n          draggedEl: pev.subjectEl,\n          jsEvent: pev.origEvent,\n          view: finalView\n        }));\n\n        if (dragMeta.create) {\n          var addingEvents_1 = eventTupleToStore(droppableEvent);\n          receivingContext.dispatch({\n            type: 'MERGE_EVENTS',\n            eventStore: addingEvents_1\n          });\n\n          if (pev.isTouch) {\n            receivingContext.dispatch({\n              type: 'SELECT_EVENT',\n              eventInstanceId: droppableEvent.instance.instanceId\n            });\n          } // signal that an external event landed\n\n\n          receivingContext.emitter.trigger('eventReceive', {\n            event: new EventApi(receivingContext, droppableEvent.def, droppableEvent.instance),\n            relatedEvents: [],\n            revert: function revert() {\n              receivingContext.dispatch({\n                type: 'REMOVE_EVENTS',\n                eventStore: addingEvents_1\n              });\n            },\n            draggedEl: pev.subjectEl,\n            view: finalView\n          });\n        }\n      }\n\n      _this.receivingContext = null;\n      _this.droppableEvent = null;\n    };\n\n    var hitDragging = this.hitDragging = new HitDragging(dragging, interactionSettingsStore);\n    hitDragging.requireInitial = false; // will start outside of a component\n\n    hitDragging.emitter.on('dragstart', this.handleDragStart);\n    hitDragging.emitter.on('hitupdate', this.handleHitUpdate);\n    hitDragging.emitter.on('dragend', this.handleDragEnd);\n    this.suppliedDragMeta = suppliedDragMeta;\n  }\n\n  ExternalElementDragging.prototype.buildDragMeta = function (subjectEl) {\n    if (typeof this.suppliedDragMeta === 'object') {\n      return parseDragMeta(this.suppliedDragMeta);\n    }\n\n    if (typeof this.suppliedDragMeta === 'function') {\n      return parseDragMeta(this.suppliedDragMeta(subjectEl));\n    }\n\n    return getDragMetaFromEl(subjectEl);\n  };\n\n  ExternalElementDragging.prototype.displayDrag = function (nextContext, state) {\n    var prevContext = this.receivingContext;\n\n    if (prevContext && prevContext !== nextContext) {\n      prevContext.dispatch({\n        type: 'UNSET_EVENT_DRAG'\n      });\n    }\n\n    if (nextContext) {\n      nextContext.dispatch({\n        type: 'SET_EVENT_DRAG',\n        state: state\n      });\n    }\n  };\n\n  ExternalElementDragging.prototype.clearDrag = function () {\n    if (this.receivingContext) {\n      this.receivingContext.dispatch({\n        type: 'UNSET_EVENT_DRAG'\n      });\n    }\n  };\n\n  ExternalElementDragging.prototype.canDropElOnCalendar = function (el, receivingContext) {\n    var dropAccept = receivingContext.options.dropAccept;\n\n    if (typeof dropAccept === 'function') {\n      return dropAccept.call(receivingContext.calendarApi, el);\n    }\n\n    if (typeof dropAccept === 'string' && dropAccept) {\n      return Boolean(elementMatches(el, dropAccept));\n    }\n\n    return true;\n  };\n\n  return ExternalElementDragging;\n}(); // Utils for computing event store from the DragMeta\n// ----------------------------------------------------------------------------------------------------\n\n\nfunction computeEventForDateSpan(dateSpan, dragMeta, context) {\n  var defProps = __assign({}, dragMeta.leftoverProps);\n\n  for (var _i = 0, _a = context.pluginHooks.externalDefTransforms; _i < _a.length; _i++) {\n    var transform = _a[_i];\n\n    __assign(defProps, transform(dateSpan, dragMeta));\n  }\n\n  var _b = refineEventDef(defProps, context),\n      refined = _b.refined,\n      extra = _b.extra;\n\n  var def = parseEventDef(refined, extra, dragMeta.sourceId, dateSpan.allDay, context.options.forceEventDuration || Boolean(dragMeta.duration), // hasEnd\n  context);\n  var start = dateSpan.range.start; // only rely on time info if drop zone is all-day,\n  // otherwise, we already know the time\n\n  if (dateSpan.allDay && dragMeta.startTime) {\n    start = context.dateEnv.add(start, dragMeta.startTime);\n  }\n\n  var end = dragMeta.duration ? context.dateEnv.add(start, dragMeta.duration) : getDefaultEventEnd(dateSpan.allDay, start, context);\n  var instance = createEventInstance(def.defId, {\n    start: start,\n    end: end\n  });\n  return {\n    def: def,\n    instance: instance\n  };\n} // Utils for extracting data from element\n// ----------------------------------------------------------------------------------------------------\n\n\nfunction getDragMetaFromEl(el) {\n  var str = getEmbeddedElData(el, 'event');\n  var obj = str ? JSON.parse(str) : {\n    create: false\n  }; // if no embedded data, assume no event creation\n\n  return parseDragMeta(obj);\n}\n\nconfig.dataAttrPrefix = '';\n\nfunction getEmbeddedElData(el, name) {\n  var prefix = config.dataAttrPrefix;\n  var prefixedName = (prefix ? prefix + '-' : '') + name;\n  return el.getAttribute('data-' + prefixedName) || '';\n}\n/*\nMakes an element (that is *external* to any calendar) draggable.\nCan pass in data that determines how an event will be created when dropped onto a calendar.\nLeverages FullCalendar's internal drag-n-drop functionality WITHOUT a third-party drag system.\n*/\n\n\nvar ExternalDraggable =\n/** @class */\nfunction () {\n  function ExternalDraggable(el, settings) {\n    var _this = this;\n\n    if (settings === void 0) {\n      settings = {};\n    }\n\n    this.handlePointerDown = function (ev) {\n      var dragging = _this.dragging;\n      var _a = _this.settings,\n          minDistance = _a.minDistance,\n          longPressDelay = _a.longPressDelay;\n      dragging.minDistance = minDistance != null ? minDistance : ev.isTouch ? 0 : BASE_OPTION_DEFAULTS.eventDragMinDistance;\n      dragging.delay = ev.isTouch ? // TODO: eventually read eventLongPressDelay instead vvv\n      longPressDelay != null ? longPressDelay : BASE_OPTION_DEFAULTS.longPressDelay : 0;\n    };\n\n    this.handleDragStart = function (ev) {\n      if (ev.isTouch && _this.dragging.delay && ev.subjectEl.classList.contains('fc-event')) {\n        _this.dragging.mirror.getMirrorEl().classList.add('fc-event-selected');\n      }\n    };\n\n    this.settings = settings;\n    var dragging = this.dragging = new FeaturefulElementDragging(el);\n    dragging.touchScrollAllowed = false;\n\n    if (settings.itemSelector != null) {\n      dragging.pointer.selector = settings.itemSelector;\n    }\n\n    if (settings.appendTo != null) {\n      dragging.mirror.parentNode = settings.appendTo; // TODO: write tests\n    }\n\n    dragging.emitter.on('pointerdown', this.handlePointerDown);\n    dragging.emitter.on('dragstart', this.handleDragStart);\n    new ExternalElementDragging(dragging, settings.eventData); // eslint-disable-line no-new\n  }\n\n  ExternalDraggable.prototype.destroy = function () {\n    this.dragging.destroy();\n  };\n\n  return ExternalDraggable;\n}();\n/*\nDetects when a *THIRD-PARTY* drag-n-drop system interacts with elements.\nThe third-party system is responsible for drawing the visuals effects of the drag.\nThis class simply monitors for pointer movements and fires events.\nIt also has the ability to hide the moving element (the \"mirror\") during the drag.\n*/\n\n\nvar InferredElementDragging =\n/** @class */\nfunction (_super) {\n  __extends(InferredElementDragging, _super);\n\n  function InferredElementDragging(containerEl) {\n    var _this = _super.call(this, containerEl) || this;\n\n    _this.shouldIgnoreMove = false;\n    _this.mirrorSelector = '';\n    _this.currentMirrorEl = null;\n\n    _this.handlePointerDown = function (ev) {\n      _this.emitter.trigger('pointerdown', ev);\n\n      if (!_this.shouldIgnoreMove) {\n        // fire dragstart right away. does not support delay or min-distance\n        _this.emitter.trigger('dragstart', ev);\n      }\n    };\n\n    _this.handlePointerMove = function (ev) {\n      if (!_this.shouldIgnoreMove) {\n        _this.emitter.trigger('dragmove', ev);\n      }\n    };\n\n    _this.handlePointerUp = function (ev) {\n      _this.emitter.trigger('pointerup', ev);\n\n      if (!_this.shouldIgnoreMove) {\n        // fire dragend right away. does not support a revert animation\n        _this.emitter.trigger('dragend', ev);\n      }\n    };\n\n    var pointer = _this.pointer = new PointerDragging(containerEl);\n    pointer.emitter.on('pointerdown', _this.handlePointerDown);\n    pointer.emitter.on('pointermove', _this.handlePointerMove);\n    pointer.emitter.on('pointerup', _this.handlePointerUp);\n    return _this;\n  }\n\n  InferredElementDragging.prototype.destroy = function () {\n    this.pointer.destroy();\n  };\n\n  InferredElementDragging.prototype.setIgnoreMove = function (bool) {\n    this.shouldIgnoreMove = bool;\n  };\n\n  InferredElementDragging.prototype.setMirrorIsVisible = function (bool) {\n    if (bool) {\n      // restore a previously hidden element.\n      // use the reference in case the selector class has already been removed.\n      if (this.currentMirrorEl) {\n        this.currentMirrorEl.style.visibility = '';\n        this.currentMirrorEl = null;\n      }\n    } else {\n      var mirrorEl = this.mirrorSelector ? document.querySelector(this.mirrorSelector) : null;\n\n      if (mirrorEl) {\n        this.currentMirrorEl = mirrorEl;\n        mirrorEl.style.visibility = 'hidden';\n      }\n    }\n  };\n\n  return InferredElementDragging;\n}(ElementDragging);\n/*\nBridges third-party drag-n-drop systems with FullCalendar.\nMust be instantiated and destroyed by caller.\n*/\n\n\nvar ThirdPartyDraggable =\n/** @class */\nfunction () {\n  function ThirdPartyDraggable(containerOrSettings, settings) {\n    var containerEl = document;\n\n    if ( // wish we could just test instanceof EventTarget, but doesn't work in IE11\n    containerOrSettings === document || containerOrSettings instanceof Element) {\n      containerEl = containerOrSettings;\n      settings = settings || {};\n    } else {\n      settings = containerOrSettings || {};\n    }\n\n    var dragging = this.dragging = new InferredElementDragging(containerEl);\n\n    if (typeof settings.itemSelector === 'string') {\n      dragging.pointer.selector = settings.itemSelector;\n    } else if (containerEl === document) {\n      dragging.pointer.selector = '[data-event]';\n    }\n\n    if (typeof settings.mirrorSelector === 'string') {\n      dragging.mirrorSelector = settings.mirrorSelector;\n    }\n\n    new ExternalElementDragging(dragging, settings.eventData); // eslint-disable-line no-new\n  }\n\n  ThirdPartyDraggable.prototype.destroy = function () {\n    this.dragging.destroy();\n  };\n\n  return ThirdPartyDraggable;\n}();\n\nvar main = createPlugin({\n  componentInteractions: [DateClicking, DateSelecting, EventDragging, EventResizing],\n  calendarInteractions: [UnselectAuto],\n  elementDraggingImpl: FeaturefulElementDragging,\n  optionRefiners: OPTION_REFINERS,\n  listenerRefiners: LISTENER_REFINERS\n});\nexport default main;\nexport { ExternalDraggable as Draggable, FeaturefulElementDragging, PointerDragging, ThirdPartyDraggable };","import * as react from 'react';\nimport * as reactDom from 'react-dom';\n(typeof globalThis !== 'undefined' ? globalThis : window).FullCalendarVDom = {\n  Component: react.Component,\n  createElement: react.createElement,\n  render: reactDom.render,\n  createRef: react.createRef,\n  Fragment: react.Fragment,\n  createContext: react.createContext,\n  flushToDom: flushToDom,\n  unmountComponentAtNode: reactDom.unmountComponentAtNode\n};\nexport function flushToDom() {// always sync from top-level\n}","import { __assign, __extends } from \"tslib\";\nimport './vdom';\nimport * as React from 'react';\nimport { CalendarApi, CalendarDataProvider, CalendarContent, CalendarRoot } from '@fullcalendar/common';\n\nvar FullCalendar =\n/** @class */\nfunction (_super) {\n  __extends(FullCalendar, _super);\n\n  function FullCalendar() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._calendarApi = new CalendarApi();\n    return _this;\n  }\n\n  FullCalendar.prototype.render = function () {\n    return React.createElement(CalendarDataProvider, {\n      optionOverrides: this.props,\n      calendarApi: this._calendarApi\n    }, function (data) {\n      return React.createElement(CalendarRoot, {\n        options: data.calendarOptions,\n        theme: data.theme,\n        emitter: data.emitter\n      }, function (classNames, height, isHeightAuto, forPrint) {\n        return React.createElement(\"div\", {\n          className: classNames.join(' '),\n          style: {\n            height: height\n          }\n        }, React.createElement(CalendarContent, __assign({\n          isHeightAuto: isHeightAuto,\n          forPrint: forPrint\n        }, data)));\n      });\n    });\n  };\n\n  FullCalendar.prototype.getApi = function () {\n    return this._calendarApi;\n  };\n\n  return FullCalendar;\n}(React.Component);\n\nexport default FullCalendar; // export all important utils/types\n\nexport * from '@fullcalendar/common';"],"sourceRoot":""}